var textForPages =["","Nuvoton Technology Corporation\u000d\u000a1\u000d\u000aBuilding Edge AI\u000d\u000aon NuMicro\u00ae M55M1\u000d\u000aEdge AI on IoT device","Nuvoton Technology Corporation\u000d\u000a2\u000d\u000aPreface\u000d\u000aThis book is intended for Nuvoton distributors, customers, developers, and \u000d\u000apotential users interested in the Nuvoton ecosystem. Its primary objective is to \u000d\u000aintroduce the development workflow of Edge AI applications on the NuMicro\u00ae \u000d\u000aM55M1. This volume is not intended as a comprehensive reference for \u000d\u000aprogramming in TensorFlow, Python, Jupyter Notebook, Pandas, or NumPy. \u000d\u000aRather, these technologies are introduced solely to demonstrate their \u000d\u000aspecific implementation and utility within the context of practical engineering \u000d\u000adevelopment. While a foundational background in software development is \u000d\u000arequired, this product-oriented guide also serves as a comprehensive desk \u000d\u000areference.\u000d\u000aThe book is organized into five chapters. Chapter 1 opens with the fundamental \u000d\u000aprinciples of deep learning, referencing seminal papers from the scholars who \u000d\u000apioneered these breakthroughs to provide readers with a clear historical and \u000d\u000aconceptual context. Chapter 2 provides an overview of the Nuvoton chip family, \u000d\u000awith a specific focus on AI-capable series such as the NuMicro\u00ae M460, MA35, \u000d\u000aand M55M1. Chapter 3 concentrates on the NuMicro\u00ae M55M1 hardware; it \u000d\u000aserves as a streamlined version of the 3,500-page Technical Reference Manual \u000d\u000a(TRM), presenting essential data in an accessible format. Since Edge AI \u000d\u000adevelopment on the M55M1 currently relies on the TensorFlow framework, \u000d\u000aChapter 4 is dedicated entirely to its integration. Finally, Chapter 5 presents a \u000d\u000acase study of Nuvoton\u2019s Atrial Fibrillation (AFib) AI model, detailing the \u000d\u000acomplete end-to-end workflow for TensorFlow Lite Micro application \u000d\u000adevelopment.\u000d\u000aI would like to express my sincere gratitude to Mr. Joseph Fu for his invaluable \u000d\u000asupport, guidance, and excellent editorial suggestions. My thanks also go to \u000d\u000aLogen Yang for providing essential materials and to Shirley Yu for her financial \u000d\u000asupport. For the AFib AI model development, I am deeply grateful to Jason \u000d\u000aZhang and Karin Li for their critical contributions to dataset collection and \u000d\u000aprocessing.\u000d\u000a 2026 Shanghai","Nuvoton Technology Corporation\u000d\u000a3\u000d\u000aTable of Contents\u000d\u000aPreface ..................................................................................................................2\u000d\u000aTable of Contents..................................................................................................3\u000d\u000a1 ............................................................................................................................8\u000d\u000aFoundations of Deep Learning..............................................................................8\u000d\u000aBiological Neural Networks..............................................................................9\u000d\u000aArtificial Neural Networks..............................................................................10\u000d\u000aThe Neuron .................................................................................................11\u000d\u000aActivation Function ....................................................................................13\u000d\u000aLoss Function..............................................................................................15\u000d\u000aGradient Descent.........................................................................................16\u000d\u000aBackpropagation .........................................................................................16\u000d\u000aThe Universal Approximation Theorem .........................................................17\u000d\u000a2 ..........................................................................................................................18\u000d\u000aThe Nuvoton NuMicro\u00ae Family ........................................................................18\u000d\u000aNuMicro\u00ae Microcontroller Core....................................................................19\u000d\u000aEndpoint AI artificial intelligence platform....................................................20\u000d\u000aNuMicro M460 Series.....................................................................................21\u000d\u000aFeatures.......................................................................................................21\u000d\u000aOverview.....................................................................................................22\u000d\u000aNuMicro MA35 Series....................................................................................23\u000d\u000aFeatures.......................................................................................................23\u000d\u000aOverview.....................................................................................................24\u000d\u000aNuMicro M55M1 Series.................................................................................25","Nuvoton Technology Corporation\u000d\u000a4\u000d\u000aFeatures.......................................................................................................25\u000d\u000aOverview.....................................................................................................26\u000d\u000a3 ..........................................................................................................................27\u000d\u000aIntroducing the NuMicro\u00ae M55M1 ...................................................................27\u000d\u000aKey Specifications of the NuMicro M55M1...................................................28\u000d\u000aThe microNPU Ethos-U55..............................................................................29\u000d\u000aFunctional Description....................................................................................30\u000d\u000aArm\u00ae Cortex\u00ae-M55 Core..........................................................................30\u000d\u000aArm\u00ae TrustZone\u00ae .....................................................................................32\u000d\u000aPower Manager...........................................................................................34\u000d\u000aSystem Manager..........................................................................................44\u000d\u000aClock Controller..........................................................................................51\u000d\u000aSecurity Configuration Unit (SCU) ............................................................53\u000d\u000aTrue Random Number Generator (TRNG).................................................55\u000d\u000aFlash Memory Controller (FMC)................................................................57\u000d\u000aExternal Bus Interface (EBI).......................................................................60\u000d\u000aGeneral Purpose I/O (GPIO).......................................................................62\u000d\u000aLow Power General Purpose I/O (LPGPIO)...............................................64\u000d\u000aGraphic Direct Memory Access Controller (GDMA).................................66\u000d\u000aPDMA Controller (PDMA) ........................................................................68\u000d\u000aLow Power Peripheral Direct Memory Access Controller (LPPDMA)......70\u000d\u000aTimer Controller (TMR).............................................................................72\u000d\u000aLow Power Timer Controller (LPTMR).....................................................74\u000d\u000aTick Timer Controller (TTMR) ..................................................................77\u000d\u000aWatchdog Timer (WDT).............................................................................79","Nuvoton Technology Corporation\u000d\u000a5\u000d\u000aWindow Watchdog Timer (WWDT) ..........................................................81\u000d\u000aReal Time Clock (RTC)..............................................................................82\u000d\u000aBasic PWM Generator and Capture Timer (BPWM) .................................84\u000d\u000aEPWM Generator and Capture Timer (EPWM).........................................86\u000d\u000aEnhanced Quadrature Encoder Interface (EQEI)........................................89\u000d\u000aEnhanced Input Capture Timer (ECAP) .....................................................92\u000d\u000aCamera Capture Interface Controller (CCAP)............................................94\u000d\u000aUART Interface Controller (UART)...........................................................96\u000d\u000aLow Power UART Interface Controller (LPUART)...................................99\u000d\u000aEthernet MAC Controller (EMAC) ..........................................................101\u000d\u000aSmart Card Host Interface (SC)................................................................103\u000d\u000aI2S Controller (I2S) ..................................................................................105\u000d\u000aSerial Peripheral Interface (SPI) ...............................................................107\u000d\u000aLow Power Serial Peripheral Interface (LPSPI) .......................................109\u000d\u000aQuad Serial Peripheral Interface (QSPI)...................................................111\u000d\u000aSPI/HyperBus Synchronous Serial Interface Controller (SPIM) ..............113\u000d\u000aI2C Serial Interface Controller (I2C)........................................................116\u000d\u000aLow Power I2C Serial Interface Controller (LPI2C)................................118\u000d\u000aI3C Serial Interface Controller (I3C)........................................................120\u000d\u000aUSCI - Universal Serial Control Interface Controller (USCI) ..................122\u000d\u000aUSCI - UART mode .................................................................................123\u000d\u000aUSCI - SPI Mode ......................................................................................125\u000d\u000aUSCI - I2C Mode......................................................................................127\u000d\u000aSecure Digital Host Controller (SDH) ......................................................129\u000d\u000aProgrammable Serial I/O (PSIO) ..............................................................131","Nuvoton Technology Corporation\u000d\u000a6\u000d\u000aUSB 1.1 Device Controller (USBD).........................................................133\u000d\u000aUSB 1.1 Host Controller (USBH).............................................................135\u000d\u000aUSB 1.1 On-the-Go (OTG).......................................................................137\u000d\u000aHigh Speed USB 2.0 Device Controller (HSUSBD) ................................139\u000d\u000aUSB 2.0 and 1.1 Host Controller (HSUSBH and USBH1).......................141\u000d\u000aHigh Speed USB 2.0 On-The-Go (HSOTG).............................................143\u000d\u000aUSB Type C Power Delivery Controller (UTCPD)..................................145\u000d\u000aEnhanced 12-bit Analog-to-Digital Converter (EADC) ...........................147\u000d\u000aController Area Network with Flexible Data Rate (CAN FD) .................150\u000d\u000aCRC Controller (CRC) .............................................................................152\u000d\u000aCryptographic Accelerator (CRYPTO).....................................................154\u000d\u000aKey Store (KS)..........................................................................................158\u000d\u000aKeypad Interface (KPI).............................................................................160\u000d\u000aAwake Filter (AWF).................................................................................161\u000d\u000aDigital Microphone Inputs (DMIC)..........................................................162\u000d\u000aKey Derivation Function (KDF)...............................................................164\u000d\u000aNeural Network Processing Unit (NPU)...................................................166\u000d\u000aOn-The-Fly Cipher (OTFC)......................................................................168\u000d\u000aAnalog Comparator Controller (ACMP) ..................................................170\u000d\u000aDigital to Analog Converter (DAC)..........................................................172\u000d\u000aLow Power Analog-to-Digital Converter (LPADC).................................174\u000d\u000a4 ........................................................................................................................176\u000d\u000aThe TensorFlow Framework.............................................................................176\u000d\u000aWhat Is TensorFlow?....................................................................................177\u000d\u000aTensorFlow basics ........................................................................................177","Nuvoton Technology Corporation\u000d\u000a7\u000d\u000aTensors......................................................................................................177\u000d\u000aVariables...................................................................................................179\u000d\u000aOperations (Ops).......................................................................................179\u000d\u000aAutomatic differentiation..........................................................................180\u000d\u000aInstall TensorFlow 2 .....................................................................................181\u000d\u000a5 ........................................................................................................................182\u000d\u000aBuilding TensorFlow Lite Micro Applications with NuMicro\u00ae M55M1 ........182\u000d\u000aAtrial fibrillation ...........................................................................................183\u000d\u000aPC Hardware Requirements for CUDA Support ..........................................184\u000d\u000aSet up development environment..................................................................185\u000d\u000aOverview of the Deep Learning workflow ...................................................187\u000d\u000aData preparation............................................................................................188\u000d\u000aBuild the neural network model....................................................................189\u000d\u000aCompile the neural network model...............................................................189\u000d\u000aTrain the neural network model ....................................................................189\u000d\u000aVisualize model performance .......................................................................190\u000d\u000aOptimize model with INT8 quantization for TensorFlow Lite .....................191\u000d\u000aDeploy model to NuMicro\u00ae M55M1 with the NuML Toolkit.....................192","Nuvoton Technology Corporation\u000d\u000a8\u000d\u000a1\u000d\u000aFoundations of Deep Learning\u000d\u000aIn 2006, a paper (https://www.cs.toronto.edu/~hinton/absps/ncfast.pdf) on \u000d\u000atraining a deep neural network capable of recognizing handwritten digits with \u000d\u000astate-of-the-art precision (>98%) was published by Geoffrey Hinton et al. This \u000d\u000atechnique was later termed deep learning. \u000d\u000aIn 2012, Alex Krizhevsky, Ilya Sutskever, and Geoffrey Hinton published a \u000d\u000amilestone paper titled ImageNet Classification with Deep Convolutional Neural \u000d\u000aNetworks (https://papers.nips.cc/paper/4824-imagenet-classification-with-deepconvolutional-neural-networks.pdf). The paper describes their use of neural \u000d\u000anetworks to win the ImageNet competition of the same year. At the end of their \u000d\u000apaper, they noted that the network\u2019s performance degrades even if a single layer \u000d\u000ais removed. Their experiments demonstrated that removing any of the middle \u000d\u000alayers resulted in an about 2% top-1 accuracy loss of the model. They concluded \u000d\u000athat network depth is important for the performance of the network.\u000d\u000a\u25fc A computer program is said to learn from experience E with respect to \u000d\u000asome task T and some performance measure P, if its performance on \u000d\u000aT, as measured by P, improves with experience E.\u000d\u000a-- Tom Mitchell, 1997","Nuvoton Technology Corporation\u000d\u000a9\u000d\u000aBiological Neural Networks\u000d\u000aThe brain is the most incredible organ in the human body. It dictates the way we \u000d\u000aperceive every sight, sound, smell, taste, and touch. It enables us to store \u000d\u000amemories, experience emotions, and even dream. Without it, we would be \u000d\u000aprimitive organisms, incapable of anything other than the simplest of reflexes. The \u000d\u000abrain is, inherently, what makes us intelligent.\u000d\u000aThe infant brain weighs only a single pound, but somehow it solves problems that \u000d\u000aevent our biggest, most powerful supercomputers find impossible. Within a matter \u000d\u000aof months after birth, infants can recognize the faces of their parents, discern \u000d\u000adiscrete objects from their backgrounds, and even tell voices apart. Within a year, \u000d\u000athey have already developed an intuition for natural physics, can track objects \u000d\u000aeven when they become partially or completely blocked, and can associate sounds \u000d\u000awith specific meanings. And by early childhood, they have a sophisticated \u000d\u000aunderstanding of grammar and thousands of words in their vocabularies.\u000d\u000aThe human brain contains over 10,000 neurons, each of which forms an average \u000d\u000aof 6,000 connections with other neurons. It is this massive biological neural \u000d\u000anetwork enables humans to perceive their environment. The dendrite in the human \u000d\u000abrain represents the input to the network, while the synaptic terminals represent \u000d\u000athe output. The cell is where computation would take place before synaptic \u000d\u000aterminals get the output.","Nuvoton Technology Corporation\u000d\u000a10\u000d\u000aArtificial Neural Networks\u000d\u000aAn artificial neural network (ANN) consists of connected units or nodes called \u000d\u000aartificial neurons, which loosely model the neurons in the brain. Artificial neuron \u000d\u000amodels that mimic biological neurons more closely have also been recently \u000d\u000ainvestigated and shown to significantly improve performance. These are \u000d\u000aconnected by edges, which model the synapses in the brain. Each artificial neuron \u000d\u000areceives signals from connected neurons, then processes them and sends a signal \u000d\u000ato other connected neurons. The \"signal\" is a real number, and the output of each \u000d\u000aneuron is computed by some non-linear function of the totality of its inputs, called \u000d\u000athe activation function. The strength of the signal at each connection is determined \u000d\u000aby a weight, which adjusts during the learning process.\u000d\u000aTypically, neurons are aggregated into layers. Different layers may perform \u000d\u000adifferent transformations on their inputs. Signals travel from the first layer (the \u000d\u000ainput layer) to the last layer (the output layer), possibly passing through multiple \u000d\u000aintermediate layers (hidden layers). A network is typically called a deep neural \u000d\u000anetwork if it has at least two hidden layers.","Nuvoton Technology Corporation\u000d\u000a11\u000d\u000aRandom weights and biases are initialized when data is passed to a network. Some \u000d\u000acomputation happens in the hidden layers leading to output.\u000d\u000aThis computation is fundamentally structured as a Multiply-Accumulate\u000d\u000a(MAC) operation - a cornerstone of Neural Processing Unit (NPU) architectures\u000d\u000a- wherein the input signal is scaled by weight parameters and subsequently \u000d\u000acombined with a bias term.\u000d\u000aThe Neuron\u000d\u000aThe neuron in human brain is optimized to receive information from other \u000d\u000aneurons, process it in a unique way. Multiple incoming signals are modulated their \u000d\u000astrength, summed and transformed, then send the result to other cells. This process \u000d\u000ais summarized in below figure.\u000d\u000aIn deep learning, the functional understanding of the neurons in human brain can \u000d\u000abe translated into an artificial model that can be represented on computer.\u000d\u000aIn 1943, Warren S. McCulloch and Walter H. Pitts introduced the seminal \u000d\u000amathematical framework for artificial neurons in paper, A Logical Calculus of \u000d\u000athe Ideas Immanent in Nervous Activity.\u000d\u000a(https://www.cs.cmu.edu/~epxing/Class/10715/reading/McCulloch.and.Pitts.pdf)\u000d\u000aTheir neurons have a binary output state, and there are two types of input to the \u000d\u000aneurons: excitatory inputs and inhibitory inputs. All excitatory inputs to the \u000d\u000aneuron have equal positive weights. If all the inputs to the neuron are excitatory \u000d\u000aand if the total input \u2211\ud835\udc56 \ud835\udc64\ud835\udc56\ud835\udc65\ud835\udc56 > 0, the neuron would output 1. In cases where any \u000d\u000aof the inhibitory inputs are active or \u2211\ud835\udc56 \ud835\udc64\ud835\udc56 \ud835\udc65\ud835\udc56 < 0, the output would be 0. Using ","Nuvoton Technology Corporation\u000d\u000a12\u000d\u000athis logic, all the Boolean logic functions can be implemented by one or more \u000d\u000asuch neurons. The drawback of these networks was that they had no way of\u000d\u000alearning the weights through training. One must figure out the weights manually \u000d\u000aand combine the neurons to achieve the required computation. Such a model is \u000d\u000adescribed in the following figure. \u000d\u000aJust as in biological neurons, artificial neuron takes in some number of inputs, \u000d\u000a\ud835\udc651\u000d\u000a, \ud835\udc652\u000d\u000a, \u2026 , \ud835\udc65\ud835\udc5b, each of which is multiplied by a specific weight, \ud835\udc641\u000d\u000a, \ud835\udc642\u000d\u000a, \u2026 , \ud835\udc64\ud835\udc5b. \u000d\u000aThese weighted inputs are summed together to produce the logit of the neuron:\u000d\u000a\ud835\udc53(\ud835\udc67) = \u2211\ud835\udc64\ud835\udc56\ud835\udc65\ud835\udc56\u000d\u000a\ud835\udc5b\u000d\u000a\ud835\udc56=0\u000d\u000aIn many cases, the logit also includes a bias, which is a constant. The logit is then \u000d\u000apassed through a function \ud835\udc53 to produce the output \ud835\udc66 = \ud835\udc53(\ud835\udc67). This output can be \u000d\u000atransmitted to other neurons.","Nuvoton Technology Corporation\u000d\u000a13\u000d\u000aActivation Function\u000d\u000aWhile linear neurons are easy to compute with, but they run into serious \u000d\u000alimitations. In fact, it can be shown that any feed-forward neural network \u000d\u000aconsisting of only linear neurons can be expressed as a network with no hidden \u000d\u000alayers. We know hidden layers are what enable us to learn important features from \u000d\u000athe input data. In other words, in order to learn complex relationships, we need to \u000d\u000ause neurons that employ some sort (activation functions) of nonlinearity.\u000d\u000aSigmoid\u000d\u000aThe sigmoid activation function exhibits a sigmoidal geometry, which \u000d\u000aeffectively squashes any real-valued input into the range (0, 1). The sigmoid \u000d\u000aactivation function uses the function:\u000d\u000a\ud835\udc53(\ud835\udc67) =\u000d\u000a1\u000d\u000a1 + \ud835\udc52\u000d\u000a\u2212\ud835\udc67\u000d\u000aThis S-curve profile represents a three-phase transition: an initial phase of slow \u000d\u000agrowth, a rapid linear-like expansion around the origin, and a final saturation \u000d\u000aphase as it reaches its natural limits, as shown in the figure below.","Nuvoton Technology Corporation\u000d\u000a14\u000d\u000aSoftmax\u000d\u000aThe softmax activation function is a variant of the sigmoid function used in multiclass problems where labels are mutually exclusive. For example, a 10-second \u000d\u000aECG recording is used to diagnose whether a patient has Atrial Fibrillation (AFib)\u000d\u000aor not. Use the softmax activation where there is only one correct answer.\u000d\u000aTanh\u000d\u000aThe tanh activation function uses a similar kind of S-shaped nonlinearity, but \u000d\u000ainstead of ranging from 0 to 1, the output of tanh activation function range from -\u000d\u000a1 to 1. When S-shaped nonlinearities are used, the tanh activation function is often \u000d\u000apreferred over the sigmoid activation function because it is zero-centered. The \u000d\u000atanh activation function uses the function:\u000d\u000a\ud835\udc53(\ud835\udc67) = tanh (\ud835\udc67)","Nuvoton Technology Corporation\u000d\u000a15\u000d\u000aReLU\u000d\u000aThe ReLU (Restricted Linear Unit) limits the output to 0 and above. It is used in \u000d\u000athe hidden layer of neural networks. It, therefore, ensures no negative outputs from \u000d\u000athe hidden layers. The ReLU has recently been used in many tasks (especially in \u000d\u000acomputer vision) for a number of reasons, despite some drawbacks. It uses the \u000d\u000afunction:\u000d\u000a\ud835\udc53(\ud835\udc67) = max (0, \ud835\udc67)\u000d\u000aLoss Function\u000d\u000aA neural network learns by evaluating predictions against the true values and \u000d\u000aadjusting the weights. The objective is to obtain the weights that minimize the \u000d\u000aerror, also known as the loss function or cost function. The choice of a loss \u000d\u000afunction, therefore, depends on the problem. Classification tasks require \u000d\u000aclassification loss functions, while regression problems require regression loss \u000d\u000afunctions. As the neural network learns, the loss functions should decrease.","Nuvoton Technology Corporation\u000d\u000a16\u000d\u000aGradient Descent\u000d\u000aDuring the training process, errors are reduced by the optimizer function. This \u000d\u000aoptimization is done via gradient descent.\u000d\u000aGradient descent adjusts the errors by reducing the cost function. This is done \u000d\u000aby computing where the error is at its minimum, commonly known as the local \u000d\u000aminimum. Meanwhile, one can think of the global minimum as descending on a \u000d\u000aslope where the goal is to get to the bottom of the hill. This process involves \u000d\u000acomputing the slope of a specific point on the hill via differentiation.\u000d\u000aBackpropagation\u000d\u000aBackpropagation was popularized by David E. Rumelhart, Geoffrey E. Hinton, \u000d\u000aand Ronald J. Williams in their landmark 1986 paper.\u000d\u000aWhat is the idea behind backpropagation? It hardly know what the hidden units \u000d\u000aought to be doing, but what can do is compute how fast the error changes as the \u000d\u000achange of a hidden activity. From there, one can figure out how fast the error \u000d\u000achanges when the weight of an individual connection is changed. Essentially, it \u000d\u000awill be trying to find the path of steepest descent in an extremely high-dimensional \u000d\u000aspace.","Nuvoton Technology Corporation\u000d\u000a17\u000d\u000aThe Universal Approximation Theorem\u000d\u000aThe Universal Approximation Theorem, first demonstrated by George Cybenko \u000d\u000ain 1989 and laten refined by Kurt Hornik in 1991, forms the theoretical foundation \u000d\u000aof machine learning. The mathematical foundation for many neural network \u000d\u000aarchitectures, including transformers, is governed by this theorem. This theorem \u000d\u000astates that a feedforward neural network with a single hidden layer can \u000d\u000aapproximate any continuous function to arbitrary precision, given the right \u000d\u000aactivation function and a sufficient number of neurons in the hidden layer.\u000d\u000aThe important consequence of the theorem is that a machine can theoretically \u000d\u000alearn to produce almost any output from the input set of data. Even in the case of \u000d\u000adiscontinuous functions, the neural network can still learn an approximation of the \u000d\u000afunction. Understanding this theorem is essential for grasping the potential and \u000d\u000alimitations of neural networks as function approximators, as well as their \u000d\u000aimplications for complex architectures like transformers.\u000d\u000aTheorem (Universal Approximation) Let \u03c3: \u211d \u2192 \u211d be a non-constant, bounded, \u000d\u000aand continuous activation function. Then, for any continuous function f:[a, b] \u2192\u000d\u000a\u211d and any \u03f5 > 0, there exists a neural network with one hidden layer that \u000d\u000aapproximates f to within \u03f5 in the \ud835\udc3f\u000d\u000a\u221enorm:\u000d\u000a\u2016\ud835\udc53(\ud835\udc65) \u2212\u2211\ud835\udc50\ud835\udc56\u03c3(aix + bi)\u000d\u000a\ud835\udc41\u000d\u000a\ud835\udc56=1\u000d\u000a\u2016\u000d\u000a\u221e\u000d\u000a< \u03f5\u000d\u000afor some coefficients c\ud835\udc56,a\ud835\udc56,b\ud835\udc56, \u220a \u211d.","Nuvoton Technology Corporation\u000d\u000a18\u000d\u000a2\u000d\u000aThe Nuvoton NuMicro\u00ae Family\u000d\u000aNuvoton Technology is a leading semiconductor company specializing in highperformance, low-power microcontrollers.\u000d\u000aNuvoton focuses on the developments of microcontroller, audio, AI, battery \u000d\u000amonitoring, component and visual sensing ICs and has strong market share in \u000d\u000aIndustrial, Automotive, \u000d\u000aCommunication, Consumer \u000d\u000aand Computer markets.\u000d\u000aNuvoton\u2019s NuMicro\u00ae \u000d\u000afamily offers a \u000d\u000acomprehensive portfolio of \u000d\u000amicrocontrollers and \u000d\u000amicroprocessors, ranging \u000d\u000afrom the 8051 series to \u000d\u000ahigh-performance Arm\u00ae \u000d\u000aCortex\u00ae-M (M0, M23, \u000d\u000aM33, M4, M7, and M55), \u000d\u000aArm9, and Cortex-A35\u000d\u000acores.","Nuvoton Technology Corporation\u000d\u000a19\u000d\u000aNuMicro\u00ae Microcontroller Core\u000d\u000aCortex\u00ae A35 Industrial control and HMI\u000d\u000aMachine learning\u000d\u000aEdge gateway\u000d\u000aNew energy\u000d\u000aAIoT\u000d\u000aArm 9\u2122 Industrial control\u000d\u000aHMI\u000d\u000aAIoT\u000d\u000aCortex\u00ae M7 Inverter motor\u000d\u000aDigital power\u000d\u000aCortex\u00ae M55 Machine learning\u000d\u000aEndpoint AI\u000d\u000aSecurity\u000d\u000aCortex\u00ae M4 Audio and HMI\u000d\u000aIndustrial control\u000d\u000aEndpoint AI\u000d\u000aDigital power\u000d\u000aCortex\u00ae M33 AIoT\u000d\u000aSmart appliance\u000d\u000aCortex\u00ae M23 AIoT security\u000d\u000aLow power\u000d\u000aCortex\u00ae M0 Optical module\u000d\u000aIndustrial control\u000d\u000aAutomotive\u000d\u000a8051 Industrial control\u000d\u000aLow power","Nuvoton Technology Corporation\u000d\u000a20\u000d\u000aEndpoint AI artificial intelligence platform\u000d\u000aNuvoton has introduced the Endpoint AI artificial intelligence platform to \u000d\u000aaccelerate the development of full-featured AI microcontroller (MCU) products. \u000d\u000aThese solutions are enabled by Nuvoton\u2019s powerful new MCU and MPU silicon, \u000d\u000aincluding the NuMicro\u00ae M55M1 microcontroller, equipped with Ethos\u2122 U55\u000d\u000aNPU accelerator, NuMicro\u00ae MA35D1, and NuMicro\u00ae M467 series. These \u000d\u000aMCUs are a valuable addition to the modern AI-centric computing tookit and \u000d\u000ademonstrate how Nuvoton continues to work closely with Arm and other \u000d\u000acompanies to develop a user-friendly and complete Endpoint AI Ecosystem.\u000d\u000aNuMaker-M55M1 NuMaker-HMI-M467 NuMaker-HMI-MA35\u000d\u000a\u2022 Cortex-M55 \u000d\u000a(220 MHz)\u000d\u000a\u2022 Ethos-U55 \u000d\u000a(220 MHz)\u000d\u000a\u2022 1.5 MB \u000d\u000aSRAM\u000d\u000a\u2022 2 MB Flash\u000d\u000a\u2022 HyperRAM\u000d\u000a\u2022 480x272 TFTLCD\u000d\u000a\u2022 XOM Model \u000d\u000aProtect\u000d\u000a\u2022 Smart Motion \u000d\u000aDetection\u000d\u000a\u2022 Acoustic \u000d\u000aEnergy \u000d\u000aDetection\u000d\u000a\u2022 Smart Wakeup\u000d\u000a\u2022 TensorFlow \u000d\u000aLite Miro\u000d\u000a\u2022 Cortex-M4 \u000d\u000a(200 MHz)\u000d\u000a\u2022 512 KB \u000d\u000aSRAM\u000d\u000a\u2022 1 MB Flash\u000d\u000a\u2022 HyperRAM\u000d\u000a\u2022 480x272 TFTLCD\u000d\u000a\u2022 XOM\u000d\u000a\u2022 TensorFlow \u000d\u000aLite Micro\u000d\u000a\u2022 Dual CortexA35 (800 \u000d\u000aMHz)\u000d\u000a\u2022 Cortex-M4 \u000d\u000a(180 MHz)\u000d\u000a\u2022 256 MB DDR\u000d\u000a\u2022 eMMC Flash \u000d\u000a16 GB\u000d\u000a\u2022 1024x600 \u000d\u000aTFT-LCD\u000d\u000a\u2022 Linux 5.10\u000d\u000a\u2022 TensorFlow \u000d\u000aLite Micro","Nuvoton Technology Corporation\u000d\u000a21\u000d\u000aNuMicro M460 Series\u000d\u000aFeatures\u000d\u000aSystem\u000d\u000a\u2022 Arm Cortex-M4 core\u000d\u000a\u2022 Runs up to 200 MHz\u000d\u000a\u2022 Up to 1024 KB Flash Memory, dual bank for FOTA\u000d\u000a\u2022 Up to 512 KB SRAM, 64 KB with parity check\u000d\u000a\u2022 Operating voltage: 1.8 V ~ 3.6 V\u000d\u000a\u2022 Operating temperature: -40\u00b0C ~ +105 \u00b0C\u000d\u000a\u2022 8 KB Loader ROM (LDROM)\u000d\u000a\u2022 Dual PDMA, each with 16 channels\u000d\u000a\u2022 Fractional Audio PLL\u000d\u000aAnalog\u000d\u000a\u2022 3 sets of 12-bit 5 MSPS ADC\u000d\u000a\u2022 2-channel 12-bit 1 Msps DAC\u000d\u000a\u2022 4 sets of ACMP\u000d\u000aSecurity\u000d\u000a\u2022 Crypto Engine\u000d\u000a\u2022 True Random Number Generator\u000d\u000a\u2022 Key Store to protect key\u000d\u000a\u2022 8 KB Key Protection ROM\u000d\u000a\u2022 3 KB One Time Programming\u000d\u000a\u2022 eXecute-Only-Memory (XOM)\u000d\u000aPeripherals\u000d\u000a\u2022 12-channel 16-bit Enhanced 200 MHz PWM\u000d\u000a\u2022 12-channel 16-bit Basic 200 MHz PWM\u000d\u000a\u2022 10/100 Mbps Ethernet\u000d\u000a\u2022 1 set of HyperBus Interface\u000d\u000a\u2022 1 set of SPIM + 16 KB Cache (XIP)","Nuvoton Technology Corporation\u000d\u000a22\u000d\u000aOverview\u000d\u000aThe M467 series is a 32-bit microcontroller based on the Arm Cortex-M4F core \u000d\u000awith a built-in DSP instruction set and single precision floating point unit (FPU). \u000d\u000aIt is ideal for a wide range of applications: smart home appliances, IoT gateways, \u000d\u000aindustrial control, telecommunications, and data centers.\u000d\u000aIn IoT tasks, the M467 can be enhanced with a rich set of connectivity, I/O, and \u000d\u000asecurity peripherals, from Ethernet 10/100 MAC to hardware encryption, \u000d\u000adecryption, and key storage. With the M467\u2019s broad built-in I/O support, users \u000d\u000acan choose only the precise hardware extensions they need for their particular \u000d\u000aapplications. The M467 also supports HyperRAM. In AI/ML applications, the \u000d\u000a64MB of HyperRAM provides the flexibility to handle different ML models with \u000d\u000avarying memory size or density requirements.\u000d\u000aNuMicro\u00ae M4 Family MCU","Nuvoton Technology Corporation\u000d\u000a23\u000d\u000aNuMicro MA35 Series\u000d\u000aFeatures\u000d\u000aSystem\u000d\u000a\u2022 Dual 64-bit Arm Cortex-A35 high-performance cores, \u000d\u000aup to 1 GHz\u000d\u000a\u2022 Arm Cortex-M4 real-time core, up to 200 MHz\u000d\u000a\u2022 Supports 16-bit DDR/DDR3 and DDR3L type of \u000d\u000aSDRAM, up to 2 GB\u000d\u000a\u2022 Supports discrete power supply and PMIC\u000d\u000a\u2022 Offers integrated parts by LQFP and BGA package with \u000d\u000astacking a DDR2/DDR3L SDRAM\u000d\u000a\u2022 Operating temperature: -40\u00b0C ~ +85\u00b0C\u000d\u000aAnalog\u000d\u000a\u2022 1 set of 12-bit 4.7 Msps EADC with 8 input channels or \u000d\u000a4 differential input pairs\u000d\u000a\u2022 1 set of 12-bit 500 Ksps ADC with 8 input channels, \u000d\u000asupports 4/5-wire resistive touch\u000d\u000aMultimedia\u000d\u000a\u2022 LCD RGB I/F display with resolution up to 1920x1080\u000d\u000a\u2022 Integrated 2D Graphic Engine\u000d\u000a\u2022 H.264 decoder\u000d\u000a\u2022 JPEG decoder\u000d\u000a\u2022 2 sets of Camera\u000d\u000aSecurity\u000d\u000a\u2022 Trusted Secure Island (TSI) \u000d\u000a\u2022 Crypto Engine (AES256/SHA512/ECC/RSA4096/SM4)\u000d\u000a\u2022 True Random Number Generator (TRNG)\u000d\u000a\u2022 Secure Boot\u000d\u000a\u2022 8 Kbit One Time Programmable (OTP) memory","Nuvoton Technology Corporation\u000d\u000a24\u000d\u000aOverview\u000d\u000aThe MA35D1 series is a heterogeneous multi-core microprocessor for high-end \u000d\u000aEdge IIoT Gateway, based on a dual-core 64-bit Arm Cortex-A35 core at 800 \u000d\u000aMHz and a 180 MHz Arm Cortex-M4. These high-performance cores facilitate \u000d\u000aTiny AI/ML edge computing.\u000d\u000aThe MA35D1 series is a trusted system for IoT products' security requirements. It \u000d\u000aincludes several advanced security mechanisms such as Nuvoton Trusted Secure \u000d\u000aIsland (TSI), an isolated secure hardware unit, TrustZone\u00ae , secure boot, tamperdetection, built-in cryptographic accelerators with AES, SHA, ECC, RSA, \u000d\u000aSM2/3/4, and a TRNG, as well as Key Store and OTP memory. All the security \u000d\u000aoperations are performed in the TSI to protect sensitive and high-value data. The \u000d\u000afeatures also satisfy customers in IEC 62443 certification requirements.","Nuvoton Technology Corporation\u000d\u000a25\u000d\u000aNuMicro M55M1 Series\u000d\u000aFeatures\u000d\u000aSystem\u000d\u000a\u2022 32-bit Cortex-M55 process with 200 MHz core \u000d\u000afrequency, Armv8.1-M architecture, M-class Vector \u000d\u000aExtension (MVE), Arm Helium technology\u000d\u000a\u2022 microNPU Ethos-U55\u000d\u000a\u2022 1.5 MB SRAM, 2 MB Flash\u000d\u000aAnalog\u000d\u000a\u2022 12-bit DAC, 12-/8-bit output with PDMA, up to 2x 12-\u000d\u000abit MSPS voltage type\u000d\u000a\u2022 4-channel digital Pulse Density Modulation (PDM) \u000d\u000amicrophone interface with Voice Active Detection\u000d\u000aPeripherals\u000d\u000a\u2022 External Bus Interface (EBI) with i80 mode LCD\u000d\u000a\u2022 4 sets of SPI controllers with LCD support\u000d\u000a\u2022 Supports Camera Capture interface controller (CCAP)\u000d\u000a\u2022 Graphic Direct Memory Access controller with \u000d\u000aAMBA\u00ae AXI5 interfaces, equipped with Arm DMA350 specification\u000d\u000a\u2022 4 Enhanced Quadrature Encoder Interface (EQEI) \u000d\u000acontrollers\u000d\u000aSecurity\u000d\u000a\u2022 Arm TrustZone\u000d\u000a\u2022 True Random Number Generator (TRNG)\u000d\u000a\u2022 Cryptographic Accelerator, Key Store\u000d\u000a\u2022 On-The-Fly Cipher (OTFC) accelerator, integrates AES128, side-channel attack protection (SCAP), differential \u000d\u000afault analysis protection (DFAP)","Nuvoton Technology Corporation\u000d\u000a26\u000d\u000aOverview\u000d\u000aThe NuMicro M55M1 series is a new generation AI microcontroller, which \u000d\u000adelivers up to 110 GOPS of AI computing power, specifically designed for \u000d\u000aEndpoint AI such as data recognition and intelligent audio.\u000d\u000aThe M55M1 is a 32-bit microcontroller based on a 220 MHz Arm Cortex-M55 \u000d\u000acore, featuring an Arm Ethos\u2122-U55 Neural Processing Unit (NPU) as a \u000d\u000acoprocessor to accelerate neural network operations.\u000d\u000aIn addition to its outstanding AI performance, the M55M1 also includes DSP \u000d\u000aextensions, vector extensions (Helium), double-precision FPU, two 16-ch PDMA \u000d\u000acontrollers and one 2-ch GDMA controller, making it an ideal choice for \u000d\u000aembedded applications\u2014especially those requiring intensive computation such as \u000d\u000aaudio processing, communications, digital signal processing, machine learning \u000d\u000aand sensor fusion.\u000d\u000aThe M55M1 series microcontroller benefits design of a wide range of applications\u000d\u000asuch as:\u000d\u000a\u2022 Human presence detection\u000d\u000a\u2022 Robotics\u000d\u000a\u2022 Smart toys & Sensor Hub\u000d\u000a\u2022 Smart appliances\u000d\u000a\u2022 PC Accessories\u000d\u000a\u2022 AIoT","Nuvoton Technology Corporation\u000d\u000a27\u000d\u000a3\u000d\u000aIntroducing the NuMicro\u00ae\u000d\u000aM55M1\u000d\u000aThe Nuvoton NuMicro\u00ae M55M1 is a low-power cutting-edge microcontroller \u000d\u000a(MCU) designed specifically for next-generation Edge AI applications in IoT \u000d\u000adevices.\u000d\u000aThis highly power-efficient MCU leverages the Arm Cortex-M55 CPU and the \u000d\u000aintegrated Arm Ethos-U55 microNPU to deliver significant AI processing power \u000d\u000a(up to 110 GOPS) in resource-constrained environments where traditional CPUs \u000d\u000aor larger systems are unfeasible.\u000d\u000aThe architecture of Nuvoton NuMicro\u00ae M55M1 is fully compatible with the \u000d\u000astandard framework for embedded machine learning: TensorFlow Lite Micro \u000d\u000a(TFLite Micro). This compatibility allows developers to seamlessly deploy \u000d\u000acomplex, pre-trained neural networks models like CNNs, RNNs and LSTMs \u000d\u000adirectly onto the device for local execution of voice recognition, predictive \u000d\u000amaintenance, and object detection tasks, enhancing privacy and reducing latency. \u000d\u000aThe chip is a powerful solution for intelligent devices that need robust security \u000d\u000afeatures and high-performance, on-device data processing. ","Nuvoton Technology Corporation\u000d\u000a28\u000d\u000aKey Specifications of the NuMicro M55M1\u000d\u000aFeature Specification\u000d\u000aCPU Core Arm Cortex-M55 with Helium M-Profile Vector Extension \u000d\u000a(MVE) and FPU\u000d\u000aNPU Arm Ethos-U55 microNPU (256 MACs configuration)\u000d\u000aPerformance Up to 220 MHz core clock speed, delivering up to 110 GOPS \u000d\u000aof AI computing power\u000d\u000aMemory 2 MB on-chip Flash memory and up to 1.5 MB on-chip SRAM\u000d\u000aPower Low power consumption with multiple power-down modes, \u000d\u000aincluding deep sleep with RTC active (<1\u00b5A)\u000d\u000aSecurity Arm TrustZone technology, Secure Boot, True Random \u000d\u000aNumber Generator (TRNG), and hardware cryptography \u000d\u000aengine (AES, SHA, RSA, ECC). \u000d\u000aOperating \u000d\u000aRange\u000d\u000aVoltage range: 1.71V to 3.6V; Temperature range: -40\u00b0C to \u000d\u000a+105\u00b0C","Nuvoton Technology Corporation\u000d\u000a29\u000d\u000aThe microNPU Ethos-U55\u000d\u000aThe Nuvoton NuMicro M55M1 microcontroller incorporates the Arm Ethos-U55 \u000d\u000amicroNPU, which is configured to deliver a maximum of 110 GOPS (Giga \u000d\u000aOperations Per Second) of AI computing power and utilizes a configurable 256 \u000d\u000aMAC (Multiply-Accuulate) engine. \u000d\u000aThe following table provides examples of CNN and RNN/LTSM network \u000d\u000aarchitectures compatible with TensorFlow Lite for Microcontroller.\u000d\u000aML application Description Neural Networks \u000d\u000aModels\u000d\u000a(TFLite Micro)\u000d\u000aDTLN Noise suppression in speech Link\u000d\u000aHello World the absolute basics of using \u000d\u000aTFLite Micro\u000d\u000aLink\u000d\u000aMNIST MNIST recognition using \u000d\u000aLSTM\u000d\u000aLink\u000d\u000aKeyword spotting Recognize the keyword in audio Link\u000d\u000aVisual Wake \u000d\u000aWord\u000d\u000aRecognize if a person is present Link","Nuvoton Technology Corporation\u000d\u000a30\u000d\u000aFunctional Description\u000d\u000aArm\u00ae Cortex\u00ae-M55 Core\u000d\u000aThe M55M1 series contains the Cortex-M55 processor that implements the \u000d\u000aArmv8.1-M Mainline architecture. It features the M-class Vector Extension \u000d\u000a(MVE, which is also referred to as Arm Helium technology) that supports \u000d\u000acompute applications, such as Digital Signal Procession (DSP) and Machine\u000d\u000aLearning. MVE adds over 150 new scalar and vector instructions and eight 128-\u000d\u000abit vector registers. Each MVE operation can handle four 32-bit data (integer or \u000d\u000asingle precision floating-point data) or eight 16-bit data (integer or half precision \u000d\u000afloating-point data) or sixteen 8-bit data (integer). Another characteristic is \u000d\u000aTrustZone Security Extension, which supports Secure and Non-secure states on \u000d\u000aall memory interfaces. Memory and peripherals in the system can be marked as \u000d\u000aSecure, making them accessible only to code that is running in the Secure state. \u000d\u000aThe Security Extension adds security through code and data protection features. \u000d\u000aThis processor also supports previous Armv8-M architectural features. Figure 6.1-\u000d\u000a1 shows the functional controller of the processor. For more detail of Cortex-M55,\u000d\u000aplease see the Arm\u00ae Cortex\u00ae-M55 Processor Technical Reference Manual.\u000d\u000aWith the help of Arm Custom Instructions (ACIs) Extension, the Cortex-M55 \u000d\u000aprocessor in the M55M1 series also supports 10-cycle sine/cosine calculation \u000d\u000ainstruction. For more information of how to use the ACI, please refer to the sample \u000d\u000acode provided in our Board Support Package (BSP).\u000d\u000aHere is a quick summary of the key characteristics of the Cortex-M55 processor \u000d\u000ain the M55M1.\u000d\u000a\u2022 Armv8.1-M architecture with support for:\u000d\u000a- Helium vector processing\u000d\u000a- Floating-point Unit (FPU) with support for multiple floatingpoint formats\u000d\u000a\u2022 TrustZone security extension\u000d\u000a\u2022 Advanced memory system features including caches (16KB I/D-cache) \u000d\u000aand tightly coupled memory (64KB I-TCM and 128KB D-TCM) support\u000d\u000a\u2022 Secure and Non-secure Memory Protection Units (MPU) with 8 MPU \u000d\u000aregions for each of them\u000d\u000a\u2022 Up to 480 interrupts and non-maskable interrupt (NMI), with 16 levels \u000d\u000aof programmable priority levels","Nuvoton Technology Corporation\u000d\u000a31\u000d\u000a\u2022 Arm Custom Instructions (sine/cosine calculation)\u000d\u000a\u2022 Various debug feature enhancements including new Performance \u000d\u000aMonitoring Unit (PMU)","Nuvoton Technology Corporation\u000d\u000a32\u000d\u000aArm\u00ae TrustZone\u00ae\u000d\u000aThe Arm\u00ae TrustZone\u00ae can be considered as a physical partition that divides the \u000d\u000amicrocontroller into Secure (Trusted) and Non-secure (Non-trusted) worlds \u000d\u000aaccording to memory address. The secure world is an isolated execution \u000d\u000aenvironment, where code and data inside are protected and cannot be accessed \u000d\u000afrom Non-secure world. Code running at secure world is called secure code that \u000d\u000acan access both secure and non-secure memories and peripherals; while code \u000d\u000arunning at non-secure world is called non-secure code that can only access nonsecure memories and peripherals.\u000d\u000aFigure below shows an example of a system divided into the secure world and \u000d\u000anon-secure world. Green blocks indicate secure components, Red blocks indicate \u000d\u000anon-secure components and white ones are both/either secure and/or non-secure \u000d\u000aaccessible. When the core processor is in secure state (left side of the figure), it \u000d\u000abelongs to secure world, which has its own MSP, PSP and VTOR registers and \u000d\u000acan access the green, red, white blocks. Contrarily, when the core processor is in \u000d\u000anon-secure state (right side of the figure), it belongs to non-secure world, which \u000d\u000aalso has its own MSP, PSP and VTOR registers, but, it can only access red and \u000d\u000awhite blocks so that non-secure world components are not able to impact secure \u000d\u000aworld.","Nuvoton Technology Corporation\u000d\u000a33\u000d\u000aTo support Arm\u00ae TrustZone\u00ae, there are two parts should be considered: one is \u000d\u000athe address space partition of a master/processor view; the other is the security \u000d\u000aattribute of a slave/peripheral.\u000d\u000aThe address space is the space that a master/processor view a system. It should be \u000d\u000apartitioned to targeted world (Secure or Non-secure) with correct attribute (NS, S, \u000d\u000aNSC). The \u201cAddress Space Partition\u201d section will give detailed description of the \u000d\u000apartitioning.\u000d\u000aEach slave/peripheral has its own security attribute, indicating which world the \u000d\u000aslave/peripheral belongs to. The \u201c0 Address Space Security Check of Processor\u201d \u000d\u000asection will give detailed description of setting the security attribute of the slave.\u000d\u000aTo make the TrustZone correct, correct address space partitioning and correct \u000d\u000asecurity attribute configuration are essential, the secure software should take \u000d\u000acharge of the correctness of these settings.\u000d\u000aWhenever being cold reset, the whole system of the chip is in secure state, that is, \u000d\u000athe core processor, RAM and peripherals are all in secure state. Therefore, the \u000d\u000asystem boots in secure state. The boot code is responsible to set up TrustZone\u00ae \u000d\u000arelated control units to partition address space and assign nonsecure resources for \u000d\u000anon-secure world.","Nuvoton Technology Corporation\u000d\u000a34\u000d\u000aPower Manager\u000d\u000aOverview\u000d\u000aPower management includes the following sections:\u000d\u000a\u2022 Wake-up Source\u000d\u000a\u2022 Power Domain Distribution\u000d\u000a\u2022 Power Manager Control Register\u000d\u000aPower Level and Wake-up Sources\u000d\u000aThis chip has a power manager unit to support several power levels for saving \u000d\u000apower. The below table lists all power levels in the chip.\u000d\u000aMode LDO_CAP\u000d\u000a(V)\u000d\u000aPerformance \u000d\u000aDomain\u000d\u000aMax Speed \u000d\u000a(MHz)\u000d\u000aBase \u000d\u000aDomain\u000d\u000aMax Speed\u000d\u000a(MHz)\u000d\u000aLow Power \u000d\u000aDomain\u000d\u000aMax Speed \u000d\u000a(MHz)\u000d\u000aPower level 0 1.15 220 MHz 220 MHz 110 MHz\u000d\u000aPower level 1 1.1 200 MHz 200 MHz 100 MHz\u000d\u000aEach power mode has different entry setting and leaving condition. Table 6.3-2 \u000d\u000ashows the entry setting for each power mode. When chip power-on, chip is \u000d\u000arunning in normal mode. User can enter each mode by setting SLEEPDEEP \u000d\u000a(SCR[2]) and execute WFI instruction. System tick interrupt \u000d\u000aTICKINT(SYS_CTRL[1]) has to be disabled before entering to Power-down \u000d\u000amode, to avoid system tick interrupt may influence system not entering powerdown mode and keep operation.\u000d\u000aRegister/Instruction Mode SLEEPDEEP (SCR[2]) CPU Run WFI \u000d\u000aInstruction","Nuvoton Technology Corporation\u000d\u000a35\u000d\u000aNormal 0 NO\u000d\u000aIdle mode 0 YES\u000d\u000aPower-down mode 1 YES\u000d\u000aThere are several wake-up sources in Idle mode and Power-down mode. The table \u000d\u000abelow lists the available clocks for each power mode.\u000d\u000aPower \u000d\u000aMode\u000d\u000aNormal \u000d\u000aMode\u000d\u000aIdle Mode Power-Down Mode\u000d\u000aDefinition CPU is \u000d\u000ain active \u000d\u000astate\u000d\u000aCPU is in \u000d\u000asleep state\u000d\u000a1. CPU is in sleep state\u000d\u000a2. All clocks stop except LXT and \u000d\u000aLIRC.\u000d\u000a3. MIRC and HIRC stop control by \u000d\u000aAOCKPDEN \u000d\u000a(PMC_PWRCTL[8]).\u000d\u000a4. Regulator output drop, control by \u000d\u000aVDROPEN(PMC_PWRCTL[10].\u000d\u000a5. Power domain gating, control by \u000d\u000aDxPGEN(PMC_PWRCTL[3:0]\u000d\u000aEntry \u000d\u000aCondition\u000d\u000aChip is \u000d\u000ain \u000d\u000anormal \u000d\u000amode \u000d\u000aafter \u000d\u000asystem \u000d\u000areset \u000d\u000areleased\u000d\u000aCPU \u000d\u000aexecutes \u000d\u000aWFI \u000d\u000ainstruction\u000d\u000aCPU sets sleep mode enable and \u000d\u000apower down enable and executes WFI \u000d\u000ainstruction.\u000d\u000aWake-up \u000d\u000aSources\u000d\u000aN/A All \u000d\u000ainterrupts\u000d\u000aACMP, AWF, BOD, CCAP, CLKD,","Nuvoton Technology Corporation\u000d\u000a36\u000d\u000aDMIC, EMAC, EINT, GPIO, GPA\u000d\u000aTrigger Wake-up pin, GPB Trigger\u000d\u000aWake-up pin, GPC Trigger Wake-up\u000d\u000apin, GPD Trigger Wake-up pin,\u000d\u000aHSOTG, HSUSBD, I\u00b2C, I3C, ICE,\u000d\u000aLPADC, LPI2C, LPPDMA, LPSPI,\u000d\u000aLPTMR, LPUART, LVR, OTG,\u000d\u000aPin0(PC.0) Wake-up pin, Pin1(PB.0)\u000d\u000aWake-up pin, Pin2(PB.2) Wake-up\u000d\u000apin, Pin3(PB.12) Wake-up pin,\u000d\u000aPin4(PF.6) Wake-up pin,\u000d\u000aPin5(PA.12) Wake-up pin, POR,\u000d\u000aRTC, SDH, Standby Timer, Timer,\u000d\u000aTick Timer, UART, USBD, USBH,\u000d\u000aUSCI, UTCPD and WDT.\u000d\u000aAvailable \u000d\u000aClocks\u000d\u000aAll All except \u000d\u000aCPU clock\u000d\u000aHIRC, MIRC, LXT and LIRC\u000d\u000aAfter \u000d\u000aWake-up\u000d\u000aN/A CPU back \u000d\u000ato normal \u000d\u000amode\u000d\u000aCPU back to normal mode","Nuvoton Technology Corporation\u000d\u000a37\u000d\u000aPower Down and Wake-up Process\u000d\u000aFigure below shows the system enters idle mode process. If the CPU executes the \u000d\u000aWFI/WFE instruction at t0, and CPU clock will stop at t1, and CPU operations \u000d\u000awill be temporarily stopped during t1 to t2. At t2, the device generates interrupt \u000d\u000aevent to CPU, and CPU starts exiting sleep mode at this moment. The CPU will \u000d\u000acompletely exit sleep mode and resume clock at t3, and CPU will execute interrupt \u000d\u000ahandler at t3. It should be noted that if the interrupt flag is not cleared, the CPU \u000d\u000awill enter the interrupt handler again. The CPU will execute main function \u000d\u000ainstructions after interrupt flag is cleared at t4.\u000d\u000aFigure below shows the system enters Power-down mode process. If the CPU \u000d\u000aexecutes the WFI/WFE instruction at t0, and CPU clock will stop at t1, and CPU \u000d\u000aoperations will be temporarily stopped at t1 until wake-up, At t2, SCLK, ACLK, \u000d\u000aHCLKx and PCLKx clock will be stopped. If auto operating event is triggered in \u000d\u000aPower-down mode, then SCLK, HCLK2, PCLK4 will be enabled until auto \u000d\u000aoperating is finished.","Nuvoton Technology Corporation\u000d\u000a38\u000d\u000aFigure below shows the system exits Power-down mode process when CPU clock \u000d\u000ais not stopped. If CPU clock hasn\u2019t been turned off then wake-up event is not \u000d\u000anecessary for system wake-up. Some device only has the ability to generates \u000d\u000ainterrupt, but does not have the ability to generates wake-up event. If the device \u000d\u000agenerates an interrupt event at t1 in the interval from t0 to t2, then system will be \u000d\u000awoken up. The CPU will completely exit sleep at t2, and CPU will execute \u000d\u000ainterrupt handler at t2. The CPU will execute main function instructions after \u000d\u000ainterrupt flag is cleared at t3. In the case of wake-up before fully Power-down \u000d\u000amode, then PDWKIF(PMC_INTSTS[0]) is not asserted.","Nuvoton Technology Corporation\u000d\u000a39\u000d\u000aFigure below shows the system exits Power-down mode process when CPU clock \u000d\u000ais stopped. The CPU executes the WFI/WFE instruction at t0, and CPU clock will \u000d\u000astop at t1, and SCLK clock will stop at t2. If CPU clock has been turned off then \u000d\u000awake-up event is necessary for system wake-up. If the device generates an \u000d\u000ainterrupt and wake-up event at t3 after t2, then system will be woken up. The CPU \u000d\u000awill completely exit sleep at t4, and CPU will execute interrupt handler at t4. The \u000d\u000aCPU will execute main function instructions after interrupt flag is cleared at t5. In \u000d\u000athe case of wake-up after fully Power-down mode, then \u000d\u000aPDWKIF(PMC_INTSTS[0]) is asserted.","Nuvoton Technology Corporation\u000d\u000a40\u000d\u000aSystem Power Distribution\u000d\u000aIn this chip, power distribution is divided into four segments:\u000d\u000a\u2022 Analog power from AVDD and AVSS provides the power for analog \u000d\u000acomponents operation.\u000d\u000a\u2022 Digital power form VDD and VSS supplies the power to the internal \u000d\u000aregulator which provides a fixed 0.7V, 1.1V or 1.15V power for digital \u000d\u000aoperation and I/O pins.\u000d\u000a\u2022 USB transceiver power from VDD offers the power for operating the \u000d\u000aUSB transceiver.\u000d\u000a\u2022 RTC power from VBAT provides the power for RTC and 80 bytes \u000d\u000abackup registers.\u000d\u000aThe outputs of internal voltage regulators, LDO and VDD, require an external \u000d\u000acapacitor which should be located close to the corresponding pin. Analog power \u000d\u000a(AVDD) should be the same voltage level of the digital power (VDD). The \u000d\u000ainternal voltage regulator can be set to LDO converter mode. Figure 6.3-6 shows\u000d\u000athe power distribution.","Nuvoton Technology Corporation\u000d\u000a41\u000d\u000aDigital Power Domain Distribution\u000d\u000aIn this chip, digital power is divided into six domains:\u000d\u000a\u2022 Performance Domain (D0) for CPU, NPU and very high-speed \u000d\u000aperipheral device.\u000d\u000a\u2022 Base Domain (D1) for high-speed peripheral device.\u000d\u000a\u2022 Low Power Domain (D2) for low-speed peripheral device which support \u000d\u000aauto operating mode.\u000d\u000a\u2022 Standby Power Domain (D3) for power management controller and some \u000d\u000awake-up source such as standby ACMP, GPA trigger pin, GPB trigger \u000d\u000apin, GPC trigger pin and GPD trigger pin.\u000d\u000a\u2022 High Voltage Power Domain (D4) for high voltage logic and some wakeup source such as PIN0~PIN5 and Standby Timer.\u000d\u000a\u2022 RTC Power Domain (D5) for real timer controller logic and that wakeup source.","Nuvoton Technology Corporation\u000d\u000a42\u000d\u000aPower-down mode Configuration\u000d\u000aIn this chip, the feature of Power-down mode can configured by PMC_PWRCTL, \u000d\u000aUsers can freely make settings according to the application situation, Following \u000d\u000aare traditional Power-down modes as examples:\u000d\u000a\u2022 Normal Power-down mode 0 (NPD0) is used for fast wake-up needs, in \u000d\u000athis power-down mode the analog circuits are in active mode and only \u000d\u000athe high-speed clock sources are disabled.\u000d\u000a\u2022 Normal Power-down mode 1 (NPD1) is used light power saving needs, \u000d\u000ain this power-down mode the analog circuits are in low power mode and \u000d\u000athe high-speed clock sources are disabled.\u000d\u000a\u2022 Normal Power-down mode 2 (NPD2) is used moderate power saving \u000d\u000aneeds, in this power-down mode the analog circuits are in low power \u000d\u000amode, the high-speed clock sources are disabled and regulator output \u000d\u000adrop to low voltage.\u000d\u000a\u2022 Normal Power-down mode 3 (NPD3) is used light power saving needs \u000d\u000aand not use peripherals in D0~D1, in this power-down mode the analog \u000d\u000acircuits are in low power mode, the high-speed clock sources are disabled \u000d\u000aand the power domain D0~D1 are power off.\u000d\u000a\u2022 Normal Power-down mode 4 (NPD4) is used moderate power saving \u000d\u000aneeds and not use peripherals in D0~D1, in this power-down mode the \u000d\u000aanalog circuits are in low power mode, the high-speed clock sources are \u000d\u000adisabled, regulator output drop to low voltage and the power domain D0 \u000d\u000a~ D1 are power off.\u000d\u000a\u2022 Standby Power-down mode 0 (SPD0) is used heavy power saving needs \u000d\u000aand not use peripherals in D0~D2, in this power-down mode the analog \u000d\u000acircuits are in low power mode, the high-speed clock sources are disabled \u000d\u000aand the power domain D0 ~ D2 are power off.\u000d\u000a\u2022 Standby Power-down mode 1 (SPD1) is used heavy power saving needs \u000d\u000aand not use peripherals in D0~D2, in this power-down mode the analog \u000d\u000acircuits are in low power mode, the high-speed clock sources are \u000d\u000adisabled, regulator output drop to low voltage and the power domain D0 \u000d\u000a~ D2 are power off.\u000d\u000a\u2022 Deep Power-down mode (DPD) is used very heavy power saving needs \u000d\u000aand not use peripherals in D0~D3 in this power-down mode the analog \u000d\u000acircuits are in low power mode, the high-speed clock sources are disabled \u000d\u000aand the power domain D0~D3 are power off.","Nuvoton Technology Corporation\u000d\u000a43\u000d\u000aEach power mode has different setting for PMC_PWRCTL. The table below show \u000d\u000athe setting for each Power-down mode.\u000d\u000aPD Mode NPD0 NPD1 NPD2 NPD3 NPD4 SPD0 SPD1 DPD\u000d\u000aVcore 1.1\u000d\u000a-\u000d\u000a1.15v\u000d\u000a1.1\u000d\u000a-\u000d\u000a1.15v\u000d\u000a0.7v 1.1\u000d\u000a-\u000d\u000a1.15v\u000d\u000a0.7v 1.1\u000d\u000a-\u000d\u000a1.15v\u000d\u000a0.7v X\u000d\u000aRegisters\u000d\u000aD0PGEN 0 0 0 1 1 1 1 1\u000d\u000aD1PGEN 0 0 0 1 1 1 1 1\u000d\u000aD2PGEN 0 0 0 0 0 1 1 1\u000d\u000aD3PGEN 0 0 0 0 0 0 0 1\u000d\u000aVDROPEN 0 0 1 0 1 0 1 0\u000d\u000aFWEN 1 0 0 0 0 0 0 1\u000d\u000aPRSTDBEN 1 1 0 1 0 0 0 0","Nuvoton Technology Corporation\u000d\u000a44\u000d\u000aSystem Manager\u000d\u000aOverview\u000d\u000aSystem management includes the following sections:\u000d\u000a\u2022 System Reset\u000d\u000a\u2022 System Power Distribution\u000d\u000a\u2022 SRAM Memory Organization\u000d\u000a\u2022 System Timer (SysTick)\u000d\u000a\u2022 Nested Vectored Interrupt Controller (NVIC)\u000d\u000a\u2022 System Control Register\u000d\u000aReset\u000d\u000aThe system reset can be issued by one of the events listed below. These reset event \u000d\u000aflags can be read from SYS_RSTSTS register to determine the reset source. \u000d\u000aHardware reset source are from peripheral signals. Software reset can trigger reset \u000d\u000athrough setting control registers.\u000d\u000a\u2022 Hardware Reset Sources\u000d\u000a- Power-on Reset (POR)\u000d\u000a- Low level on the nRESET pin\u000d\u000a- Watchdog Time-out Reset and Window Watchdog Reset \u000d\u000a(WDT/WWDT Reset)\u000d\u000a- Low Voltage Reset (LVR)\u000d\u000a- Brown-out Detector Reset (BOD Reset)\u000d\u000a- CPU Lockup Reset\u000d\u000a\u2022 Software Reset Sources\u000d\u000a- CHIP Reset will reset whole chip by writing 1 to CHIPRST \u000d\u000a(SYS_RSTCTL[0])\u000d\u000a- System Reset to reboot but keeping the booting setting from \u000d\u000aAPROM or LDROM by writing 1 to SYSRESETREQ \u000d\u000a(AIRCR[2])\u000d\u000a- CPU Reset for Cortex-M55 core only by writing 1 to CPURST \u000d\u000a(SYS_RSTCTL[7])","Nuvoton Technology Corporation\u000d\u000a45\u000d\u000aBus Matrix\u000d\u000aThis chip uses Advanced Microcontroller Bus Architecture (AMBA) protocol to \u000d\u000aimplement system bus., The D0 Domain has two system bus, AXI and AHBP. \u000d\u000aThe D1 Domain has a system bus, which is AHB0. The D2 Domain has a system \u000d\u000abus, which is AHB2.","Nuvoton Technology Corporation\u000d\u000a46\u000d\u000aImplementation Defined Attribution Unit (IDAU)\u000d\u000aThe Armv8-M has the new feature called TrustZone, which adds an additional \u000d\u000asecurity state to allow full isolation of two security levels. The processor security \u000d\u000astate is decided by the memory definition. For example, processor is in Secure \u000d\u000astate when the code is executed in the Secure region. The memory map security \u000d\u000astate will be defined by the combination of:\u000d\u000a\u2022 Internal Security Attribution Unit (SAU)\u000d\u000a\u2022 Implementation Defined Attribution Unit (IDAU)\u000d\u000aThese attribution units define the memory space into four type regions:\u000d\u000a\u2022 Secure Region: contains Secure program code or data\u000d\u000a\u2022 Non-secure Callable Region (NSC): contains entry functions for Nonsecure programs to access Secure functions\u000d\u000a\u2022 Non-secure Region: contains Non-secure program code or data\u000d\u000a\u2022 Exempt Region: exempt region will be exempted from security check","Nuvoton Technology Corporation\u000d\u000a47\u000d\u000aEach memory region defined by the SAU and IDAU has a region number \u000d\u000agenerated by the SAU or by the IDAU. Region number is used for determining a \u000d\u000agroup of memory share the same security attribute. Overlapping region numbers \u000d\u000aare not allow. For testing security attributes and region numbers, a new instruction \u000d\u000a\u201cTT\u201d (Test Target) is introduced. By using a TT instruction on the start and end\u000d\u000aaddresses of the memory range, and identifying that both reside in the same region \u000d\u000anumber, user can determine that the memory range is located entirely in same \u000d\u000aspace. To be more specific, please refer to the Armv8-M Architecture Reference \u000d\u000aManual. The IDAU memory map attributions and corresponding region numbers\u000d\u000aare shown in Figure 6.4-10. The address from 0xE000_0000 to 0xFFFF_FFFF is \u000d\u000amarked as exempt regions because the behavior of the address is fixed, so their \u000d\u000asecurity attributes do not control by the SAU or IDAU.","Nuvoton Technology Corporation\u000d\u000a48\u000d\u000aSRAM Memory Organization\u000d\u000aThis chip supports embedded SRAM with a total of 1344 Kbytes size and one 8K \u000d\u000aSRAM in low power domain. The SRAM organization is separated into six \u000d\u000asections: SRAM0, SRAM1, SRAM2, TCM (tighly couple memory), SRAM3 and \u000d\u000aLPSRAM. The two in front SRAM have 1024 Kbytes address space, the 3rd \u000d\u000aSRAM has 320Kbyte address space. The 3 SRAM macro lcate in AXI bus \u000d\u000ainterface. The TCM directly connect from M55 TCM Interfaces. The SRAM3 has \u000d\u000a8Kbyte address space and it is located in 32-Bit 200 MHz AHB bus and LPSRAM \u000d\u000ahas 8Kbyte address space and it is located in 32-Bit 100M AHB bus.\u000d\u000a\u2022 Supports total 1344 Kbytes SRAM and 8K SRAM in Low power domain\u000d\u000a\u2022 Supports byte / half word / word write/ doble word access\u000d\u000a\u2022 Support 64 Kbytes parity error functon in region 0\u000d\u000aAuto Trim\u000d\u000aThis chip supports auto-trim function: the HIRC trim (12 MHz RC oscillator), \u000d\u000aHIRC trim (48 MHz RC oscillator) and MIRC trim (1 MHz RC oscillator) \u000d\u000aaccording to the accurate LXT (32.768 kHz crystal oscillator) or internal USB ","Nuvoton Technology Corporation\u000d\u000a49\u000d\u000asynchronous mode, automatically gets accurate HIRC output frequency, 0.25% \u000d\u000a/0.5% /0.75% /1% selected by ACCURSEL (SYS_TCTL48M[3:2]/ \u000d\u000aSYS_TCTL12M[3:2]/SYS_TCTLMIRC[3:2]) deviation within all temperature \u000d\u000aranges.\u000d\u000aFor some application needs an accurate 12 MHz clock. In such case, if neither \u000d\u000ausing PLL as the system clock source nor soldering 32.768 kHz crystal in system, \u000d\u000auser has to set REFCKSEL (SYS_TCTL12M[10] reference clock selection) to \u201c1\u000d\u000a\u201d, set FREQSEL (SYS_TCTL12M[1:0] trim frequency selection) to \u201c01\u201d, and the \u000d\u000aauto-trim function will be enabled. Interrupt status bit FREQLOCK\u000d\u000a(SYS_TISTS12M[0] HIRC frequency lock status) \u201c1\u201d indicates the HIRC output \u000d\u000afrequency is accurate within the deviation ACCURSEL(SYS_TCTL12M[3:2]) \u000d\u000aset.\u000d\u000aFor some application needs an accurate 48 MHz clock. In such case, if neither \u000d\u000ausing PLL as the system clock source nor soldering 32.768 kHz crystal in system, \u000d\u000auser has to set REFCKSEL (SYS_TCTL48M[10] reference clock selection) to \u201c1\u000d\u000a\u201d, set FREQSEL (SYS_TCTL48M[1:0] trim frequency selection) to \u201c10\u201d, and the \u000d\u000aauto-trim function will be enabled. Interrupt status bit FREQLOCK\u000d\u000a(SYS_TISTS[0] HIRC frequency lock status) \u201c1\u201d indicates the HIRC output \u000d\u000afrequency is accurate within the deviation ACCURSEL(SYS_TCTL48M[3:2]) \u000d\u000aset.\u000d\u000aFor some application needs an accurate 1 MHz clock. In such case, if neither using \u000d\u000aPLL as the system clock source nor soldering 32.768 kHz crystal in system, user \u000d\u000ahas to set REFCKSEL (SYS_TCTLMIRC[10] reference clock selection) to \u201c1\u201d, \u000d\u000aset FREQSEL (SYS_TCTLMIRC[1:0] trim frequency selection) to \u201c10\u201d, and the \u000d\u000aauto-trim function will be enabled. Interrupt status bit FREQLOCK\u000d\u000a(SYS_TISTSMIRC[0] HIRC frequency lock status) \u201c1\u201d indicates the HIRC output \u000d\u000afrequency is accurate within the deviation ACCURSEL(SYS_TCTLMIRC[3:2]) \u000d\u000aset.\u000d\u000aRC trim can only work properly when the clock sources are stable. When the RC \u000d\u000aclock or the reference clock are not stable or the system go into power down, RC \u000d\u000atrim will not be enable.","Nuvoton Technology Corporation\u000d\u000a50\u000d\u000aRegister Lock Control\u000d\u000aSome of the system control registers need to be protected to avoid inadvertent \u000d\u000awrite and disturb the chip operation. These write-protected system control \u000d\u000aregisters, as listed in Table 6.4-5, have write protection after the power-on reset \u000d\u000atill user disables register protection.\u000d\u000aBefore writing to these protected registers, user has to unlock the write-protected \u000d\u000amechanism by writing a register protection disable sequence to the REGLCTL \u000d\u000aregister. The register protection disable sequence is writing the data \u201c59h\u201d, \u201c16h\u201d\u000d\u000a\u201c88h\u201d sequentially. Any different data value, different sequence or any other write \u000d\u000ato other address during these three data writing will abort the whole sequence.\u000d\u000aOnce a register protection disable sequence is writing to the REGLCTL register \u000d\u000asuccessfully, These write-protected registers will be unlocked and able to accept \u000d\u000awrite access. It\u2019s recommended to locked these registers by writing any value to \u000d\u000aREGLCTL register.","Nuvoton Technology Corporation\u000d\u000a51\u000d\u000aClock Controller\u000d\u000aOverview\u000d\u000aThe clock controller generates clocks for the whole chip, including system clocks \u000d\u000aand all peripheral clocks. The clock controller also implements the power control \u000d\u000afunction with the individually clock ON/OFF control, clock source selection and \u000d\u000aa clock divider. The chip will not enter Power-down mode until CPU sets the \u000d\u000aPower-down enable bit PDEN(PMC_PWRCTL[8]) and Cortex-M55 core \u000d\u000aexecutes the WFI instruction. After that, chip enters Power-down mode and wait \u000d\u000afor wake-up interrupt source triggered to leave Power-down mode. In Powerdown mode, the clock controller turns off the 4~32 MHz external high speed \u000d\u000acrystal (HXT), 48 MHz internal high speed RC oscillator (HIRC48M), 12 MHz \u000d\u000ainternal high speed RC oscillator (HIRC) and APLL to reduce the overall system \u000d\u000apower consumption. Figure below shows the clock generator and the overview of \u000d\u000athe clock source control.","Nuvoton Technology Corporation\u000d\u000a52\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a53\u000d\u000aSecurity Configuration Unit (SCU)\u000d\u000aOverview\u000d\u000aSecurity configuration unit is designed for Arm\u00ae TrustZone\u00ae, and used to \u000d\u000aconfigure the security and privilege attribution of GPIO and all other peripherals. \u000d\u000aSCU also collects slaves\u2019 security violation response and generates SCU interrupt. \u000d\u000aSCU is also equipped with a timer to monitor the duration of the core processor \u000d\u000ain non-secure state.\u000d\u000aSCU includes some security features like FVC, DPM and PLM, helping user to \u000d\u000asetup a secure executing environment more easily.\u000d\u000aFeatures\u000d\u000a\u2022 Configures SRAM\u2019s security attribution block by block\u000d\u000a\u2022 Configures GPIOs\u2019 security attribution port by port and EINT\u2019s security \u000d\u000aattribution separately\u000d\u000a\u2022 Configures peripherals\u2019 security and privilege attribution\u000d\u000a\u2022 Generates security interrupt\u000d\u000a\u2022 Equipped with a 24-bit timer as a non-secure state monitor\u000d\u000a\u2022 Monotonic firmware version counter\u000d\u000a\u2022 Debug protection mechanism\u000d\u000a\u2022 Product life-cycle management","Nuvoton Technology Corporation\u000d\u000a54\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a55\u000d\u000aTrue Random Number Generator (TRNG)\u000d\u000aOverview\u000d\u000aThis is a True Random Number Generator (TRNG) consists of an entropy source \u000d\u000afrom analog macro and a CTR_DRBG. It can generate true random number by \u000d\u000aanalog macro. There is a calibration mechanism of internal TRNG for randomness \u000d\u000aof generating true random number. Besides, there is a CTR_DRBG design in this \u000d\u000aTRNG for the DRBG (deterministic random bit generator) of SP800-90A and the \u000d\u000aNRBG (non-deterministic random bit generator) of SP800-90C.\u000d\u000aFeatures\u000d\u000a\u2022 Up to 10Mbit/s data rate for entropy source\u000d\u000a\u2022 Pass NIST SP800-22A standard\u000d\u000a\u2022 Include NIST SP800-90A known answer test for DRBG and NIST \u000d\u000aSP800-90B health test for entropy source (Start-up test, Repetition count \u000d\u000atest, Adaptive proportion test).\u000d\u000a\u2022 Provides the true random number seed for PRNG","Nuvoton Technology Corporation\u000d\u000a56\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a57\u000d\u000aFlash Memory Controller (FMC)\u000d\u000aOverview\u000d\u000aThe FMC is equipped with dual-bank on-chip embedded Flash (BANK0 and \u000d\u000aBANK1) for application. Both BANK0 and BANK1 have 512/1024 Kbytes space. \u000d\u000aThus, the total size of application ROM (APROM) is 1024/2048 Kbytes. A User \u000d\u000aConfiguration block provides for system initiation in BANK0. A 8 Kbytes loader \u000d\u000aROM (LDROM) is used for In-System-Programming (ISP) function in BANK0. \u000d\u000aA 3Kbytes one-time-program ROM (OTP) is used for recording one-timeprogram data in BANK1. A 24Kbytes Secure Bootloader is used to check boot \u000d\u000acode integrity and authenticity, and consists of native ISP functions. This chip also \u000d\u000asupports In-Application-Programming (IAP) function. User switches the code \u000d\u000aexecuting without chip reset after the embedded Flash is updated.\u000d\u000aFeatures\u000d\u000a\u2022 Supports dual-bank Flash macro for safe firmware upgrade\u000d\u000a\u2022 Supports dual-bank remapping\u000d\u000a\u2022 Supports 1024/2048 Kbytes application ROM (APROM)\u000d\u000a\u2022 Supports 8 Kbytes loader ROM (LDROM)\u000d\u000a\u2022 Supports 4 XOM (Execution Only Memory) regions to conceal user \u000d\u000aprogram in APROM.\u000d\u000a\u2022 Supports 52 bytes User Configuration block to control system initiation\u000d\u000a\u2022 Supports 3 Kbytes one-time-program ROM (OTP)\u000d\u000a\u2022 Supports 8 Kbytes page erase for all embedded Flash\u000d\u000a\u2022 Supports bank erase for APROM, except if XOM regions is set.\u000d\u000a\u2022 Supports two level locks for protecting secure region and non-sec region.\u000d\u000a\u2022 Supports Secure Bootloader with native In-System-Programming (ISP) \u000d\u000afunctions\u000d\u000a\u2022 Supports Secure Boot function for check boot code integrity and \u000d\u000aauthenticity\u000d\u000a\u2022 Supports 32-bit/64-bit and multi-word Flash programming function\u000d\u000a\u2022 Supports CRC32 checksum calculation function\u000d\u000a\u2022 Supports Flash all one verification function\u000d\u000a\u2022 Supports In-System-Programming (ISP) / In-Application-Programming \u000d\u000a(IAP) to update embedded Flash memory","Nuvoton Technology Corporation\u000d\u000a58\u000d\u000a\u2022 Supports Non-Secure In-System-Programming (NS ISP) to update \u000d\u000aembedded Non-Secure Flash memory\u000d\u000aBlock Diagram\u000d\u000aThe Flash memory controller (FMC) consists of AHB slave interface, boot loader, \u000d\u000aFlash control registers, Flash initialization controller, Flash operation control and \u000d\u000aembedded Flash memory. The block diagram of Flash memory controller is shown \u000d\u000ain below Figure.","Nuvoton Technology Corporation\u000d\u000a59","Nuvoton Technology Corporation\u000d\u000a60\u000d\u000aExternal Bus Interface (EBI)\u000d\u000aOverview\u000d\u000aThis chip is equipped with an external bus interface (EBI) for external device use. \u000d\u000aTo save the connections between an external device and a chip, EBI is operating \u000d\u000aat address bus and data bus multiplex mode. The EBI supports three chip selects \u000d\u000athat can connect three external devices with different timing setting requirements.\u000d\u000aFeatures\u000d\u000a\u2022 Supports up to three memory banks\u000d\u000a\u2022 Supports dedicated external chip select pin with polarity control for each \u000d\u000abank\u000d\u000a\u2022 Supports accessible space up to 1 Mbytes for each bank, actually external \u000d\u000aaddressable space is dependent on package pin out\u000d\u000a\u2022 Supports 8-/16-bit data width\u000d\u000a\u2022 Supports byte write in 16-bit data width mode\u000d\u000a\u2022 Supports address bus and data bus multiplex mode\u000d\u000a\u2022 Supports address bus and data bus separate mode\u000d\u000a\u2022 Supports Timing parameters individual adjustment for each memory \u000d\u000ablock\u000d\u000a\u2022 Supports LCD interface i80 mode\u000d\u000a\u2022 Supports PDMA mode\u000d\u000a\u2022 Supports variable external bus base clock (MCLK) which based on \u000d\u000aHCLK\u000d\u000a\u2022 Supports configurable idle cycle for different access condition: Idle of \u000d\u000aWrite command finish (W2X) and Idle of Read-to-Read (R2R)","Nuvoton Technology Corporation\u000d\u000a61\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a62\u000d\u000aGeneral Purpose I/O (GPIO)\u000d\u000aOverview\u000d\u000aThis chip has up to 143 General Purpose I/O pins to be shared with other function \u000d\u000apins depending on the chip configuration. These 143 pins are arranged in 10 ports \u000d\u000anamed as PA, PB, PC, PD, PE, PF, PG, PH, PI and PJ. PA, PB, PE and PH has 16 \u000d\u000apins on port. PD has 15 pins on port. PC, PG and PJ has 14 pins on port. PF has \u000d\u000a12 pins on port. PI has 10 pins on port. Each of the 143 pins is independent and\u000d\u000ahas the corresponding register bits to control the pin mode function and data.\u000d\u000aThe I/O type of each of I/O pins can be configured by software individually as \u000d\u000aInput, Push-pull output, Open-drain output or Quasi-bidirectional mode.\u000d\u000aFeatures\u000d\u000a\u2022 Four I/O modes:\u000d\u000a- Quasi-bidirectional mode\u000d\u000a- Push-Pull Output mode\u000d\u000a- Open-Drain Output mode\u000d\u000a- Input only with high impendence mode\u000d\u000a\u2022 TTL/Schmitt trigger input selectable\u000d\u000a\u2022 I/O pin can be configured as interrupt source with edge/level setting\u000d\u000a\u2022 Supports High Drive and High Slew Rate I/O mode\u000d\u000a\u2022 Supports independent pull-up and pull-down control\u000d\u000a\u2022 Enabling the pin interrupt function will also enable the wake-up function\u000d\u000a\u2022 Supports EINT0~7 edge detect and trigger function","Nuvoton Technology Corporation\u000d\u000a63\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a64\u000d\u000aLow Power General Purpose I/O (LPGPIO)\u000d\u000aOverview\u000d\u000aThis chip has up to 8 Low Power General Purpose I/O pins to be shared with other \u000d\u000afunction pins depending on the chip configuration. These 8 pins are named as \u000d\u000aLPIO0, LPIO1, LPIO2, LPIO3, LPIO4, LPIO5, LPIO6 and LPIO7. Each of the 8 \u000d\u000apins is independent and has the corresponding register bits to control the pin \u000d\u000afunction and data. These 8 pins also support output data set/reset registers to allow\u000d\u000aindividual set/reset bitwise control.\u000d\u000aFeatures\u000d\u000a\u2022 Support function operating in NPD0/1/3\u000d\u000a\u2022 Two I/O modes:\u000d\u000a- Push-Pull Output mode\u000d\u000a- Input only with high impendence mode\u000d\u000a\u2022 Support pin output data individual bit set/reset\u000d\u000a\u2022 Support auto operation\u000d\u000aLPGPIO Features LPGPIO GPIO\u000d\u000aSupport function operating in NPD0/1/3 \u2713 -\u000d\u000aSuppot I/O modes: Quasi-bidirectional mode - \u2713\u000d\u000aSuppot I/O modes: Push-Pull Output mode\u000d\u000aSuppot I/O modes: Open-Drain Output mode - \u2713\u000d\u000aSuppot I/O modes: Input only with high impendence mode \u2713 \u2713\u000d\u000aSupport pin output data individual bit set/reset \u2713 -\u000d\u000aAuto-operation Mode \u2713 -","Nuvoton Technology Corporation\u000d\u000a65\u000d\u000aI/O pin can be configured as interrupt source with edge/level\u000d\u000aSetting\u000d\u000a- \u2713\u000d\u000aSupport High Drive and High Slew Rate I/O mode - \u2713\u000d\u000aSupport independent pull-up and pull-down control - \u2713\u000d\u000aEnabling the pin interrupt function will also enable the wake-up\u000d\u000afunction\u000d\u000a- \u2713","Nuvoton Technology Corporation\u000d\u000a66\u000d\u000aGraphic Direct Memory Access Controller (GDMA)\u000d\u000aOverview\u000d\u000aThe GDMA is a Direct Memory Access Controller (DMAC) with AMBA\u00ae AXI5 \u000d\u000ainterfaces and it is equipped with Arm DMA-350 specification that provides fast \u000d\u000amemory to memory. The processor in the system can control the DMA channel \u000d\u000abehavior over an APB4 interface.\u000d\u000aThe GDMA has configurations for different types of copy, scatter-gather, \u000d\u000aincrement, or two-dimensional image copy operations. It also supports command \u000d\u000asequencing capabilities.\u000d\u000aThe GDMA can have several channels which can have different properties, like \u000d\u000aFIFO size (16 depth FIFO) , to suit different requirements. Several GDMA \u000d\u000acommands can be combined with the command linking feature. Using the \u000d\u000acommand linking feature, a complex transfer can be set up and the GDMA can \u000d\u000aperform without the need for interaction with the processor.\u000d\u000aFeatures\u000d\u000a\u2022 Programmable APB4 configuration registers\u000d\u000a\u2022 2 parallel DMA channels each with 16 depth FIFO\u000d\u000a\u2022 1D memory copy including increments\u000d\u000a\u2022 Interrupt capability for each channel and global events\u000d\u000a\u2022 Flexible command linking capability\u000d\u000a\u2022 Extended memory copy capabilities: 2D/wrap/template (support in \u000d\u000aChannel 0)\u000d\u000a\u2022 AXI5 address width 32-bit\u000d\u000a\u2022 AXI5 data width of 64-bit\u000d\u000a\u2022 Number of DMA channels 2\u000d\u000a\u2022 Presence of Security Extension for TrustZone support","Nuvoton Technology Corporation\u000d\u000a67\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a68\u000d\u000aPDMA Controller (PDMA)\u000d\u000aOverview\u000d\u000aThe peripheral direct memory access (PDMA) controller is used to provide highspeed data transfer. The PDMA controller can transfer data from one address to \u000d\u000aanother without CPU intervention. This has the benefit of reducing the workload \u000d\u000aof CPU and keeps CPU resources free for other applications. PDMA controller \u000d\u000ahas a total of 16 channels and each channel can perform transfer between memory \u000d\u000aand peripherals or between memory and memory.\u000d\u000aFeatures\u000d\u000a\u2022 Supports 16 independently configurable channels\u000d\u000a\u2022 Supports selectable 2 level of priority (fixed priority or round-robin \u000d\u000apriority)\u000d\u000a\u2022 Supports transfer data width of 8, 16, and 32 bits\u000d\u000a\u2022 Supports source and destination address increment size can be byte, halfword, word or no increment\u000d\u000a\u2022 Supports software and UART, USCI, SPI, QSPI, ACMP,PWM, EINT, \u000d\u000aEPWM, I2C, I2S, I3C, Timer, , PSIO, EADC, and DAC request\u000d\u000a\u2022 Supports Scatter-gather mode to perform sophisticated transfer through \u000d\u000athe use of the descriptor link list table\u000d\u000a\u2022 Supports single and burst transfer type\u000d\u000a\u2022 Supports 16 time-out function channels","Nuvoton Technology Corporation\u000d\u000a69\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a70\u000d\u000aLow Power Peripheral Direct Memory Access Controller (LPPDMA)\u000d\u000aOverview\u000d\u000aThe low power peripheral direct memory access (LPPDMA) controller is used to \u000d\u000aprovide high-speed data transfer. The LPPDMA controller can transfer data from \u000d\u000aone address to another without CPU intervention. This has the benefit of reducing \u000d\u000athe workload of CPU and keeps CPU resources free for other applications. \u000d\u000aLPPDMA controller has a total of 4 channels and each channel can perform \u000d\u000atransfer between memory and peripherals or between memory and memory.\u000d\u000aFeatures\u000d\u000a\u2022 Supports 4 independently configurable channels\u000d\u000a\u2022 Supports selectable 2 level of priority (fixed priority or round-robin \u000d\u000apriority)\u000d\u000a\u2022 Supports transfer data width of 8, 16, and 32 bits\u000d\u000a\u2022 Supports source and destination address increment size can be byte, halfword, word or no increment\u000d\u000a\u2022 Supports software and LPUART, LPSPI, LPI2C, LPTMR, TTMR, \u000d\u000aDMIC and LPADC request\u000d\u000a\u2022 Supports Scatter-gather mode to perform sophisticated transfer through \u000d\u000athe use of the descriptor link list table\u000d\u000a\u2022 Supports single and burst transfer type","Nuvoton Technology Corporation\u000d\u000a71\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a72\u000d\u000aTimer Controller (TMR)\u000d\u000aOverview\u000d\u000aThe timer controller includes four 32-bit timers, Timer0 ~ Timer3, allowing user \u000d\u000ato easily implement a timer control for applications. The timer can perform \u000d\u000afunctions, such as frequency measurement, delay timing, clock generation, and \u000d\u000aevent counting by external input pins, and interval measurement by external \u000d\u000acapture pins.\u000d\u000aThe timer controller also provides four PWM generators. Each PWM generator \u000d\u000asupports two PWM output channels in independent mode and complementary \u000d\u000amode. The output state of PWM output pin can be control by pin mask, polarity \u000d\u000aand break control, and dead-time generator.\u000d\u000aFeatures\u000d\u000a\u2022 Four sets of 32-bit timers, each timer having one 24-bit up counter and \u000d\u000aone 8-bit prescale counter\u000d\u000a\u2022 Independent clock source for each timer\u000d\u000a\u2022 Provides one-shot, periodic, toggle-output and continuous counting \u000d\u000aoperation modes\u000d\u000a\u2022 24-bit up counter value is readable through CNT (TIMERx_CNT[23:0])\u000d\u000a\u2022 Supports event counting function\u000d\u000a\u2022 Supports 3-bit capture input noise filter\u000d\u000a\u2022 24-bit capture value is readable through CAPDAT \u000d\u000a(TIMERx_CAP[23:0])\u000d\u000a\u2022 Supports external capture pin event for interval measurement\u000d\u000a\u2022 Supports external capture pin event to reset 24-bit up counter\u000d\u000a\u2022 Supports chip wake-up from Idle/Power-down mode if a timer interrupt \u000d\u000asignal is generated\u000d\u000a\u2022 Support Timer0 ~ Timer3 time-out interrupt signal or capture interrupt \u000d\u000asignal to trigger EPWM, BPWM, EADC, DAC, EQEI and PDMA \u000d\u000afunction\u000d\u000a\u2022 Supports internal capture triggered while internal ACMP output signal \u000d\u000atransition\u000d\u000a\u2022 Supports internal clock (HIRC, LIRC) and external clock (HXT, LXT) \u000d\u000afor capture event","Nuvoton Technology Corporation\u000d\u000a73\u000d\u000a\u2022 Supports internal capture triggered source from ACMP0~3 output, HXT, \u000d\u000aHIRC, LIRC, and LXT\u000d\u000a\u2022 Supports Inter-Timer trigger mode\u000d\u000a\u2022 Supports event counting source from ACMP0~3_out or internal USB \u000d\u000aSOF signal\u000d\u000a\u2022 Supports over-capture flag\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a74\u000d\u000aLow Power Timer Controller (LPTMR)\u000d\u000aOverview\u000d\u000aThe low power timer controller includes two 32-bit timers, LPTMR0 ~ LPTMR1, \u000d\u000aallowing user to easily implement a timer control for applications. The low power \u000d\u000acan perform functions, such as frequency measurement, delay timing, clock \u000d\u000ageneration, and event counting by external input pins, and interval measurement \u000d\u000aby external capture pins.\u000d\u000aThe low power timer controller also provides two PWM generators. Each PWM \u000d\u000agenerator supports one PWM output and two selectable PWM output channels \u000d\u000a(LPTMRx or LPTMRx_EXT). The output state of PWM output pin can be control \u000d\u000aby polarity control, output enable control and output channel select.\u000d\u000aFeatures\u000d\u000a\u2022 Low Power Timer Function Features\u000d\u000a- Two sets of 32-bit timers, each timer having one 24-bit up \u000d\u000acounter and one 8-bit prescale counter\u000d\u000a- Independent clock source for each timer\u000d\u000a- Provides one-shot, periodic, toggle-output and continuous \u000d\u000acounting operation modes\u000d\u000a- 24-bit up counter value is readable through CNT \u000d\u000a(LPTMRx_CNT[23:0])\u000d\u000a- Support 3-bit capture input noise filter\u000d\u000a- Supports event counting function\u000d\u000a- 24-bit capture value is readable through CAPDAT \u000d\u000a(LPTMRx_CAP[23:0])\u000d\u000a- Supports external capture pin (LPTMRx_EXT) event for \u000d\u000ainterval measurement\u000d\u000a- Supports external capture pin (LPTMRx_EXT) event to reset \u000d\u000a24-bit up counter\u000d\u000a- Supports chip wake-up from Idle/Power-down mode if a timer \u000d\u000ainterrupt signal is generated\u000d\u000a- Supports time-out interrupt signal or capture interrupt signal to \u000d\u000atrigger LPADC0, , LPI2C0, LPSPI0, LPUART, , CCAP Motion \u000d\u000adetector, and LPPDMA function","Nuvoton Technology Corporation\u000d\u000a75\u000d\u000a- Supports internal capture triggered while internal ACMP output \u000d\u000asignal transition\u000d\u000a- Supports event counting source from ACMP0_out, \u000d\u000aACMP1_out, ACMP2_out or ACMP_3\u000d\u000a- Supports internal capture triggered source from ACMP0 output, \u000d\u000aACMP1 output, ACMP2 output and ACMP_3 output\u000d\u000a- Support over-capture flag\u000d\u000a\u2022 PWM Function Features\u000d\u000a- Supports PWM generator with two selectable output channels\u000d\u000a- Supports 16-bit PWM counter\u000d\u000a\u25aa Up count operation type\u000d\u000a\u25aa One-shot or auto-reload counter operation mode\u000d\u000a- Supports 8-bit prescale from 1 to 256\u000d\u000a- Supports 16-bit compare register and period register and double \u000d\u000abuffer for period register and compare register\u000d\u000a- Supports tri-state enable and polarity control for each PWM \u000d\u000aselectable output channels\u000d\u000a- Supports interrupt on the following events:\u000d\u000a\u25aa PWM period point, up-count compared point events\u000d\u000a- Supports wake-up when interrupt occurs when clock source is \u000d\u000aLXT or LIRC\u000d\u000a- Supports wake-up when interrupt occurs when clock source is \u000d\u000aLXT or LIRC\u000d\u000a- PWM can generate output in Power-down mode\u000d\u000a\u25aa Supports trigger LPADC, LPPDMA, and on the two\u000d\u000aevents PWM period point and up-count compared \u000d\u000apoint events\u000d\u000a- Supports PWM output accumulator event to trigger LPPDMA \u000d\u000atransfer and LPADC\u000d\u000a- Supports PWM output accumulator event to stop PWM \u000d\u000acounting\u000d\u000a- Supports automatic operation mode","Nuvoton Technology Corporation\u000d\u000a76\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a77\u000d\u000aTick Timer Controller (TTMR)\u000d\u000aOverview\u000d\u000aThe tick timer controller includes two 32-bit timers, TTMR0 ~ TTMR1, allowing \u000d\u000auser to easily implement a timer control for applications. The tick timer can \u000d\u000aperform functions, such as frequency measurement, delay timing, clock \u000d\u000ageneration.\u000d\u000aFeatures\u000d\u000a\u2022 Two sets of 32-bit timers, each timer having one 24-bit up counter and \u000d\u000aone 8-bit prescale counter\u000d\u000a\u2022 Independent clock source for each timer\u000d\u000a\u2022 Provides one-shot, periodic and continuous counting operation modes\u000d\u000a\u2022 24-bit up counter value is readable through CNT (TTMRx_CNT[23:0])\u000d\u000a\u2022 Supports chip wake-up from Idle/Power-down mode if a timer interrupt \u000d\u000asignal is generated\u000d\u000a\u2022 Supports time-out interrupt signal to trigger LPADC, LPI2C, LPSPI, \u000d\u000aLPUART, CCAP Motion detector and LPPDMA function","Nuvoton Technology Corporation\u000d\u000a78\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a79\u000d\u000aWatchdog Timer (WDT)\u000d\u000aOverview\u000d\u000aThe Watchdog Timer (WDT) is used to perform a system reset when system runs \u000d\u000ainto an unknown state. This prevents system from hanging for an infinite period \u000d\u000aof time. Besides, this Watchdog Timer supports the function to wake up system \u000d\u000afrom Idle/Power-down mode.\u000d\u000aFeatures\u000d\u000a\u2022 20-bit free running up counter for WDT time-out interval\u000d\u000a\u2022 Selectable time-out interval (24 ~ 220) and the time-out interval is 0.5 \u000d\u000ams ~ 32.768 s if WDT_CLK = 32 kHz\u000d\u000a\u2022 System kept in reset state for a period of (1 / WDT_CLK) * 63\u000d\u000a\u2022 Supports selectable WDT reset delay period, including 1026, 130, 18 or \u000d\u000a3 WDT_CLK reset delay period\u000d\u000a\u2022 Supports to force WDT enabled after chip powered on or reset by setting\u000d\u000aCWDTEN[2:0] in Config0 register\u000d\u000a\u2022 Supports WDT time-out wake-up function only if WDT clock source is \u000d\u000aselected as LIRC 32 kHz or LXT","Nuvoton Technology Corporation\u000d\u000a80\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a81\u000d\u000aWindow Watchdog Timer (WWDT)\u000d\u000aOverview\u000d\u000aThe Window Watchdog Timer (WWDT) is used to perform a system reset within \u000d\u000aa specified window period to prevent software running to uncontrollable status by \u000d\u000aany unpredictable condition.\u000d\u000aFeatures\u000d\u000a\u2022 6-bit down counter value (CNTDAT, WWDT_CNT[5:0]) and 6-bit \u000d\u000acompare value (CMPDAT, WWDT_CTL[21:16]) to make the WWDT \u000d\u000atime-out window period flexible\u000d\u000a\u2022 Supports 4-bit value (PSCSEL, WWDT_CTL[11:8]) to programmable \u000d\u000amaximum 11-bit prescale counter period of WWDT counter\u000d\u000a\u2022 WWDT counter suspends in Idle/Power-down mode\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a82\u000d\u000aReal Time Clock (RTC)\u000d\u000aOverview\u000d\u000aThe Real Time Clock (RTC) controller provides the real time and calendar \u000d\u000amessage. The RTC offers programmable time tick and alarm match interrupts. The \u000d\u000adata format of time and calendar messages are expressed in BCD format. A digital \u000d\u000afrequency compensation feature is available to compensate external crystal \u000d\u000aoscillator frequency accuracy.\u000d\u000aFeatures\u000d\u000a\u2022 Supports external power pin VBAT\u000d\u000a\u2022 Supports real time counter in RTC_TIME (hour, minute, second) and \u000d\u000acalendar counter in RTC_CAL (year, month, day) for RTC time and \u000d\u000acalendar check.\u000d\u000a\u2022 Supports alarm time (hour, minute, second) and calendar (year, month, \u000d\u000aday) settings in RTC_TALM and RTC_CALM.\u000d\u000a\u2022 Supports alarm time (hour, minute, second) and calendar (year, month, \u000d\u000aday) mask enable in RTC_TAMSK and RTC_CAMSK.\u000d\u000a\u2022 Selectable 12-hour or 24-hour time scale in RTC_CLKFMT register.\u000d\u000a\u2022 Optional support 1/128 second HZCNT in RTC_TIME and \u000d\u000aRTC_TALM.\u000d\u000a\u2022 Supports Leap Year indication in RTC_LEAPYEAR register.\u000d\u000a\u2022 Supports Day of the Week counter in RTC_WEEKDAY register.\u000d\u000a\u2022 Frequency of RTC clock source compensate by RTC_FREQADJ \u000d\u000aregister.\u000d\u000a\u2022 All time and calendar message expressed in BCD format.\u000d\u000a\u2022 Supports periodic RTC Time Tick interrupt with 8 period interval options \u000d\u000a1/128, 1/64, 1/32, 1/16, 1/8, 1/4, 1/2 and 1 second.\u000d\u000a\u2022 Supports RTC Time Tick and Alarm Match interrupt\u000d\u000a\u2022 Supports 1 Hz clock output\u000d\u000a\u2022 Supports chip wake-up from Idle or Power-down mode while a RTC \u000d\u000ainterrupt signal is generated\u000d\u000a\u2022 Supports Daylight Saving Time software control in RTC_DSTCTL\u000d\u000a\u2022 Supports up to 6 individual tamper pins or 3 pairs dynamic loop tamper \u000d\u000apins","Nuvoton Technology Corporation\u000d\u000a83\u000d\u000a\u2022 Supports 80 bytes spare registers and tamper pins detection to clear the \u000d\u000acontent of these spare registers\u000d\u000a\u2022 Supports Flash mass erase operate will also clear the 80 bytes spare \u000d\u000aregisters content\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a84\u000d\u000aBasic PWM Generator and Capture Timer (BPWM)\u000d\u000aOverview\u000d\u000aThe chip provides two BPWM generators \uff0d BPWM0 and BPWM1 as shown in \u000d\u000aFigure 6.21-1. Each BPWM supports 6 channels of BPWM output or input \u000d\u000acapture. There is a 12-bit prescaler to support flexible clock to the 16-bit BPWM \u000d\u000acounter with 16-bit comparator. The BPWM counter supports up, down\u000d\u000aand up-down counter types, all 6 channels share one counter. BPWM uses the \u000d\u000acomparator compared with counter to generate events. These events are used to \u000d\u000agenerate BPWM pulse, interrupt and trigger signal for EADC0/1 to start \u000d\u000aconversion. For BPWM output control unit, it supports polarity output,\u000d\u000aindependent pin mask and tri-state output enable.\u000d\u000aThe BPWM generator also supports input capture function to latch BPWM \u000d\u000acounter value to corresponding register when input channel has a rising transition, \u000d\u000afalling transition or both transition is happened.\u000d\u000aFeatures\u000d\u000a\u2022 BPWM Function Features\u000d\u000a- Supports maximum clock frequency up to HCLK frequency\u000d\u000a- Supports up to two BPWM modules, each module provides 6 \u000d\u000aoutput channels\u000d\u000a- Supports independent mode for BPWM output/Capture input \u000d\u000achannel\u000d\u000a- Supports 12-bit prescalar from 1 to 4096\u000d\u000a- Supports 16-bit resolution BPWM counter, each module \u000d\u000aprovides 1 BPWM counter up, down and up/down counter \u000d\u000aoperation type\u000d\u000a- Supports mask function and tri-state enable for each BPWM pin\u000d\u000a- Supports interrupt in the events of BPWM counter matches 0, \u000d\u000aperiod value or compared value\u000d\u000a- Supports trigger EADC0/1 events of BPWM counter matches \u000d\u000a0, period value or compared value\u000d\u000a\u2022 Capture Function Features\u000d\u000a- Supports up to 12 capture input channels with 16-bit resolution","Nuvoton Technology Corporation\u000d\u000a85\u000d\u000a- Supports rising or falling capture condition\u000d\u000a- Supports input rising/falling capture interrupt\u000d\u000a- Supports rising/falling capture with counter reload option\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a86\u000d\u000aEPWM Generator and Capture Timer (EPWM)\u000d\u000aOverview\u000d\u000aThe chip provides two EPWM generators \uff0d EPWM0 and EPWM1. Each EPWM \u000d\u000asupports 6 channels of EPWM output or input capture. There is a 12-bit prescaler \u000d\u000ato support flexible clock to the 16-bit EPWM counter with 16-bit comparator. The \u000d\u000aEPWM counter supports up, down and up-down counter types. EPWM uses \u000d\u000acomparator compared with counter to generate events. These events use to \u000d\u000agenerate EPWM pulse, interrupt and trigger signal for EADC/LPADC/DAC to \u000d\u000astart conversion.\u000d\u000aThe EPWM generator supports two standard EPWM output modes: Independent \u000d\u000amode and Complementary mode, they have difference architecture. There are two \u000d\u000aoutput functions based on standard output modes: Group function and \u000d\u000aSynchronous function. Group function can be enabled under Independent mode \u000d\u000aor complementary mode. Synchronous function only enabled under\u000d\u000acomplementary mode. Complementary mode has two comparators to generate \u000d\u000avarious EPWM pulse with 12-bit dead-time generator and another free trigger \u000d\u000acomparator to generate trigger signal for EADC/LPADC. For EPWM output \u000d\u000acontrol unit, it supports polarity output, independent pin mask and brake functions.\u000d\u000aThe EPWM generator also supports input capture function. It supports latch \u000d\u000aEPWM counter value to corresponding register when input channel has a rising \u000d\u000atransition, falling transition or both transition is happened. Capture function also \u000d\u000asupports PDMA to transfer captured data to memory.\u000d\u000aFeatures\u000d\u000a\u2022 EPWM Function Features\u000d\u000a- Supports maximum clock frequency up to maximum PLL \u000d\u000afrequency\u000d\u000a- Supports up to two EPWM modules, each module provides 6 \u000d\u000aoutput channels\u000d\u000a- Supports independent mode for EPWM output/Capture input \u000d\u000achannel\u000d\u000a- Supports complementary mode for 3 complementary paired \u000d\u000aEPWM output channel","Nuvoton Technology Corporation\u000d\u000a87\u000d\u000a- Supports 12-bit prescaler from 1 to 4096\u000d\u000a- Supports 16-bit resolution EPWM counter\u000d\u000a- Supports one-shot or auto-reload counter operation mode\u000d\u000a- Supports group function\u000d\u000a- Supports synchronous function\u000d\u000a- Supports mask function and tri-state enable for each EPWM pin\u000d\u000a- Supports brake function\u000d\u000a- Supports interrupt on the events of EPWM counter matches 0, \u000d\u000aperiod value or compared value, brake condition happened\u000d\u000a- Supports trigger EADC/LPADC/DAC on the events of EPWM \u000d\u000acounter matches 0, period value or compared value; EPWM \u000d\u000acounter matches free trigger comparator compared value (only \u000d\u000afor EADC/LPADC); EPWM trigger EADC/LPADC event \u000d\u000aprescaler feature\u000d\u000a- Support PDMA transfer for Interrupt Flag Accumulator \u000d\u000aFunction\u000d\u000a- Supports EPWM output accumulator stop counter mode\u000d\u000a- Supports Fault Detect function\u000d\u000a- Support External Pin Trigger Function\u000d\u000a\u2022 Capture Function Features\u000d\u000a- Support 3-bit capture input noise filter\u000d\u000a- Supports up to 12 capture input channels with 16-bit resolution\u000d\u000a- Supports rising or falling capture condition\u000d\u000a- Supports input rising/falling capture interrupt\u000d\u000a- Supports rising/falling capture with counter reload option\u000d\u000a- Supports PDMA transfer function for EPWM all channels","Nuvoton Technology Corporation\u000d\u000a88\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a89\u000d\u000aEnhanced Quadrature Encoder Interface (EQEI)\u000d\u000aOverview\u000d\u000aThere are four EQEI controllers in this device. The Enhanced Quadrature Encoder \u000d\u000aInterface (EQEI) decodes speed of rotation and motion sensor information. It can \u000d\u000abe used in any application that uses a quadrature encoder for feedback.\u000d\u000aFeatures\u000d\u000a\u2022 Up to four EQEI controllers, EQEI0, EQEI1, EQEI2 and EQEI3\u000d\u000a\u2022 Two EQEI phase inputs, QEA and QEB; One Index input\u000d\u000a\u2022 A 32-bit up/down Quadrature Encoder Pulse Counter (EQEI_CNT)\u000d\u000a\u2022 A 32-bit software-latch Quadrature Encoder Pulse Counter Hold Register\u000d\u000a(EQEI_CNTHOLD)\u000d\u000a\u2022 A 32-bit Quadrature Encoder Pulse Counter Index Latch Register \u000d\u000a(EQEI_CNTLATCH)\u000d\u000a\u2022 A 32-bit Quadrature Encoder Pulse Counter Compare Register \u000d\u000a(EQEI_CNTCMP) with a Pre-set Maximum Count Register \u000d\u000a(EQEI_CNTMAX)\u000d\u000a\u2022 A 32-bit up count Unit Timer Pulse Counter (EQEI_UTCNT)\u000d\u000a\u2022 A 32-bit Unit Timer Pulse Counter Compare Register (EQEI_UTCMP)\u000d\u000a\u2022 One EQEI control register (EQEI_CTL) and one EQEI Status Register \u000d\u000a(EQEI_STATUS)\u000d\u000a\u2022 Four Quadrature encoder pulse counter operation modes:\u000d\u000a- Supports X4 free-counting mode\u000d\u000a- Supports X2 free-counting mode\u000d\u000a- Supports X4 compare-counting mode\u000d\u000a- Supports X2 compare-counting mode\u000d\u000a\u2022 Two Quadrature encoder phase counter operation modes:\u000d\u000a\u2022 Two Quadrature encoder directional counter operation modes:\u000d\u000a\u2022 Supports swap function for input signals QEA and QEB\u000d\u000a\u2022 Supports for detecting the occurrence of phase error from input signals \u000d\u000aQEA and QEB\u000d\u000a\u2022 Supports one times index signal reset function for Quadrature encoder \u000d\u000apulse counter\u000d\u000a\u2022 Encoder Pulse Width measurement mode","Nuvoton Technology Corporation\u000d\u000a90\u000d\u000a\u2022 Input frequency of QEA/QEB/IDX without noise filter must lower than \u000d\u000aPCLK/4\u000d\u000a\u2022 Input frequency of QEA/QEB/IDX with noise filter must lower than \u000d\u000aNoise Filter Clock/8\u000d\u000aBlock Diagram\u000d\u000aThe EQEI controller inputs, QEA and QEB, accept the outputs from a quadrature \u000d\u000aencoded source, such as incremental optical shaft encoder. Two channels, A and \u000d\u000aB, nominally 90 degrees out of phase, are required. A quadrature encoder usually \u000d\u000aprovides an index signal (to pin IDX) which can be used to indicate an absolute \u000d\u000aposition. There is a noise filter and polarity control for each signal before EQEI\u000d\u000acontrol unit.","Nuvoton Technology Corporation\u000d\u000a91\u000d\u000aEQEI Decoder Unit (QDU) module contains inverse and swap function for input \u000d\u000asignals QA and QB, EQEI mode selection, EQEI phase counter clock rate \u000d\u000aselection, and the mechanism for detecting phase error. Users can use the function \u000d\u000athey want by controlling the registers.","Nuvoton Technology Corporation\u000d\u000a92\u000d\u000aEnhanced Input Capture Timer (ECAP)\u000d\u000aOverview\u000d\u000aThe chip provides up to four units of Input Capture Timer/Counter whose capture \u000d\u000afunction can detect the digital edge-changed signal at channel inputs. Each unit \u000d\u000ahas three input capture channels. The timer/counter is equipped with up counting, \u000d\u000areload and compare-match capabilities.\u000d\u000aFeatures\u000d\u000a\u2022 Up to four Input Capture Timer/Counter units, CAP0, CAP1, CAP2 and \u000d\u000aCAP3\u000d\u000a\u2022 Each unit has 3 input channels\u000d\u000a\u2022 Each unit has its own interrupt vector\u000d\u000a\u2022 Each input channel has its own capture counter hold register\u000d\u000a\u2022 24-bit Input Capture up-counting timer/counter\u000d\u000a\u2022 With noise filter in front end of input ports\u000d\u000a\u2022 Edge detector with three options\u000d\u000a- Rising edge detection\u000d\u000a- Falling edge detection\u000d\u000a- Both edge detection\u000d\u000a\u2022 Captured events reset and/or reload capture counter\u000d\u000a\u2022 Supports compare-match function","Nuvoton Technology Corporation\u000d\u000a93\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a94\u000d\u000aCamera Capture Interface Controller (CCAP)\u000d\u000aOverview\u000d\u000aThe camera capture interface controller (CCAP) is designed to capture image data \u000d\u000afrom a sensor. After capturing or fetching image data, it processes the image data. \u000d\u000aThen, the embedded DMA controller will move the data from the internal FIFO \u000d\u000ato system memory with AHB bus, except for the motion detection function.\u000d\u000aFeatures\u000d\u000a\u2022 CCIR601 & CCIR656 interfaces supported for connection to CMOS \u000d\u000aimage sensor\u000d\u000a\u2022 8-bit YUV422, 8-bit RGB565 and 8-bit RGB888 color format supported \u000d\u000afor data-in from CMOS sensor\u000d\u000a\u2022 8-bit/4-bit monochrome format supported for data-in from CMOS sensor\u000d\u000a\u2022 YUV422, RGB565, RGB555, RGB888, ARGB8888 and Y-only color \u000d\u000asupported for packet data output\u000d\u000a\u2022 Single interrupt source to interrupt controller from maskable interrupt \u000d\u000asource: Address Match, Bus Master Transfer Error, Video Frame End \u000d\u000aand Motion Detection\u000d\u000a\u2022 Embedded DMA controller supported to transfer data from internal FIFO \u000d\u000ato system memory through AHB bus\u000d\u000a\u2022 Supports YUV422 and YUV420 planar data output\u000d\u000a\u2022 CROP function supported to crop input image to the required size for \u000d\u000adigital application in color CMOS sensor or motion detection function\u000d\u000a\u2022 Frame rate scaling-down supported in color CMOS sensor or motion \u000d\u000adetection function\u000d\u000a\u2022 Image scaling-down supported in color CMOS sensor or motion \u000d\u000adetection function\u000d\u000a\u2022 Bit luma output with 8-bit threshold setting supported\u000d\u000a\u2022 Supports motion detection engine with 320x240 image data in powerdown mode\u000d\u000a\u2022 Supports motion detection engine trigger sources from LPTMR0/1 and \u000d\u000aTTMR0/1\u000d\u000a\u2022 Supports chip wake-up from power-down mode if a motion detection \u000d\u000ainterrupt signal is generated","Nuvoton Technology Corporation\u000d\u000a95\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a96\u000d\u000aUART Interface Controller (UART)\u000d\u000aOverview\u000d\u000aThe chip provides ten channels of Universal Asynchronous Receiver/Transmitters \u000d\u000a(UART). The UART controller performs serial-to-parallel conversion on data \u000d\u000areceived from the peripheral and parallel-toserial conversion on data transmitted \u000d\u000afrom the CPU. Each UART controller channel supports ten types of interrupts. \u000d\u000aThe UART controller supports flow control function. The UART controller also \u000d\u000asupports IrDA SIR, LIN, RS-485 and Single-wire function modes and auto-baud \u000d\u000arate measuring function.\u000d\u000aFeatures\u000d\u000a\u2022 Full-duplex asynchronous communications\u000d\u000a\u2022 Separates receive and transmit 16/16 bytes entry FIFO for data payloads\u000d\u000a\u2022 Supports hardware auto-flow control\u000d\u000a\u2022 Programmable receiver buffer trigger level\u000d\u000a\u2022 Supports programmable baud rate generator for each channel \u000d\u000aindividually\u000d\u000a\u2022 Supports nCTS, incoming data, Received Data FIFO reached threshold \u000d\u000aand RS-485 Address Match (AAD mode) wake-up function\u000d\u000a\u2022 Supports 8-bit receiver buffer time-out detection function\u000d\u000a\u2022 Programmable transmitting data delay time between the last stop and the \u000d\u000anext START bit by setting DLY (UART_TOUT[15:8])\u000d\u000a\u2022 Supports Auto-Baud Rate measurement and baud rate compensation \u000d\u000afunction\u000d\u000a\u2022 Supports break error, frame error, parity error and receive/transmit buffer \u000d\u000aoverflow detection function\u000d\u000a\u2022 Fully programmable serial-interface characteristics\u000d\u000a\u2022 Supports IrDA SIR function mode\u000d\u000a\u2022 Supports LIN function mode (Only UART0/UART1 with LIN function)\u000d\u000a\u2022 Supports RS-485 function mode\u000d\u000a\u2022 Supports PDMA transfer function\u000d\u000a\u2022 Supports Single-wire function mode","Nuvoton Technology Corporation\u000d\u000a97\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a98","Nuvoton Technology Corporation\u000d\u000a99\u000d\u000aLow Power UART Interface Controller (LPUART)\u000d\u000aOverview\u000d\u000aThe chip provides one channel of Low Power Universal Asynchronous \u000d\u000aReceiver/Transmitters (LPUART). The LPUART controller performs serial-toparallel conversion on data received from the peripheral and parallel-to-serial \u000d\u000aconversion on data transmitted from the CPU. Each LPUART controller channel \u000d\u000asupports nine types of interrupts. The LPUART controller supports flow control \u000d\u000afunction. The LPUART controller also supports RS-485 function mode and autobaud rate measuring function.\u000d\u000aFeatures\u000d\u000a\u2022 Full-duplex asynchronous communications\u000d\u000a\u2022 Separates receive and transmit 16/16 bytes entry FIFO for data payloads\u000d\u000a\u2022 Supports hardware auto-flow control\u000d\u000a\u2022 Programmable receiver buffer trigger level\u000d\u000a\u2022 Supports programmable baud rate generator for each channel \u000d\u000aindividually\u000d\u000a\u2022 Supports nCTS, incoming data, Received Data FIFO reached threshold \u000d\u000aand RS-485 Address Match (AAD mode) wake-up function\u000d\u000a\u2022 Supports 8-bit receiver buffer time-out detection function\u000d\u000a\u2022 Programmable transmitting data delay time between the last stop and the \u000d\u000anext START bit by setting DLY (LPUART_TOUT [15:8])\u000d\u000a\u2022 Supports Auto-Baud Rate measurement and baud rate compensation \u000d\u000afunction\u000d\u000a\u2022 Supports break error, frame error, parity error and receive/transmit buffer \u000d\u000aoverflow detection function\u000d\u000a\u2022 Fully programmable serial-interface characteristics\u000d\u000a\u2022 Supports RS-485 function mode\u000d\u000a\u2022 Supports LPPDMA transfer function\u000d\u000a\u2022 Supports Automatic Operation","Nuvoton Technology Corporation\u000d\u000a100\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a101\u000d\u000aEthernet MAC Controller (EMAC)\u000d\u000aOverview\u000d\u000aPortions Copyright \u00a9 Synopsys, Inc. Used with permission. All rights reserved.\u000d\u000aThe EMAC enables a host to transmit and receive data over Ethernet in \u000d\u000acompliance with the IEEE 802.3-2008 standard.\u000d\u000aIn addition to the default interfaces defined in the IEEE 802.3 specifications, the \u000d\u000aEMAC supports several industry standard interfaces to the PHY. The EMAC is \u000d\u000acompliant with the following standards:\u000d\u000a\u2022 IEEE 802.3-2008 for Ethernet MAC\u000d\u000a\u2022 IEEE 1588-2008 standard for precision networked clock synchronization\u000d\u000a\u2022 AMBA 2.0 for AHB master/slave port\u000d\u000a\u2022 RMII specification version 1.2 from RMII consortium\u000d\u000aFeatures\u000d\u000a\u2022 10 and 100 Mbps data transfer rates with the RMII interface to \u000d\u000acommunicate with an external Fast Ethernet PHY\u000d\u000a\u2022 Full-duplex operation\u000d\u000a\u2022 Half-duplex operation\u000d\u000a\u2022 Preamble and start of frame data (SFD) insertion in Transmit path\u000d\u000a\u2022 Preamble and SFD deletion in the Receive path\u000d\u000a\u2022 Automatic CRC and pad generation controllable on a per-frame basis\u000d\u000a\u2022 Automatic Pad and CRC Stripping options for receive frames\u000d\u000a\u2022 Programmable frame length to support Standard or Jumbo Ethernet \u000d\u000aframes with up to 16 Kbytes of size\u000d\u000a\u2022 Programmable Interframe Gap (IFG) (40-96 bit times in steps of 8)\u000d\u000a\u2022 Option to transmit frames with reduced preamble size\u000d\u000a\u2022 Separate 32-bit status for transmit and receive packets\u000d\u000a\u2022 IEEE 802.1Q VLAN tag detection for reception frames\u000d\u000a\u2022 Separate transmission, reception, and control interfaces to the application\u000d\u000a\u2022 Receive module for checksum off-load for received IPv4 and TCP \u000d\u000apackets encapsulated by the Ethernet frame (Type 1)","Nuvoton Technology Corporation\u000d\u000a102\u000d\u000a\u2022 Enhanced Receive module for checking IPv4 header checksum and TCP, \u000d\u000aUDP, or ICMP checksum encapsulated in IPv4 or IPv6 datagrams (Type \u000d\u000a2)\u000d\u000a\u2022 Support Ethernet frame timestamping as described in IEEE 1588-2002 \u000d\u000aand IEEE 1588-2008\u000d\u000a\u2022 MDIO master interface for PHY device configuration and management\u000d\u000a\u2022 Standard IEEE 802.3az-2010 for Energy Efficient Ethernet\u000d\u000a\u2022 Flexibility to control the Pulse-Per-Second (PPS) output signal \u000d\u000a(ptp_pps_o)\u000d\u000a\u2022 CRC replacement, Source Address field insertion or replacement, and \u000d\u000aVLAN insertion, replacement, and deletion in transmitted frames with \u000d\u000aper-frame control\u000d\u000a\u2022 Programmable watchdog timeout limit in the receive path","Nuvoton Technology Corporation\u000d\u000a103\u000d\u000aSmart Card Host Interface (SC)\u000d\u000aOverview\u000d\u000aThe Smart Card Interface controller (SC controller) is based on ISO/IEC 7816-3 \u000d\u000astandard and fully compliant with PC/SC Specifications. It also provides status of \u000d\u000acard insertion/removal. It can also be set as UART mode to communicate with \u000d\u000aother device.\u000d\u000aFeatures\u000d\u000a\u2022 ISO 7816-3 T = 0, T = 1 compliant\u000d\u000a\u2022 EMV2000 compliant\u000d\u000a\u2022 Three ISO 7816-3 ports\u000d\u000a\u2022 Separates receive/transmit 4 bytes\u2019 entry FIFO for data payloads\u000d\u000a\u2022 Programmable transmission clock frequency\u000d\u000a\u2022 Programmable receiver buffer trigger level\u000d\u000a\u2022 Programmable guard time selection (11 ETU ~ 267 ETU)\u000d\u000a\u2022 One 24-bit timer and two 8-bit timers for Answer to Request (ATR) and \u000d\u000awaiting times processing\u000d\u000a\u2022 Supports auto direct / inverse convention function\u000d\u000a\u2022 Supports transmitter and receiver error retry and error number limiting \u000d\u000afunction\u000d\u000a\u2022 Supports hardware activation sequence process, and the time between \u000d\u000aPWR on and CLK start is configurable\u000d\u000a\u2022 Supports hardware warm reset sequence process\u000d\u000a\u2022 Supports hardware deactivation sequence process\u000d\u000a\u2022 Supports hardware auto deactivation sequence when detected the card \u000d\u000aremoval\u000d\u000a\u2022 Supports UART mode\u000d\u000a- Full duplex, asynchronous communications\u000d\u000a- Separates receiving / transmitting 4 bytes\u2019 entry FIFO for data \u000d\u000apayloads\u000d\u000a- Supports programmable baud rate generator\u000d\u000a- Supports programmable receiver buffer trigger level","Nuvoton Technology Corporation\u000d\u000a104\u000d\u000aBlock Diagram\u000d\u000aThe SC clock control and block diagram are shown in SC Clock Control Diagram \u000d\u000a(8-bit Pre-scale Counter in Clock Controller) and SC Controller Block Diagram. \u000d\u000aThe SC controller is completely asynchronous design with two clock domains, \u000d\u000aPCLK and engine clock. Note that the PCLK should be higher than or equal to the \u000d\u000afrequency of engine clock.","Nuvoton Technology Corporation\u000d\u000a105\u000d\u000aI2S Controller (I2S)\u000d\u000aOverview\u000d\u000aThe I2S controller consists of I2S protocol to interface with external audio \u000d\u000aCODEC. Two 16-level depth FIFO for reading path and writing path respectively \u000d\u000aare capable of handling 8/16/24/32 bits audio data sizes. A PDMA controller \u000d\u000ahandles the data movement between FIFO and memory.\u000d\u000aFeatures\u000d\u000a\u2022 Supports Master mode and Slave mode\u000d\u000a\u2022 Capable of handling 8, 16, 24 and 32 bits data sizes in each audio channel\u000d\u000a\u2022 Supports monaural and stereo audio data\u000d\u000a\u2022 Supports I2S protocols: Philips standard, MSB-justified, and LSBjustified data format\u000d\u000a\u2022 Supports PCM protocols: PCM standard, MSB-justified, and LSBjustified data format\u000d\u000a\u2022 PCM protocol supports TDM multi-channel transmission in one audio \u000d\u000asample, and the number of data channel can be set as 2, 4, 6, or 8\u000d\u000a\u2022 Provides two 16-level FIFO data buffers, one for transmitting and the \u000d\u000aother for receiving\u000d\u000a\u2022 Generates interrupt requests when buffer levels cross a programmable \u000d\u000aboundary\u000d\u000a\u2022 Supports two PDMA requests, one for transmitting and the other for \u000d\u000areceiving","Nuvoton Technology Corporation\u000d\u000a106\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a107\u000d\u000aSerial Peripheral Interface (SPI)\u000d\u000aOverview\u000d\u000aThe Serial Peripheral Interface (SPI) applies to synchronous serial data \u000d\u000acommunication and allows full duplex transfer. Devices communicate in \u000d\u000aMaster/Slave mode with the 4-wire bi-direction interface. The chip contains up to \u000d\u000afour sets of SPI controllers performing a serial-to-parallel conversion on data\u000d\u000areceived from a peripheral device, and a parallel-to-serial conversion on data \u000d\u000atransmitted to a peripheral device. Each SPI controller can be configured as a \u000d\u000amaster or a slave device and supports the PDMA function to access the data buffer. \u000d\u000aEach SPI controller also supports I2S mode to connect external audio CODEC.\u000d\u000aFeatures\u000d\u000a\u2022 SPI Mode\u000d\u000a- Up to four sets of SPI controllers\u000d\u000a- Supports Master or Slave mode operation\u000d\u000a- Master mode up to 100 MHz (when chip works at VDD = \u000d\u000a2.7~3.6V)\u000d\u000a- Slave mode up to 50 MHz (when chip works at VDD = \u000d\u000a2.7~3.6V)\u000d\u000a- Configurable bit length of a transaction word from 4 to 32-bit\u000d\u000a- Provides separate 4-level depth transmit and receive FIFO \u000d\u000abuffers\u000d\u000a- Supports MSB first or LSB first transfer sequence\u000d\u000a- Supports Byte Reorder function\u000d\u000a- Supports Byte or Word Suspend mode\u000d\u000a- Supports PDMA transfer\u000d\u000a- Supports 3-Wire, no slave selection signal, bi-direction \u000d\u000ainterface\u000d\u000a- Supports one data channel half-duplex transfer\u000d\u000a- Supports receive-only mode\u000d\u000a\u2022 I2S Mode\u000d\u000a- Supports Master or Slave\u000d\u000a- Capable of handling 8-, 16-, 24- and 32-bit word sizes","Nuvoton Technology Corporation\u000d\u000a108\u000d\u000a- Each provides two 4-level FIFO data buffers, one for \u000d\u000atransmitting and the other for receiving\u000d\u000a- Supports monaural and stereo audio data\u000d\u000a- Supports PCM mode A, PCM mode B, I2S and MSB justified \u000d\u000adata format\u000d\u000a- Supports two PDMA requests, one for transmitting and the \u000d\u000aother for receiving\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a109\u000d\u000aLow Power Serial Peripheral Interface (LPSPI)\u000d\u000aOverview\u000d\u000aThe Low Power Serial Peripheral Interface (LPSPI) applies to synchronous serial \u000d\u000adata communication and allows full duplex transfer. Devices communicate in \u000d\u000aMaster/Slave mode with the 4-wire bi-direction interface. The chip contains one \u000d\u000aset of LPSPI controller performing a serial-to-parallel conversion on data received \u000d\u000afrom a peripheral device, and a parallel-to-serial conversion on data transmitted \u000d\u000ato a peripheral device. The LPSPI controller can be configured as a master device \u000d\u000aand supports the LPPDMA function to access the data buffer, or configured as a \u000d\u000aslave device and monitor the signal level change of SS to wake up system.\u000d\u000aFeatures\u000d\u000aLPSPI Mode\u000d\u000a\u2022 One set of LPSPI controller\u000d\u000a\u2022 Supports Master or Slave mode operation\u000d\u000a\u2022 Master mode up to 50 MHz (when chip works at VDD = 2.7V~3.6V)\u000d\u000a\u2022 Slave mode up to 25 MHz when LPSPI master device supports \u000d\u000aadjustment function of RX data sampling clock (when chip works at \u000d\u000aVDD = 2.7~3.6V)\u000d\u000a\u2022 Slave mode up to 25 MHz when LPSPI master device does not support\u000d\u000aadjustment function of RX data sampling clock (when chip works at \u000d\u000aVDD = 2.7V~3.6V)\u000d\u000a\u2022 Configurable bit length of a transaction word from 4 to 32-bit\u000d\u000a\u2022 Provides separate 4-level depth transmit and receive FIFO buffers\u000d\u000a\u2022 Supports MSB first or LSB first transfer sequence\u000d\u000a\u2022 Supports Byte Reorder function\u000d\u000a\u2022 Supports Byte or Word Suspend mode\u000d\u000a\u2022 Supports LPPDMA transfer\u000d\u000a\u2022 Supports 3-Wire, no slave selection signal, bi-direction interface\u000d\u000a\u2022 Supports one data channel half-duplex transfer\u000d\u000a\u2022 Supports receive-only mode\u000d\u000a\u2022 Supports automatic operation mode","Nuvoton Technology Corporation\u000d\u000a110\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a111\u000d\u000aQuad Serial Peripheral Interface (QSPI)\u000d\u000aOverview\u000d\u000aThe Quad Serial Peripheral Interface (QSPI) applies to synchronous serial data \u000d\u000acommunication and allows full duplex transfer. Devices communicate in \u000d\u000aMaster/Slave mode with the 4-wire bi-direction interface. The chip contains two \u000d\u000aQSPI controller performing a serial-to-parallel conversion on data received from \u000d\u000aa peripheral device, and a parallel-to-serial conversion on data transmitted to a \u000d\u000aperipheral device.\u000d\u000aThe QSPI controller supports 2-bit Transfer mode to perform full-duplex 2-bit \u000d\u000adata transfer and also supports Dual and Quad I/O Transfer mode and the \u000d\u000acontroller supports the PDMA function to access the data buffer.\u000d\u000aFeatures\u000d\u000a\u2022 Supports Master or Slave mode operation\u000d\u000a\u2022 Master mode up to 100 MHz (when chip works at VDD = 2.7V~3.6V)\u000d\u000a\u2022 Slave mode up to 50 MHz (when chip works at VDD = 2.7V~3.6V)\u000d\u000a\u2022 Supports 2-bit Transfer mode\u000d\u000a\u2022 Supports Dual and Quad I/O Transfer mode\u000d\u000a\u2022 Configurable bit length of a transaction word from 8 to 32-bit\u000d\u000a\u2022 Provides separate 8-level depth transmit and receive FIFO buffers\u000d\u000a\u2022 Supports MSB first or LSB first transfer sequence\u000d\u000a\u2022 Supports Byte Reorder function\u000d\u000a\u2022 Supports Byte or Word Suspend mode\u000d\u000a\u2022 Supports PDMA transfer\u000d\u000a\u2022 Supports 3-Wire, no slave selection signal, bi-direction interface\u000d\u000a\u2022 Supports one data channel half-duplex transfer\u000d\u000a\u2022 Supports Transmit Double Transfer Rate Mode (TX DTR mode)\u000d\u000a\u2022 Supports receive-only mode","Nuvoton Technology Corporation\u000d\u000a112\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a113\u000d\u000aSPI/HyperBus Synchronous Serial Interface Controller (SPIM)\u000d\u000aOverview\u000d\u000aThe SPI/HyperBus Synchronous Serial Interface Controller for storage \u000d\u000acomponents of SPI Flash and HyperBus deive performs a serial-to-parallel \u000d\u000aconversion on data received from the storage peripheral, and a parallel-to-serial \u000d\u000aconversion on data received from MCU. This SPI/HyperBus controller can drive\u000d\u000aone SPI Flash and it is seen as the SPI master mode, and it also can drive one \u000d\u000aHyperBus device and it is seen as the HyperBus host. It can generate an interrupt \u000d\u000asignal when data transfer is finished and can be cleared by writing 1 to the interrupt \u000d\u000aflag. The active level of chip/slave select (CS/SS) signal can be chosen to low \u000d\u000aactive or high active, which depends on the peripheral. Writing a divisor into the\u000d\u000aSPIM_CTL1 register can program the frequency of serial clock output to the \u000d\u000aperipheral.\u000d\u000aIn controller of SPI Flash and HyperBus device, normal I/O mode contains four \u000d\u000a32-bit transmit/receive buffers, and can provide 1 to 4 burst mode operation. The \u000d\u000anumber of bits in each transaction can be 8-bits, 16-bits, 24-bits, or 32-bits; data \u000d\u000acan be transmitted/received up to four successive transactions in one transfer.\u000d\u000aBy DMA write mode, user can move data from SRAM to storage components of \u000d\u000aSPI Flash and HyperBus device. In DMA read mode, user can move data from \u000d\u000astorage components of SPI Flash and HyperBus device to SRAM. In Direct \u000d\u000aMemory Mapping mode (DMM mode), this controller of SPI Flash and HyperBus \u000d\u000adevice will translate the AHB bus commands into operations of SPI Flash and \u000d\u000aHyperBus device without MCU setting related commands of SPI Flash and \u000d\u000aHyperBus device. Therefore, users can access storage devices of SPI Flash and \u000d\u000aHyperBus device as a ROM module or RAM module.\u000d\u000aThe Synchronous serial Interface Controller supports for STR (Single Transfer \u000d\u000aRate) and DTR (Double Transfer Rate) read/write command codes with \u000d\u000aStandard/Dual/Quad/Octal I/O transfer modes. Once a DTR instruction code is \u000d\u000aaccepted by the device, the transmission data or received data will be output or\u000d\u000asampled on both rising and falling edges of the serial clock.\u000d\u000aFor data protection, the synchronous serial Interface controller supports \u000d\u000aencryption and decryption of AES cipher circuits outside IP to protect data which ","Nuvoton Technology Corporation\u000d\u000a114\u000d\u000auser places into storage components of SPI Flash and HyperBus device when \u000d\u000aDMA read/write mode and direct memory mapping mode are used.\u000d\u000aFeatures\u000d\u000a\u2022 Supports SPI Flash with maximum 32 Mbytes size\u000d\u000a\u2022 Supports HyperBus device with maximum 32 Mbytes size\u000d\u000a\u2022 Supports SPI master mode and HyperBus host mode\u000d\u000a\u2022 Supports Direct Memory Mapping Mode, Normal I/O Mode, DMA Read \u000d\u000aMode, and DMA Write mode\u000d\u000a\u2022 Supports transaction with data width 8/16/24/32 bits for Normal I/O \u000d\u000amode\u000d\u000a\u2022 Provides burst mode operation in Normal I/O mode, which can \u000d\u000atransmit/receive data up to four successive transactions in one transfer\u000d\u000a\u2022 Supports standard (1-bit), dual (2-bit), quad (4-bit), and octal (8-bit) I/O \u000d\u000atransfer mode\u000d\u000a\u2022 Supports Single Transfer Rate (STR) mode and Double Transfer Rate \u000d\u000a(DTR) mode\u000d\u000a\u2022 Supports AES OTFC (On-The-Fly Cipher) encryption/decryption\u000d\u000a\u2022 One slave/device select line for storage component of SPI Flash and \u000d\u000aHyperBus device\u000d\u000a\u2022 Supports read DQS data strobe from SPI Flash and HyperBus device to \u000d\u000asample RX data from SPI Flash and HyperBus device\u000d\u000a\u2022 Supports Linear Burst Read with Row Boundary Crossing for HyperBus \u000d\u000adevice\u000d\u000a\u2022 Not supports type of HyperBus device that it is not allowed Linear Burst \u000d\u000aWrite to across Row Boundary","Nuvoton Technology Corporation\u000d\u000a115\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a116\u000d\u000aI2C Serial Interface Controller (I2C)\u000d\u000aOverview\u000d\u000aI2C is a two-wire, bi-directional serial bus that provides a simple and efficient \u000d\u000amethod of data exchange between devices. The I2C standard is a true multi-master \u000d\u000abus including collision detection and arbitration that prevents data corruption if \u000d\u000atwo or more masters attempt to control the bus simultaneously.\u000d\u000aThere are four sets of I2C controllers which support Power-down Wake-up \u000d\u000afunction.\u000d\u000aFeatures\u000d\u000aThe I2C bus uses two wires (SDA and SCL) to transfer information between \u000d\u000adevices connected to the bus. The main features of the I2C bus include:\u000d\u000a\u2022 Supports up to four I2C ports\u000d\u000a\u2022 Master/Slave mode\u000d\u000a\u2022 Bidirectional data transfer between masters and slaves\u000d\u000a\u2022 Multi-master bus (no central master)\u000d\u000a\u2022 Supports Standard mode (100 kbps), Fast mode (400 kbps) and Fast \u000d\u000amode plus (1 Mbps)\u000d\u000a\u2022 Arbitration between simultaneously transmitting masters without \u000d\u000acorruption of serial data on the bus\u000d\u000a\u2022 Serial clock synchronization allows devices with different bit rates to \u000d\u000acommunicate via one serial bus\u000d\u000a\u2022 Serial clock synchronization used as a handshake mechanism to suspend \u000d\u000aand resume serial transfer\u000d\u000a\u2022 Built-in 14-bit time-out counter requesting the I2C interrupt if the I2C \u000d\u000abus hangs up and timer-out counter overflow\u000d\u000a\u2022 Programmable clocks allow for versatile rate control\u000d\u000a\u2022 Supports 7-bit addressing and 10-bit addressing mode\u000d\u000a\u2022 Supports multiple address recognition (four slave address with mask \u000d\u000aoption)\u000d\u000a\u2022 Supports Power-down wake-up function\u000d\u000a\u2022 Supports PDMA with one buffer capability\u000d\u000a\u2022 Supports two-level buffer function","Nuvoton Technology Corporation\u000d\u000a117\u000d\u000a\u2022 Supports setup/hold time programmable\u000d\u000a\u2022 Add pin swap function\u000d\u000a\u2022 Supports Bus Management (SM/PM compatible) function Compatible \u000d\u000awith the SMBUS\u000d\u000a\u2022 specification rev 2.0 (http://smbus.org/specs/) and PMBUS specification \u000d\u000arev 1.2 (http://pmbus.org/)\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a118\u000d\u000aLow Power I2C Serial Interface Controller (LPI2C)\u000d\u000aOverview\u000d\u000aLPI2C is a two-wire, bi-directional serial bus that provides a simple and efficient \u000d\u000amethod of data exchange between devices.\u000d\u000aThere is one set of LPI2C controller which supports Power-down Wake-up \u000d\u000afunction.\u000d\u000aFeatures\u000d\u000aThe LPI2C bus uses two wires (SDA and SCL) to transfer information between \u000d\u000adevices connected to the bus. The main features of the LPI2C bus include:\u000d\u000a\u2022 Supports one LPI2C port\u000d\u000a\u2022 Master/Slave mode\u000d\u000a\u2022 Bidirectional data transfer between masters and slaves\u000d\u000a\u2022 Supports Standard mode (100 kbps), Fast mode (400 kbps) and Fast \u000d\u000amode plus (1 Mbps) when clock source is greater than 20 MHz\u000d\u000a\u2022 Arbitration between simultaneously transmitting masters without \u000d\u000acorruption of serial data on the bus\u000d\u000a\u2022 Serial clock synchronization allows devices with different bit rates to \u000d\u000acommunicate via one serial bus\u000d\u000a\u2022 Serial clock synchronization used as a handshake mechanism to suspend \u000d\u000aand resume serial transfer\u000d\u000a\u2022 Built-in 14-bit time-out counter requesting the LPI2C interrupt if the I2C \u000d\u000abus hangs up and timer-out counter overflow\u000d\u000a\u2022 Programmable clocks allow for versatile rate control\u000d\u000a\u2022 Supports 7-bit addressing\u000d\u000a\u2022 Supports multiple address recognition (four slave address with mask \u000d\u000aoption)\u000d\u000a\u2022 Supports Power-down wake-up function\u000d\u000a\u2022 Supports LPPDMA with one buffer capability\u000d\u000a\u2022 Supports setup/hold time programmable\u000d\u000a\u2022 Adds pin swap function\u000d\u000a\u2022 Supports auto-operation mode","Nuvoton Technology Corporation\u000d\u000a119\u000d\u000a\u2022 Supports trigger source from LPTMR0/1, TTMR0/1 and WKIOA/B/C/D \u000d\u000arising/falling edge event\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a120\u000d\u000aI3C Serial Interface Controller (I3C)\u000d\u000aOverview\u000d\u000aI3C is a two-wire, bi-directional serial bus that provides a simple and efficient \u000d\u000amethod of data exchange between devices. The Improved Inter Integrated Circuit \u000d\u000a(I3C) is part of a group of communication protocols defined by the MIPI Alliance. \u000d\u000aThis specification is developed to ease sensor system design architectures in \u000d\u000amobile wireless products by providing a fast, low cost, low power, two-wire \u000d\u000adigital interface for sensors.\u000d\u000aThe I3C controller is dual role device and meets the requirement of I3C protocol \u000d\u000aand I2C protocol as specified by the MIPI I3C Specification. The specific \u000d\u000areference documents is MIPI Alliance Specification for I3C BasicSM Version 1.0.\u000d\u000aFeatures\u000d\u000a\u2022 Supports one I3C port\u000d\u000a\u2022 Supports Master and Slave mode\u000d\u000a\u2022 Static or Dynamic Slave Device support\u000d\u000a\u2022 Built-in Hardware Dynamic Address Allocation support \u000d\u000a(ENTDAA/SETDASA)\u000d\u000a\u2022 Built-in CCC transfer handler\u000d\u000a\u2022 Auto Hot-Join request generation support\u000d\u000a\u2022 In-Band Interrupt request generation support\u000d\u000a\u2022 Adaptive mode of operation between I2C and I3C depending on I3C bus \u000d\u000atraffic\u000d\u000a\u2022 Built-in S0-S5 Error Handling\u000d\u000a\u2022 Supports Power-down wake-up function\u000d\u000a\u2022 Supports PDMA mode for data transfer\u000d\u000a\u2022 Supports SDR mode, data rates up to 12.5 Mbps\u000d\u000a\u2022 Supports HDR-DDR mode, data rates up to 25 Mbps\u000d\u000a\u2022 Supports Secondary Master mode","Nuvoton Technology Corporation\u000d\u000a121\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a122\u000d\u000aUSCI - Universal Serial Control Interface Controller (USCI)\u000d\u000aOverview\u000d\u000aThe Universal Serial Control Interface (USCI) is a flexible interface module \u000d\u000acovering several serial communication protocols. The user can configure this \u000d\u000acontroller as UART, SPI, or I2C functional protocol.\u000d\u000aFeatures\u000d\u000aThe controller can be individually configured to math the application needs. It \u000d\u000asupports the protocols of UART, SPI and I2C.\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a123\u000d\u000aUSCI - UART mode\u000d\u000aOverview\u000d\u000aThe asynchronous serial channel UART covers the reception and the transmission \u000d\u000aof asynchronous data frames. It performs a serial-to-parallel conversion on data \u000d\u000areceived from the peripheral, and a parallel-to-serial conversion on data \u000d\u000atransmitted from the controller. The receiver and transmitter are independent, and \u000d\u000athe transmission and reception can be started separately.\u000d\u000aThe UART controller also provides auto flow control. There are three conditions \u000d\u000ato wake up the system.\u000d\u000aFeatures\u000d\u000a\u2022 Supports one transmit buffer and two receive buffer for data payload\u000d\u000a\u2022 Supports hardware auto flow control function\u000d\u000a\u2022 Supports programmable baud-rate generator\u000d\u000a\u2022 Support 9-bit Data Transfer (Support 9-bit RS-485)\u000d\u000a\u2022 Baud rate detection possible by built-in capture event of baud rate \u000d\u000agenerator\u000d\u000a\u2022 Supports PDMA transfer\u000d\u000a\u2022 Supports Wake-up function (Incoming Data and nCTS Wakeup Only)","Nuvoton Technology Corporation\u000d\u000a124\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a125\u000d\u000aUSCI - SPI Mode\u000d\u000aOverview\u000d\u000aThe SPI protocol of USCI controller applies to synchronous serial data \u000d\u000acommunication and allows full duplex transfer. It supports both master and Slave \u000d\u000aoperation mode with the 4-wire bi-direction interface. SPI mode of USCI \u000d\u000acontroller performs a serial-to-parallel conversion on data received from a \u000d\u000aperipheral device, and a parallel-to-serial conversion on data transmitted to a \u000d\u000aperipheral device. The SPI mode is selected by FUNMODE (USPI_CTL[2:0]) = \u000d\u000a0x1\u000d\u000aThis SPI protocol can operate as master or Slave mode by setting the SLAVE \u000d\u000a(USPI_PROTCTL[0]) to communicate with the off-chip SPI Slave or master \u000d\u000adevice. The application block diagrams in master and Slave mode are shown \u000d\u000abelow.","Nuvoton Technology Corporation\u000d\u000a126\u000d\u000aFeatures\u000d\u000a\u2022 Supports Master or Slave mode operation (the maximum frequency --\u000d\u000aMaster < fPCLK / 2, Slave < fPCLK / 5)\u000d\u000a\u2022 Configurable bit length of a transfer word from 4 to 16-bit\u000d\u000a\u2022 Supports one transmit buffer and two receive buffers for data payload\u000d\u000a\u2022 Supports MSB first or LSB first transfer sequence\u000d\u000a\u2022 Supports Word Suspend function\u000d\u000a\u2022 Supports PDMA transfer\u000d\u000a\u2022 Supports 3-wire, no slave select signal, bi-direction interface\u000d\u000a\u2022 Supports wake-up function by slave select signal in Slave mode\u000d\u000a\u2022 Supports one data channel half-duplex transfer\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a127\u000d\u000aUSCI - I2C Mode\u000d\u000aOverview\u000d\u000aOn I2C bus, data is transferred between a Master and a Slave. Data bits transfer \u000d\u000aon the SCL and SDA lines are synchronously on a byte-by-byte basis. Each data \u000d\u000abyte is 8-bit. There is one SCL clock pulse for each data bit with the MSB being \u000d\u000atransmitted first, and an acknowledge bit follows each transferred byte. Each bit \u000d\u000ais sampled during the high period of SCL; therefore, the SDA line may be changed \u000d\u000aonly during the low period of SCL and must be held stable during the high period \u000d\u000aof SCL. A transition on the SDA line while SCL is high is interpreted as a \u000d\u000acommand (START or STOP). Please refer to Figure below for more detailed I2C \u000d\u000aBUS Timing.\u000d\u000aThe device\u2019s on-chip I2C provides the serial interface that meets the I2C bus \u000d\u000astandard mode specification. The I2C port handles byte transfers autonomously. \u000d\u000aThe I2C mode is selected by FUNMODE (UI2C_CTL [2:0]) = 100B. When \u000d\u000aenable this port, the USCI interfaces to the I2C bus via two pins: SDA and SCL. \u000d\u000aWhen I/O pins are used as I2C ports, user must set the pins function to I2C in\u000d\u000aadvance.\u000d\u000aNote: Pull-up resistor is needed for I2C operation because the SDA and SCL are \u000d\u000aset to open-drain pins when USCI is selected to I2C operation mode.\u000d\u000aFeatures\u000d\u000a\u2022 Full master and slave device capability\u000d\u000a\u2022 Supports of 7-bit addressing, as well as 10-bit addressing\u000d\u000a\u2022 Communication in standard mode (100 kbit/s) or in fast mode (up to 400 \u000d\u000akbit/s)","Nuvoton Technology Corporation\u000d\u000a128\u000d\u000a\u2022 Supports multi-master bus\u000d\u000a\u2022 Supports one transmit buffer and two receive buffer for data payload\u000d\u000a\u2022 Supports 10-bit bus time-out capability\u000d\u000a\u2022 Supports bus monitor mode\u000d\u000a\u2022 Supports Power down wake-up by START signal or address match\u000d\u000a\u2022 Supports setup/hold time programmable\u000d\u000a\u2022 Supports multiple address recognition (two slave address with mask \u000d\u000aoption)\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a129\u000d\u000aSecure Digital Host Controller (SDH)\u000d\u000aOverview\u000d\u000aThe Secure Digital Host Controller (SD Host) has DMAC unit and SD unit. The \u000d\u000aDMAC unit provides a DMA (Direct Memory Access) function for SD to \u000d\u000aexchange data between system memory and shared buffer (128 bytes), and the SD \u000d\u000aunit controls the interface of SD/SDHC. The SDHOST controller can support \u000d\u000aSD/SDHC and cooperated with DMAC to provide a fast data transfer between \u000d\u000asystem memory and cards.\u000d\u000aFeatures\u000d\u000a\u2022 AMBA AHB master/slave interface compatible, for data transfer and \u000d\u000aregister read/write\u000d\u000a\u2022 Supports single DMA channel\u000d\u000a\u2022 Supports hardware Scatter-Gather function\u000d\u000a\u2022 Using single 128 Bytes shared buffer for data exchange between system \u000d\u000amemory and cards\u000d\u000a\u2022 Synchronous design for DMA with single clock domain, AHB bus clock \u000d\u000a(HCLK)\u000d\u000a\u2022 Interface with DMAC for register read/write and data transfer\u000d\u000a\u2022 Supports SD/SDHC card\u000d\u000a\u2022 Completely asynchronous design for Secure Digital with two clock \u000d\u000adomains, HCLK and Engine clock, note that frequency of HCLK should \u000d\u000abe higher than the frequency of peripheral clock","Nuvoton Technology Corporation\u000d\u000a130\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a131\u000d\u000aProgrammable Serial I/O (PSIO)\u000d\u000aOverview\u000d\u000aProgrammable Serial I/O (PSIO) provides a simple way to implement simple \u000d\u000aserial signal processing, e.g. UART and IR. The PSIO can control when the pin \u000d\u000awill output high or low and how long the pin need to output high or low. It also \u000d\u000aprovides the easy way to sample the pin state.\u000d\u000aFeatures\u000d\u000a\u2022 Supports up to 8 PSIO pins, from PSIO pin0 to PSIO pin7\u000d\u000a\u2022 Supports 7 clock sources, they are LXT, HXT, LIRC, HIRC, \u000d\u000aHIRC48M/4, PCLK1, APLL0/2\u000d\u000a\u2022 Supports one clock divider, which can be divided from 1 to 255\u000d\u000a\u2022 Supports slot controller for timing sequence control\u000d\u000a\u2022 Supports PSIO PIN for pin state control\u000d\u000a\u2022 Supports 4 kinds of Interrupt trigger conditions\u000d\u000a\u2022 Supports PDMA function","Nuvoton Technology Corporation\u000d\u000a132\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a133\u000d\u000aUSB 1.1 Device Controller (USBD)\u000d\u000aOverview\u000d\u000aThere is one set of USB 2.0 full-speed device controller and transceiver in this \u000d\u000adevice. It is compliant with USB 2.0 full-speed device specification and supports \u000d\u000aControl/Bulk/Interrupt/Isochronous transfer types.\u000d\u000aIn this device controller, there are two main interfaces: the APB bus and USB bus \u000d\u000awhich comes from the USB PHY transceiver. For the APB bus, the CPU can \u000d\u000aprogram control registers through it. There are 1.5K byte sizes internal SRAM as \u000d\u000adata buffer in this controller. For IN or OUT transfer, it is necessary to write data \u000d\u000ato SRAM or read data from SRAM through the APB interface or SI.E. User needs \u000d\u000ato set the effective starting address of SRAM for each endpoint buffer through \u000d\u000abuffer segmentation register (USBD_BUFSEG0~24).\u000d\u000aThere are 25 endpoints in this controller. Each of the endpoint can be configured \u000d\u000aas IN or OUT endpoint. All the operations including Control, Bulk, Interrupt and \u000d\u000aIsochronous transfer are implemented in this block. The block of \u201cEndpoint \u000d\u000aControl\u201d is also used to manage the data sequential synchronization, endpoint \u000d\u000astates, current start address, transaction status, and data buffer status for each \u000d\u000aendpoint.\u000d\u000aThere are five different interrupt events in this controller. They are the no-eventwake-up, device plugin or plug-out event, USB events, such as IN ACK, OUT \u000d\u000aACK, and BUS events, such as suspend and resume and SOF event, receive Start \u000d\u000aof Frame(SOF) packet in every 1ms event. Any event will cause an interrupt, and \u000d\u000ausers just need to check the related event flags in interrupt event status register\u000d\u000a(USBD_INTSTS) to acknowledge what kind of interrupt occurring, and then \u000d\u000acheck the related USB Endpoint Status Register (USBD_EPSTS0~3) to \u000d\u000aacknowledge what kind of event occurring in this endpoint.\u000d\u000aA software-disconnect function is also supported for this USB controller. It is used \u000d\u000ato simulate the disconnection of this device from the host. If user enables SE0 bit \u000d\u000a(USBD_SE0), the USB controller will force the output of USB_D+ and USB_Dto level low and its function is disabled. After disabling the SE0 bit, host will \u000d\u000aenumerate the USB device again.\u000d\u000aFor more information on the Universal Serial Bus, please refer to Universal Serial \u000d\u000aBus Specification Revision 1.1.","Nuvoton Technology Corporation\u000d\u000a134\u000d\u000aFeatures\u000d\u000a\u2022 Compliant with USB 2.0 Full-Speed specification\u000d\u000a\u2022 Provides 1 interrupt vector with 5 different interrupt events (NEVWK, \u000d\u000aVBDET, USB, BUS and SOF)\u000d\u000a\u2022 Supports Control/Bulk/Interrupt/Isochronous transfer type\u000d\u000a\u2022 Supports suspend function when no bus activity existing for 3ms\u000d\u000a\u2022 Supports 25 endpoints for configurable\u000d\u000aControl/Bulk/Interrupt/Isochronous transfer types and maximum 1.5 \u000d\u000aKbyte buffer size\u000d\u000a\u2022 Provides remote wake-up capability\u000d\u000a\u2022 Supports double buffer function\u000d\u000a\u2022 Supports VBUS plug in / out or resume wake up from Power-down mode\u000d\u000a\u2022 Supports USB 2.0 Link Power Management (LPM)\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a135\u000d\u000aUSB 1.1 Host Controller (USBH)\u000d\u000aOverview\u000d\u000aThis chip is equipped with two USB 1.1 FS Host Controller (USBH) that supports \u000d\u000aOpen Host Controller Interface (OpenHCI, OHCI) Specification, a register-level \u000d\u000adescription of a host controller, to manage the\u000d\u000adevices and data transfer of Universal Serial Bus (USB). USBH0 and USBH1 are \u000d\u000athe companion host controller of HSUSBH0 and HSUSBH1 respectively.\u000d\u000aEach USBH supports an integrated Root Hub with a USB port, a DMA for realtime data transfer between system memory and USB bus, port power control and \u000d\u000aport overcurrent detection.\u000d\u000aThe USBH is responsible for detecting the connect and disconnect of USB devices, \u000d\u000amanaging data transfer, collecting status and activity of USB bus, providing power \u000d\u000acontrol and detecting overcurrent of attached USB devices.\u000d\u000aFeatures\u000d\u000a\u2022 Compliant with Universal Serial Bus (USB) Specification Revision 2.0\u000d\u000a\u2022 Supports Open Host Controller Interface (OpenHCI) Specification \u000d\u000aRevision 1.0\u000d\u000a\u2022 Supports full-speed (12Mbps) and low-speed (1.5Mbps) USB devices\u000d\u000a\u2022 Supports Control, Bulk, Interrupt, Isochronous and Split transfers\u000d\u000a\u2022 Supports an integrated Root Hub\u000d\u000a\u2022 Supports port power control and port overcurrent detection\u000d\u000a\u2022 Supports DMA for real-time data transfer","Nuvoton Technology Corporation\u000d\u000a136\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a137\u000d\u000aUSB 1.1 On-the-Go (OTG)\u000d\u000aOverview\u000d\u000aThe OTG controller interfaces to USB PHY and USB controllers which consist of \u000d\u000aan USB 1.1 host controller and an USB 2.0 FS device controller. The OTG \u000d\u000acontroller supports HNP and SRP protocols defined in the \u201cOn-The-Go and \u000d\u000aEmbedded Host Supplement to the USB 2.0 Revision 2.0 Specification\u201d.\u000d\u000aAn USB frame, including USB host, USB device, and OTG controller, can be \u000d\u000aconfigured as Host-only, Device-only, ID dependent or OTG device mode defined \u000d\u000ain USBROLE (SYS_USBPHY[1:0]). In Host-only mode, the USB frame acts as \u000d\u000aUSB host. The USB frame can support both full-speed and low-speed transfer. In \u000d\u000aDevice-only mode, the USB frame acts as USB device. USB device support fullspeed transfer. In ID dependent mode, the USB frame can be USB Host or USB \u000d\u000adevice depending on USB_ID pin state. In OTG device mode, the role of USB \u000d\u000aframe depends on the definition of OTG specification. The USB frame only \u000d\u000asupports full-speed transfer when OTG device acts as a peripheral.\u000d\u000aFeatures\u000d\u000a\u2022 Built-in USB PHY\u000d\u000a\u2022 Configurable to operate as:\u000d\u000a- Host-only\u000d\u000a- Device-only\u000d\u000a- ID dependent: The role of USB frame is only dependent on \u000d\u000aUSB_ID pin state -- as USB Host (USB_ID pin is at low) or \u000d\u000aUSB Device (USB_ID pin is at high). Both HNP and SRP \u000d\u000aprotocols are not supported\u000d\u000a- OTG device: depends on USB_ID pin state to be A-device \u000d\u000a(USB_ID pin is low) or B-device (USB_ID pin is high). HNP \u000d\u000aand SRP protocols are supported","Nuvoton Technology Corporation\u000d\u000a138\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a139\u000d\u000aHigh Speed USB 2.0 Device Controller (HSUSBD)\u000d\u000aOverview\u000d\u000aThe USB device controller interfaces the AHB bus and the UTMI bus. The USB \u000d\u000acontroller contains both the AHB master interface and AHB slave interface. CPU \u000d\u000aprograms the USB controller registers through the AHB slave interface. For IN or \u000d\u000aOUT transfer, the USB device controller needs to write data to memory or read \u000d\u000adata from memory through the AHB master interface. The USB device controller \u000d\u000ais compliant with USB 2.0 specification and it contains 18 configurable endpoints \u000d\u000ain addition to control endpoint. These endpoints could be configured to BULK, \u000d\u000aINTERRUPT or ISO. The USB device controller has a built-in DMA to relieve \u000d\u000athe load of CPU.\u000d\u000aFeatures\u000d\u000a\u2022 USB Specification revision 2.0 compliant\u000d\u000a\u2022 Supports 18 configurable endpoints in addition to Control Endpoint\u000d\u000a\u2022 Each of the endpoints can be Isochronous, Bulk or Interrupt and either \u000d\u000aIN or OUT direction\u000d\u000a\u2022 Three different operation modes of an in-endpoint \uff0d Auto Validation \u000d\u000amode, Manual Validation mode, Fly mode\u000d\u000a\u2022 Supports DMA operation\u000d\u000a\u2022 Supports Endpoint Maximum Packet Size up to 1024 bytes\u000d\u000a\u2022 Supports VBUS / Resume wakeup from system power-down mode\u000d\u000a\u2022 Supports Link Power Management (LPM) feature\u000d\u000a\u2022 Supports Battery Charging 1.2 (BC1.2) feature","Nuvoton Technology Corporation\u000d\u000a140\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a141\u000d\u000aUSB 2.0 and 1.1 Host Controller (HSUSBH and USBH1)\u000d\u000aOverview\u000d\u000aThis chip is equipped with an individual USB 2.0 Host Controller (HSUSBH) that \u000d\u000asupport Enhanced Host Controller Interface (EHCI) Specification, and an USB \u000d\u000a1.1 Host Controller (USBH1) that support Open Host Controller Interface (OHCI) \u000d\u000aSpecification, a register-level description of a host controller, to manage the \u000d\u000adevices and data transfer of Universal Serial Bus (USB).\u000d\u000aThe whole HSUSBH/USBH1 supports an integrated Root Hub with a USB port, \u000d\u000aa DMA for real-time data transfer between system memory and USB bus, port \u000d\u000apower control and port overcurrent detection.\u000d\u000aThe whole HSUSBH/USBH1 is responsible for detecting the connect and \u000d\u000adisconnect of USB devices, managing data transfer, collecting status and activity \u000d\u000aof USB bus, providing power control and detecting overcurrent of attached USB \u000d\u000adevices.\u000d\u000aFeatures\u000d\u000a\u2022 Compliant with Universal Serial Bus (USB) Specification Revision 2.0\u000d\u000a\u2022 Supports Enhanced Host Controller Interface (EHCI) Specification \u000d\u000aRevision 1.0\u000d\u000a\u2022 Supports Open Host Controller Interface (OpenHCI) Specification \u000d\u000aRevision 1.0\u000d\u000a\u2022 Supports high-speed (480Mbps), full-speed (12Mbps) and low-speed \u000d\u000a(1.5Mbps) USB devices\u000d\u000a\u2022 Supports Control, Bulk, Interrupt, Isochronous and Split transfers\u000d\u000a\u2022 Supports an integrated Root Hub\u000d\u000a\u2022 Supports a port routing logic to route full/low speed device to OHCI \u000d\u000acontroller\u000d\u000a\u2022 Supports port power control and port overcurrent detection\u000d\u000a\u2022 Supports DMA for real-time data transfer\u000d\u000a\u2022 Supports OTG function","Nuvoton Technology Corporation\u000d\u000a142\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a143\u000d\u000aHigh Speed USB 2.0 On-The-Go (HSOTG)\u000d\u000aOverview\u000d\u000aThe HSOTG controller interfaces to USB PHY and USB controllers which consist \u000d\u000aof a USB 2.0 host controller and a USB 2.0 HS device controller. The OTG \u000d\u000acontroller supports HNP and SRP protocols defined in the \u201cOn-The-Go and \u000d\u000aEmbedded Host Supplement to the USB 2.0 Revision 1.3 Specification\u201d.\u000d\u000aUSB frame, including USB host, USB device, and OTG controller, can be \u000d\u000aconfigured as Host-only, Device-only, ID dependent or OTG device mode defined \u000d\u000ain HSUSBROLE (SYS_USBPHY[17:16]). In Host-only mode, USB frame acts \u000d\u000aas USB host. USB frame can support high-speed, full-speed and lowspeed\u000d\u000atransfer. In Device-only mode, USB frame acts as USB device. USB frame \u000d\u000asupports high-speed and full-speed transfer. In ID dependent mode, USB frame \u000d\u000acan be USB Host or USB device depends on USB_ID pin state. In OTG device \u000d\u000amode, the role of USB frame depends on the definition of OTG specification. USB \u000d\u000aframe supports high-speed and full-speed transfer when OTG device acts as a\u000d\u000aperipheral.\u000d\u000aFeatures\u000d\u000a\u2022 Built in USB PHY\u000d\u000a\u2022 Configurable to operate as:\u000d\u000a- Host-only\u000d\u000a- Device-only\u000d\u000a- ID dependent: The USB frame can act as USB Host (USB_ID \u000d\u000apin is at low) or USB Device (USB_ID pin is at high) only \u000d\u000adepending on USB_ID pin state. HNP or SRP protocol is not \u000d\u000asupported\u000d\u000a- OTG device: It can be A-device (USB_ID pin state is at low) or \u000d\u000aB-device (USB_ID pin state is at high) depending on USB_ID \u000d\u000apin state. HNP and SRP protocols are supported","Nuvoton Technology Corporation\u000d\u000a144\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a145\u000d\u000aUSB Type C Power Delivery Controller (UTCPD)\u000d\u000aOverview\u000d\u000aThe UTCPD is a USB Type-C Power Delivery controller. UTCPD integrates a \u000d\u000aPower Delivery PHY with BMC encoding and decoding, protocol layer function \u000d\u000aand USB Type-C Configuration Channel (CC) logic to fulfill USB Type-C CC \u000d\u000asensing and control and USB PD message delivery function.\u000d\u000aUTCPD is compliant with USB Type-C 1.2 and USB Power Delivery3.0.\u000d\u000aFeatures\u000d\u000aBasic Functionality\u000d\u000a\u2022 Compliant with USB Type-C Cable and Connector Specification Rev1.2 \u000d\u000a(TYPE-C)\u000d\u000a\u2022 Supports UFP, DFP and DRD data roles\u000d\u000a\u2022 Supports Sink, Source and DRP power roles\u000d\u000a\u2022 Dual-Role Power functionality with Autonomous DRP toggle\u000d\u000a\u2022 Supports CC1 and CC2 signals\u000d\u000a\u2022 Monitors VBUS voltage,using system EADC\u000d\u000a\u2022 Debounces attachment detection on either VBUS or CCx signals\u000d\u000a\u2022 Detects connection removal via either VBUS or CCx signals\u000d\u000a\u2022 Compliant with USB Power Delivery Specification Rev3.0, V1.2 (PD)\u000d\u000a\u2022 Supports Power Delivery PHY Layer\u000d\u000aSystem Control and Monitoring\u000d\u000a\u2022 Provides controls for VBUS both \u201cforce\u201d and \u201cbleed\u201d bulk capacitors \u000d\u000adischarge\u000d\u000aWake-up from Idle mode and NPD0-2","Nuvoton Technology Corporation\u000d\u000a146\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a147\u000d\u000aEnhanced 12-bit Analog-to-Digital Converter (EADC)\u000d\u000aOverview\u000d\u000aThe chip contains one 12-bit successive approximation analog-to-digital converter \u000d\u000a(SAR EADC converter) with 24 external input channels and 4 internal channels. \u000d\u000aThe EADC converter can be started by software trigger, EPWM0/1 triggers, \u000d\u000aBPWM0/1 triggers, timer0~3 overflow pulse triggers, ADINT0 interrupt EOC \u000d\u000a(End of conversion) and ADINT1 interrupt EOC pulse trigger, external pin \u000d\u000a(EADC0_ST) input signal, and ACMP0~3 triggers.\u000d\u000aFeatures\u000d\u000a\u2022 Analog input voltage range: 0~ VREF (Max to 3.6V)\u000d\u000a\u2022 Reference voltage from VREF pin\u000d\u000a\u2022 12-bit resolution and 10-bit accuracy is guaranteed\u000d\u000a\u2022 Up to 24 single-end analog external input channels or 12 pair fully \u000d\u000adifferential analog input channels\u000d\u000a\u2022 Up to 4 internal channels, they are AVDD/4, band-gap voltage (VBG), \u000d\u000atemperature sensor (VTEMP), and battery power/4 (VBAT/4)\u000d\u000a\u2022 Four EADC interrupts (ADINT0~3) with individual interrupt vector \u000d\u000aaddresses for EADC\u000d\u000a\u2022 Maximum EADC clock frequency is 100 MHz for EADC\u000d\u000a\u2022 Up to 5 MSPS conversion rate for EADC\u000d\u000a\u2022 Supports calibration function and calibration interrupt\u000d\u000a\u2022 Supports internal reference voltage VREF: 1.6V, 2V, 2.5V and 3V\u000d\u000a\u2022 Up to 28 sample modules\u000d\u000a- Sample module 0~23 is configurable for EADC converter \u000d\u000achannel (EADC_CH0~23) and trigger source for each EADC\u000d\u000a- Sample module 24~27 are fixed for input sources band-gap \u000d\u000avoltage, temperature sensor, battery power/4 (VBAT/4), and \u000d\u000aAVDD/4 respectively\u000d\u000a- Double buffer for sample control logic module 0~3\u000d\u000a- Configurable sampling time for each sample module\u000d\u000a- Conversion results are held in 28 data registers with valid and \u000d\u000aoverrun indicators.","Nuvoton Technology Corporation\u000d\u000a148\u000d\u000a\u2022 Averaging (2n times, n=0~8) to support up to 12-bit result and oversampling, or called Accumulation, (2n times, n=0~8) to support up to 16-\u000d\u000abit result\u000d\u000a\u2022 Supports conversion results left-alignment\u000d\u000a\u2022 Any EADC conversion of each EADC can be started by:\u000d\u000a- Write 1 to SWTRGn (EADC_SWTRG[n], n = 0~27)\u000d\u000a- External pin EADC0_ST trigger\u000d\u000a- Timer0~3 overflow pulse triggers\u000d\u000a- ADINT0 and ADINT1 interrupt EOC (End of conversion) pulse \u000d\u000atriggers\u000d\u000a- EPWM/BPWM triggers\u000d\u000a- ADINT0 and ADINT1 interrupt SOC (Start of conversion) \u000d\u000apulse trigger with delay counter\u000d\u000a- ACMP0, ACMP1, ACMP2, and ACMP3 interrupt pulse \u000d\u000atriggers\u000d\u000a\u2022 Supports PDMA transfer\u000d\u000a\u2022 Conversion Result Monitor by Compare Mode","Nuvoton Technology Corporation\u000d\u000a149\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a150\u000d\u000aController Area Network with Flexible Data Rate (CAN FD)\u000d\u000aOverview\u000d\u000aThe CAN FD controller performs communication according to ISO 11898-1:2015 \u000d\u000aand need be connected to additional transceiver hardware for the physical layer.\u000d\u000aThe CAN FD controller consists of one CAN Core, Memory access control and \u000d\u000aarbiter, Tx Handler, Rx Handler, a shared Message RAM and a 32-bit AHB \u000d\u000ainterface for control and configuration registers.\u000d\u000aThe message storage is intended to be a single-ported Message RAM outside of \u000d\u000athe CAN Core module. It is connected to the CAN Core via the memory control \u000d\u000ainterface. The Message RAM implements filters, receive FIFOs, transmit event \u000d\u000aFIFOs and transmit FIFOs.\u000d\u000aAll functions concerning the handling of messages are implemented by the Rx \u000d\u000aHandler and the Tx Handler. The Rx Handler manages message acceptance \u000d\u000afiltering, the transfer of received messages from the CAN Core to the Message \u000d\u000aRAM as well as providing received message status information. The Tx Handler \u000d\u000ais responsible for the transfer of transmit messages from the Message RAM to the \u000d\u000aCAN Core as well as providing transmitted status information.\u000d\u000aThe controller\u2019s clock domain concept allows the separation among CAN Core \u000d\u000aclock and the AHB clock (HCLK). In order to achieve a stable function of the \u000d\u000aCAN FD controller, the AHB clock must always be faster than or equal to the \u000d\u000aCAN core clock.\u000d\u000aFeatures\u000d\u000a\u2022 Conform with CAN protocol version 2.0 part A, B and ISO 11898-1: \u000d\u000a2015\u000d\u000a\u2022 CAN FD with up to 64 data bytes supported\u000d\u000a\u2022 CAN Error Logging\u000d\u000a\u2022 AUTOSAR support\u000d\u000a\u2022 SAE J1939 support\u000d\u000a\u2022 Improved acceptance filtering\u000d\u000a\u2022 Two configurable Receive FIFOs\u000d\u000a\u2022 Separate signaling on reception of High Priority Messages","Nuvoton Technology Corporation\u000d\u000a151\u000d\u000a\u2022 Configurable Transmit FIFO, Transmit Queue, Transmit Event FIFO\u000d\u000a\u2022 Direct Message RAM access for CPU\u000d\u000a\u2022 Programmable loop-back test mode\u000d\u000a\u2022 Maskable module interrupts\u000d\u000a\u2022 Two clock domains (CAN Core clock and AHB clock)\u000d\u000a\u2022 Power-down support\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a152\u000d\u000aCRC Controller (CRC)\u000d\u000aOverview\u000d\u000aThe Cyclic Redundancy Check (CRC) generator can perform CRC calculation \u000d\u000awith four common polynomials CRC-8, CRC-16, CRC-32, and 32-bits \u000d\u000aprogrammable polynomials settings.\u000d\u000aFeatures\u000d\u000a\u2022 Supports four common polynomials CRC-8, CRC-16, and CRC-32\u000d\u000a\u2022 Programmable seed value\u000d\u000a\u2022 Programmable polynomials settings\u000d\u000a\u2022 Supports programmable order reverse setting for input data and CRC \u000d\u000achecksum\u000d\u000a\u2022 Supports programmable 1\u2019s complement setting for input data and CRC \u000d\u000achecksum\u000d\u000a\u2022 Supports 8/16/32-bit of data width\u000d\u000a- 8-bit write mode: 1-AHB clock cycle operation\u000d\u000a- 16-bit write mode: 2-AHB clock cycle operation\u000d\u000a- 32-bit write mode: 4-AHB clock cycle operation\u000d\u000a\u2022 Supports Master mode","Nuvoton Technology Corporation\u000d\u000a153\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a154\u000d\u000aCryptographic Accelerator (CRYPTO)\u000d\u000aOverview\u000d\u000aThe Crypto (Cryptographic Accelerator) includes a secure pseudo random number \u000d\u000agenerator (PRNG) core and supports AES, SHA/HMAC, RSA, and ECC \u000d\u000aalgorithms.\u000d\u000aThe PRNG core supports 128, 163, 192, 224, 233, 255, 256, 283, 384, 409,512,\u000d\u000a521 and 571 bits random number generation. (283~571 bits are only generated for \u000d\u000aKey Store).\u000d\u000aThe AES accelerator is an implementation fully compliant with the AES (Advance \u000d\u000aEncryption Standard) encryption and decryption algorithm. The AES accelerator \u000d\u000asupports ECB, CBC, CFB, OFB, CTR, CBCCS1, CBC-CS2, CBC-CS3, CCM \u000d\u000aand GCM mode.\u000d\u000aThe SHA accelerator is an implementation fully compliant with the SM3, SHA160, SHA-224, SHA-256, SHA-384, SHA-512, SHA-512/t, SHA3-224, SHA3-\u000d\u000a256, SHA3-384, SHA3-512, SHAKE128 and SHAKE256. The SHA accelerator \u000d\u000asupports HMAC (Keyed-Hash Message Authentication Code) algorithms include \u000d\u000aHMAC-SHA-160, HMAC-SHA-224, HMAC-SHA-256, HMAC-SHA-384, \u000d\u000aHMAC-SHA-512, HMAC-SHA3-224, HMAC-SHA3-256, HMAC-SHA3-384, \u000d\u000aand HMAC-SHA3-512.\u000d\u000aThe ECC accelerator is an implementation fully compliant with elliptic curve \u000d\u000acryptography by using polynomial basis in binary field and prime filed.\u000d\u000aThe RSA accelerator is an implementation fully compliant with RSA\u000d\u000acryptography, CRT decryption algorithm and side-channel attack\u000d\u000acountermeasures.\u000d\u000aThe Crypto can get key from Key Store and/or put the key to Key Store determined\u000d\u000aby the function of each accelerator.\u000d\u000aFeatures\u000d\u000a\u2022 PRNG","Nuvoton Technology Corporation\u000d\u000a155\u000d\u000a- Supports 128, 163, 192, 224, 233, 255, 256, 283, 384, 409, 512, \u000d\u000a521 and 571 bits random number generation (283~571 bits are \u000d\u000aonly generated for Key Store)\u000d\u000a- Can take the true random number seed from TRNG\u000d\u000a\u2022 AES\u000d\u000a- Supports FIPS NIST 197\u000d\u000a- Supports SP800-38A and addendum\u000d\u000a- Supports 128, 192, and 256 bits key\u000d\u000a- Supports both encryption and decryption\u000d\u000a- Supports ECB, CBC, CFB, OFB, CTR, CBC-CS1, CBC-CS2 \u000d\u000aand CBC-CS3 modes\u000d\u000a- Supports CCM mode, GCM mode and GMAC function\u000d\u000a- Supports SM4 block cipher algorithm\u000d\u000a- Supports key expander for key expansion in FIPS NIST 197\u000d\u000a- Supports one technique to improve side-channel attack \u000d\u000aprotection ability\u000d\u000a\u2022 SHA\u000d\u000a- Supports FIPS NIST 180, 180-2, 180-4\u000d\u000a- Supports SHA-160, SHA-224, SHA-256, SHA-384, SHA-512 \u000d\u000aand SHA-512/t\u000d\u000a- Supports SHA3-224, SHA3-256, SHA3-384, SHA3-512, \u000d\u000aSHAKE128 and SHAKE256\u000d\u000a- Supports SM3 Cryptographic Hash Algorithm\u000d\u000a\u2022 HMAC\u000d\u000a- Supports FIPS NIST 180, 180-2, 180-4\u000d\u000a- Supports HMAC-SHA-160, HMAC-SHA-224, HMAC-SHA256, HMAC-SHA-384, and HMAC-SHA-512\u000d\u000a- Supports HMAC-SHA3-224, HMAC-SHA3-256, HMACSHA3-384, and HMAC-SHA3-512\u000d\u000a\u2022 ECC\u000d\u000a- Supports both prime field GF(p) and binary filed GF(2m)\u000d\u000a- Supports NIST P-192, P-224, P-256, P-384, and P-521\u000d\u000a- Supports NIST B-163, B-233, B-283, B-409, and B-571\u000d\u000a- Supports NIST K-163, K-233, K-283, K-409, and K-571\u000d\u000a- Supports Curve25519\u000d\u000a- Supports Edwards curve","Nuvoton Technology Corporation\u000d\u000a156\u000d\u000a- Supports Public Key Cryptographic Algorithm SM2 Based on \u000d\u000aElliptic Curves\u000d\u000a- Supports point multiplication, addition and doubling operations \u000d\u000ain GF(p) and GF(2m)\u000d\u000a- Supports modulus division, multiplication, addition and \u000d\u000asubtraction operations in GF(p)\u000d\u000a- Supports modulo operation with 1088-bits dividend and 544-\u000d\u000abits divisor in GF(p)\u000d\u000a- Supports modulus exponential operation and square root \u000d\u000aoperation in GF(p)\u000d\u000a- Supports three techniques to improve side-channel attack \u000d\u000aprotection ability\u000d\u000a\u2022 RSA\u000d\u000a- Supports both encryption and decryption with 1024, 2048, 3072 \u000d\u000aand 4096 bits\u000d\u000a- Supports CRT decryption with 2048, 3072 and 4096 bits\u000d\u000a- Supports three techniques to improve side-channel attack \u000d\u000aprotection ability","Nuvoton Technology Corporation\u000d\u000a157\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a158\u000d\u000aKey Store (KS)\u000d\u000aOverview\u000d\u000aThe Key Store (KS) is the key management device and has a 4 Kbytes SRAM, 8 \u000d\u000aKbytes Flash and OTP for key storage. The Key Store is capable of providing a \u000d\u000acrypto engine to access or storing the key while encryption, decryption and \u000d\u000ageneration. The Key Store supports revoke key operation if the key is unused. The \u000d\u000aKey Store is able to protect the key by integrity checking, silent access, data \u000d\u000ascrambling and data remanence prevention for SRAM.\u000d\u000aFeatures\u000d\u000a\u2022 Supports programming interface for key management\u000d\u000a\u2022 Supports key size required for Cryptographic engine from 128-bit to \u000d\u000a4096-bit\u000d\u000a\u2022 Supports up to 32 SRAM keys by 4 Kbytes SRAM\u000d\u000a\u2022 Supports up to 32 Flash keys by 8 Kbytes Flash\u000d\u000a\u2022 Supports 16 OTP keys, maximum key size is 256-bit\u000d\u000a\u2022 Supports crypto engine access or store key in key store directly\u000d\u000a\u2022 Supports to store AES/HMAC/ECC/RSA/CPU key\u000d\u000a\u2022 Supports to store key from KDF\u000d\u000a\u2022 Supports to store RSA middle data for CRT and SCAP mode\u000d\u000a\u2022 Supports ECDH operation with ECC and PRNG engine\u000d\u000a\u2022 Supports revoke operation\u000d\u000a\u2022 Supports integrity checking\u000d\u000a\u2022 Supports data scrambling\u000d\u000a\u2022 Supports silent access for side-channel protection\u000d\u000a\u2022 Supports data remanence prevention at SRAM\u000d\u000a\u2022 Supports auto verify function\u000d\u000a\u2022 Supports lock function for OTP keys","Nuvoton Technology Corporation\u000d\u000a159\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a160\u000d\u000aKeypad Interface (KPI)\u000d\u000aOverview\u000d\u000aThe Keypad Interface (KPI) is an APB slave with configurable minimum 2-row \u000d\u000aup to 6-row scan output and minimum 1-column up to 8-column scan input. Any \u000d\u000akeys in the array pressed or released are debounced and generate an interrupt.\u000d\u000aThe KPI supports release multiple keys and press multiple keys scan interrupt. \u000d\u000aThe interrupt is generated whenever it detects any key in the keypad pressing or \u000d\u000areleasing. User can know the interrupt source by querying KPI_STATUS register.\u000d\u000aFeatures\u000d\u000a\u2022 Matrix keypad interface (maximum 6x8 array, and minimum 2x1 array)\u000d\u000a\u2022 Programmable de-bounce time\u000d\u000a\u2022 Generates interrupt and updates all the keys (maximum 48 keys, \u000d\u000aminimum 2 keys) information (press/release) every time the user \u000d\u000apressing or releasing\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a161\u000d\u000aAwake Filter (AWF)\u000d\u000aOverview\u000d\u000aThe Awake Filter can filter the received data that meets preset threshold \u000d\u000aconditions, and will issue an interrupt if conditions meet and interrupt enabled.\u000d\u000aFeatures\u000d\u000a\u2022 Present as memory in system\u000d\u000a\u2022 Supports configurable threshold conditions(high threshold and low \u000d\u000athreshold)\u000d\u000a\u2022 Supports 8-word buffer\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a162\u000d\u000aDigital Microphone Inputs (DMIC)\u000d\u000aOverview\u000d\u000aThe DMIC subsystem includes four-channel digital PDM (Pulse Density \u000d\u000aModulation) microphone interface and Voice Active Detection (VAD). \u000d\u000aDMICn_DAT inputs are able to handle two digital microphones by selecting them \u000d\u000aalternately for each half of the clock cycle.\u000d\u000aThere are voice detections in DMIC subsystem which is Voice Active Detection\u000d\u000a(VAD).\u000d\u000aThe Voice Active Detection (VAD) analyzes the PCM data from DMIC channel \u000d\u000a0, and consists of a SINC filter, a biquad filter and a VAD module. The idea of \u000d\u000athe VAD is to calculate the short-term signal power and long-term signal power \u000d\u000aof the input signal, and then compare the short-term power with the short-term \u000d\u000apower threshold. Moreover, the deviation of the short-term power and long-term \u000d\u000apower can be calculated and compared with the threshold deviation. Based on \u000d\u000athese two results, if the input signal is voice or not can be determined.\u000d\u000aFeatures\u000d\u000a\u2022 DMIC (four-channel digital microphone interface)\u000d\u000a\u2022 Provides one 32-level FIFO data buffers for receiving\u000d\u000a\u2022 Generates interrupt requests when buffer levels cross a programmable \u000d\u000aboundary\u000d\u000a\u2022 Supports LPPDMA transfer\u000d\u000a\u2022 Supports up to four channel digital microphones\u000d\u000a\u2022 Four digital PDM microphone inputs that can be used simultaneously\u000d\u000a\u2022 Supports High Pass Filter (HPF) to removed DC offset from digital \u000d\u000amicrophone\u000d\u000a\u2022 Supports volume gain (+36dB~-128dB) 0.125dB step setting with zero \u000d\u000across gain change\u000d\u000a\u2022 Support microphone operates at clock frequency between 1 MHz and 6 \u000d\u000aMHz\u000d\u000a\u2022 VAD (Voice Active Detection)\u000d\u000a\u2022 Low power consumption\u000d\u000a\u2022 Configuration detect levels","Nuvoton Technology Corporation\u000d\u000a163\u000d\u000a\u2022 Supports NPD0/1/3/IDLE mode VAD wake-up function\u000d\u000a\u2022 Generates interrupt requests when voice detected\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a164\u000d\u000aKey Derivation Function (KDF)\u000d\u000aOverview\u000d\u000aThe KDF is an implementation fully compliant with RFC 5869 HKDF and NIST \u000d\u000aSP 800-108 feedback mode. The pseudorandom function (PRF) of this KDF is \u000d\u000aHMAC-SHA256.\u000d\u000aThe KDF derives an output key, or called output keying material, from a secret \u000d\u000akey, an input keying material (IKM, only for RFC 5869 HKDF) and a key \u000d\u000ainformation (info). The source of salt and above info can be configured by \u000d\u000aregisters or randomly generated by PRNG with seed from TRNG. The output key,\u000d\u000aor called output keying material (OKM), can be stored in KeyStore or read from \u000d\u000aregisters.\u000d\u000aFeatures\u000d\u000a\u2022 Supports IETF Protocols RFC 5869\u000d\u000a\u2022 Supports NIST SP 800-108 feedback mode\u000d\u000a\u2022 Supports 65280-bit output key at most\u000d\u000a- KDF output size is 256 bits; supports up to 255 expansions to \u000d\u000areach 65280-bit output key\u000d\u000a\u2022 Supports output key stored in KeyStore\u000d\u000a\u2022 Supports input keying material from NVM\u000d\u000a\u2022 Supports key information and salt from random value","Nuvoton Technology Corporation\u000d\u000a165\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a166\u000d\u000aNeural Network Processing Unit (NPU)\u000d\u000aOverview\u000d\u000aNeural network processing unit (NPU) is an accelerator improving the \u000d\u000aperformance of processing neural network. With the help of Arm NPU Ethos-U55, \u000d\u000aNPU supports some key operations of neural network inference, such as \u000d\u000aconvolution, pooling, activation. Ethos-U55 helps to do inference of the neural\u000d\u000anetwork model in TensorFlow Lite for Microcontrollers framework by executing \u000d\u000athe stream of commands, which are operations that might be part of or the whole \u000d\u000aneural network compiled by Vela compiler.\u000d\u000aFeatures\u000d\u000a\u2022 Supports 8-bit and 16-bit integer operation\u000d\u000a- Activations: 16-bit signed integers\u000d\u000a- Weights: 8-bit signed integers\u000d\u000a\u2022 Implements 256 MACs, supporting up to 100GOPs\u000d\u000a\u2022 Supports Performance Monitoring Unit\u000d\u000a\u2022 Support neural network model protection (NPU_XOM, \u000d\u000aNPU_DR_XOM)","Nuvoton Technology Corporation\u000d\u000a167\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a168\u000d\u000aOn-The-Fly Cipher (OTFC)\u000d\u000aOverview\u000d\u000aThe OTFC (On-The-Fly Cipher) accelerator, integrates an address cipher function \u000d\u000awith AES-128 encryption, supports on-the-fly both encryption and decryption for \u000d\u000aexternal memory controller. There are four 128-bit alignment protection regions \u000d\u000ain external memory at most. The OTFC can get AES-128 key from key store.\u000d\u000aFeatures\u000d\u000a\u2022 Supports both on-the-fly encryption and on-the-fly decryption for \u000d\u000aexternal memory controller\u000d\u000a\u2022 Supports four 128-bit alignment protection regions in external memory\u000d\u000a\u2022 Supports address cipher function\u000d\u000a\u2022 Supports AES encryption with 128-bits key\u000d\u000a\u2022 Supports AES 128-bits key from key store\u000d\u000a\u2022 Supports one technique to improve side-channel attack protection \u000d\u000a(SCAP) ability\u000d\u000a\u2022 Supports two techniques to improve differential fault analysis protection \u000d\u000a(DFAP) ability","Nuvoton Technology Corporation\u000d\u000a169\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a170\u000d\u000aAnalog Comparator Controller (ACMP)\u000d\u000aOverview\u000d\u000aThe chip provides two ACMP controllers, each controller supports 2 comparators. \u000d\u000aController ACMP01 supports ACMP0 and ACMP1; controller ACMP23 supports \u000d\u000aACMP2 and ACMP3. The comparator output is logic 1 when positive input is \u000d\u000agreater than negative input; otherwise, the output is 0. Each comparator can be \u000d\u000aconfigured to generate an interrupt when the comparator output value changes.\u000d\u000aFeatures\u000d\u000a\u2022 Analog input voltage range: 0 ~ AVDD (voltage of AVDD pin)\u000d\u000a\u2022 Up to four rail-to-rail analog comparators\u000d\u000a\u2022 Supports hysteresis function\u000d\u000a\u2022 Supports wake-up function\u000d\u000a\u2022 Selectable input sources of positive input and negative input\u000d\u000a\u2022 ACMP0 support:\u000d\u000a- 4 multiplexed I/O pins at positive sources: ACMP0_P0, \u000d\u000aACMP0_P1, ACMP0_P2, ACMP0_P3\u000d\u000a- 5 negative sources: ACMP0_N, CRV0, VBG, DAC0_OUT,\u000d\u000aDAC1_OUT\u000d\u000a\u2022 ACMP1 support:\u000d\u000a- 4 multiplexed I/O pins at positive sources: ACMP1_P0, \u000d\u000aACMP1_P1, ACMP1_P2, ACMP1_P3\u000d\u000a- 5 negative sources: ACMP1_N, CRV1, VBG, DAC0_OUT,\u000d\u000aDAC1_OUT\u000d\u000a\u2022 ACMP2 support:\u000d\u000a- 4 multiplexed I/O pins at positive sources: ACMP2_P0, \u000d\u000aACMP2_P1, ACMP2_P2, ACMP2_P3\u000d\u000a- 5 negative sources: ACMP2_N, CRV2, VBG, DAC0_OUT, \u000d\u000aDAC1_OUT\u000d\u000a\u2022 ACMP3 support:\u000d\u000a- 4 multiplexed I/O pins at positive sources: ACMP3_P0, \u000d\u000aACMP3_P1, ACMP3_P2, ACMP3_P3\u000d\u000a- 5 negative sources: ACMP3_N, CRV3, VBG, DAC0_OUT, \u000d\u000aDAC1_OUT","Nuvoton Technology Corporation\u000d\u000a171\u000d\u000a\u2022 ACMP0 and ACMP1 share one ACMP interrupt vector, and ACMP2 and \u000d\u000aACMP3 share one ACMP interrupt vector\u000d\u000a\u2022 Interrupts generated when compare results change (Interrupt event \u000d\u000acondition is programmable)\u000d\u000a\u2022 Supports triggers for break events and cycle-by-cycle control for EPWM\u000d\u000a\u2022 Supports window compare mode and window latch mode\u000d\u000a\u2022 Supports offset calibration\u000d\u000a\u2022 Supports ACMP0 event, ACMP1 event, ACMP2 event, ACMP3 event \u000d\u000abe as PDMA request source\u000d\u000a\u2022 Supports ACMP0 event, ACMP1 event, ACMP2 event, ACMP3 event \u000d\u000abe as EADC trigger source\u000d\u000a\u2022 Supports ACMP0 output, ACMP1 output, ACMP2 output, ACMP3 \u000d\u000aoutput be as Timer, LPTimer, ECAP, LPADC and EPWM trigger source\u000d\u000a\u2022 Supports ACMP0 interrupt flag, ACMP1 interrupt flag, ACMP2 \u000d\u000ainterrupt flag, ACMP3 interrupt flag be as UTCPD trigger source\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a172\u000d\u000aDigital to Analog Converter (DAC)\u000d\u000aOverview\u000d\u000aThe DAC module is a 12-bit, voltage output digital-to-analog converter. It can be \u000d\u000aconfigured to 12- or 8-bit output mode and can be used in conjunction with the \u000d\u000aPDMA controller. The DAC integrates a voltage output buffer that can be used to \u000d\u000areduce output impendence and drive external loads directly without having to add \u000d\u000aan external operational amplifier.\u000d\u000aFeatures\u000d\u000a\u2022 Analog output voltage range: 0~AVDD\u000d\u000a\u2022 Supports 12- or 8-bit output mode\u000d\u000a\u2022 Supports up to two 12-bit 1 MSPS voltage type DAC\u000d\u000a\u2022 Reference voltage from internal reference voltage (INT_VREF), VREF \u000d\u000apin\u000d\u000a\u2022 Supports voltage output buffer mode and bypass voltage output buffer \u000d\u000amode\u000d\u000a\u2022 Supports software and hardware trigger, including Timer0~3, EPWM0, \u000d\u000aEPWM1, and external trigger pin to start DAC conversion\u000d\u000a\u2022 Supports PDMA mode\u000d\u000a\u2022 Supports group mode of synchronized update capability for two DACs","Nuvoton Technology Corporation\u000d\u000a173\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a174\u000d\u000aLow Power Analog-to-Digital Converter (LPADC)\u000d\u000aOverview\u000d\u000aThe LPADC contains one 12-bit successive approximation analog-to-digital \u000d\u000aconverter (SAR A/D converter) with 24 input channels. The A/D converter \u000d\u000asupports four operation modes: Single, Burst, Single-cycle Scan and Continuous \u000d\u000aScan mode. The A/D converter can be started by software, external pin \u000d\u000a(LPADC0_ST), Low power timer 0/1, Tick timer or Wakeup I/O.\u000d\u000aFeatures\u000d\u000a\u2022 Supports external reference voltage from VREF pin\u000d\u000a\u2022 12-bit resolution and 10-bit accuracy is guaranteed\u000d\u000a\u2022 Up to 24 single-end analog input channels or 12 differential analog input \u000d\u000achannels\u000d\u000a\u2022 Maximum LPADC peripheral clock frequency is 50 MHz\u000d\u000a\u2022 Up to 2 MSPS sampling rate\u000d\u000a\u2022 Scan on enabled channels\u000d\u000a\u2022 Threshold voltage detection\u000d\u000a\u2022 Four operation modes:\u000d\u000a\u2022 An A/D conversion can be started by:\u000d\u000a\u2022 Support auto-operation mode with A/D conversion can be started by:\u000d\u000a\u2022 Each conversion result is held in data register of each channel with valid \u000d\u000aand overrun indicators\u000d\u000a\u2022 Conversion result can be compared with specified value and user can \u000d\u000aselect whether to generate an interrupt when conversion result matches \u000d\u000athe compare register setting\u000d\u000a\u2022 Supports extend sample time function (0~16383 LPADC clock)\u000d\u000a\u2022 Four internal channel from band-gap voltage (VBG), temperature sensor \u000d\u000a(VTEMP), VBAT voltage divided by 4 and AVDD voltage divided by 4\u000d\u000a\u2022 Supports LPPDMA transfer mode\u000d\u000a\u2022 Supports Calibration mode\u000d\u000a\u2022 Supports Floating Detect Function","Nuvoton Technology Corporation\u000d\u000a175\u000d\u000aBlock Diagram","Nuvoton Technology Corporation\u000d\u000a176\u000d\u000a4\u000d\u000aThe TensorFlow Framework\u000d\u000aTensorFlow is a software library for machine learning and artificial intelligence. \u000d\u000aIt can be used across a range of tasks, but is used mainly for training and inference \u000d\u000aof neural networks. It is one of the most popular deep learning frameworks, \u000d\u000aalongside others such as PyTorch. It is free and open-source software released \u000d\u000aunder the Apache License 2.0.\u000d\u000aIt was developed by the Google Brain team for Google\u2019s internal use in research \u000d\u000aand production. The initial version was released under the Apache License 2.0 in \u000d\u000a2015. In September 2019, Google released the \u000d\u000aupdated version TensorFlow 2.0.\u000d\u000aIn May 2017, Google announced TensorFlow Lite as \u000d\u000aa software stack to support machine learning models \u000d\u000afor mobile and embedded devices.\u000d\u000aIn May 2019, Google announced the TensorFlow \u000d\u000aLite Micro (also known as TensorFlow Lite for \u000d\u000aMicrocontroller, shortened to TFLM).\u000d\u000aIn 2024, the TensorFlow Lite Micro was renamed as \u000d\u000aLiteRT (https://ai.google.dev/edge/litert).","Nuvoton Technology Corporation\u000d\u000a177\u000d\u000aWhat Is TensorFlow?\u000d\u000aOn a high level, TensorFlow is a Python library that allows users to express \u000d\u000aarbitrary computation as a graph of data flows. Nodes in this graph represent \u000d\u000amathematical operations, whereas edges represent data that is communicated from \u000d\u000aone node to another. Data in TensorFlow is represented as tensors, which are \u000d\u000amultidimensional arrays (representing vectors with a 1D tensor, matrices with a \u000d\u000a2D tensor, etc.).\u000d\u000aTensorFlow basics\u000d\u000aThe basics of TensorFlow involves the essential building blocks and execution \u000d\u000aparadigms that form the foundation of its machine learning framework.\u000d\u000aTensors\u000d\u000aThe most fundamental units of data, represented as multi-dimensional arrays \u000d\u000a(scalars, vectors, or matrices) that flow through the system.\u000d\u000aTensorFlow Tensors are multi-dimensional arrays similar to NumPy arrays. \u000d\u000aTensors are immutable, meaning they can not be updated once created. Tensors \u000d\u000acan contain integers, floats, strings, and event complex numbers.\u000d\u000aimport tensorflow as tf\u000d\u000aimport numpy as np\u000d\u000ax = tf.constant([[7., 8., 9.], [10., 11., 12.]])\u000d\u000aprint(x)\u000d\u000aprint(x.shape)\u000d\u000aprint(x.dtype)\u000d\u000a# tf.Tensor(\u000d\u000a# [[ 7. 8. 9.]\u000d\u000a# [10. 11. 12.]], shape=(2, 3), dtype=float32)\u000d\u000a# (2, 3)\u000d\u000a# <dtype: \u2018float32\u2019>","Nuvoton Technology Corporation\u000d\u000a178\u000d\u000aReshaping a tensor from one shape to another while keeping the total number of \u000d\u000aelements the same:\u000d\u000aimport tensorflow as tf\u000d\u000atensor = tf.constant([[1, 2, 3], [4, 5, 6]])\u000d\u000areshaped_tensor = tf.reshape(tensor, [3, 2])\u000d\u000a# Original shape: (2, 3)\u000d\u000a# New shape: (3, 2)\u000d\u000aFlattening converts a tensor to a 1D tensor. This is often used when transitioning \u000d\u000afrom convolutional layers to dense layers within a neural network:\u000d\u000aflattended_tensor = tf.reshape(tensor, [-1])\u000d\u000a# Original shape: (2, 3)\u000d\u000a# New shape: (6,)\u000d\u000aAdding dimensions is useful for adding a batch dimension or expanding \u000d\u000adimensions for compatibility with certain operations, like broadcasting.\u000d\u000aexpanded_tensor = tf.expand_dims(tensor, axis=0)\u000d\u000a# Original shape: (2, 3)\u000d\u000a# New shape: (1, 2, 3)\u000d\u000aRemoving dimensions of size 1. This is often used after operations like \u000d\u000atf.reduce_sum with keepdims=True:\u000d\u000areduced_tensor = tf.reduce_sum(tensor, axis=1, keepdims=True)\u000d\u000asqueezed_tensor = tf.squeeze(reduced_tensor)\u000d\u000a# Original shape of reduced_tensor: (2, 1)\u000d\u000a# New shape after squeeze: (2,)","Nuvoton Technology Corporation\u000d\u000a179\u000d\u000aVariables\u000d\u000aModifiable tensors used to store and update persistent state, such as a model's \u000d\u000atrainable parameters (weights and biases) during the training process.\u000d\u000aA TensorFlow variable is used to represent state in TensorFlow programs. Keras \u000d\u000astores model parameters in a TensorFlow variable. A TensorFlow variable is also \u000d\u000aa tensor. A variable is created using\u000d\u000atf_tensor = tf.constant([[8.0, 8.0], [6.0, 5.0]])\u000d\u000atf_variable = tf.Variable(tf_tensor)\u000d\u000aprint(tf_variable)\u000d\u000a# <tf.Variable \u2018Variable:0\u2019 shape=(2, 2) dtype=float32, numpy=\u000d\u000a# array([[8., 8.],\u000d\u000a# [6., 5.]], dtype=float32)>\u000d\u000aOperations (Ops)\u000d\u000aMathematical computations (e.g., addition, matrix multiplication) that take \u000d\u000atensors as input and produce tensors as output.\u000d\u000aIn TensorFlow, operations (often called ops) are mathematic computations that \u000d\u000atake tensors as input and produce tensors as output. They represent the nodes in a \u000d\u000adataflow graph, defining the logic of a machine learning model.\u000d\u000aMathematical Operations TensorFlow supports element-wise mathematical \u000d\u000aoperations, such as addition, subtraction, multiplication, and division.\u000d\u000aimport tensorflow as tf\u000d\u000a# Creating a constant tensor\u000d\u000atensor_const = tf.constant([[1, 2], [3, 4]])\u000d\u000a# Creating a variable tensor\u000d\u000atensor_var = tf.Variable([[1, 2], [3, 4]])\u000d\u000a# Element-wise addition\u000d\u000atensor_add = tf.add(tensor_const, tensor_var)","Nuvoton Technology Corporation\u000d\u000a180\u000d\u000aAutomatic differentiation\u000d\u000aHandled primarily through the tf.GradientTape API, this concept allows the \u000d\u000aframework to automatically compute the gradients of a computation with respect \u000d\u000ato its input variables, which is essential for backpropagation.\u000d\u000aAutomatic differentiation is applied at the backpropagation stage of training \u000d\u000aneural networks. Automatic differentiation in TensorFlow is done using \u000d\u000atf.GradientTape. Inputs to this function are usually tf.Variable.\u000d\u000ax = tf.Variable(47.0)\u000d\u000awith tf.GradientTape() as tape:\u000d\u000a y = x**2\u000d\u000a# dy = 2x * dx\u000d\u000ady_dx = tape.gradient(y, x)\u000d\u000ady_dx.numpy()\u000d\u000a# 94.0\u000d\u000atf.GradientTape can be used to define custom training functions. The \u000d\u000atf.GradientTape will track all trainable variables automatically. tf.gradients \u000d\u000acomputes the gradients with respect to the weights and bias.\u000d\u000a# Given a callable model, inputs, outputs, and a learning rate\u2026\u000d\u000adef train(model, x, y, learning_rate):\u000d\u000a with tf.GradientTape() as t:\u000d\u000a # Trainable variables are automatically traced by GradientTape\u000d\u000a current_loss = loss(y, model(x))\u000d\u000a dw, db =t.gradients(current_loss, [model.w, model.b])\u000d\u000a # Subtract the gradient scaled by the learning rate\u000d\u000a model.w.assign_sub(learning_rate * dw)\u000d\u000a model.b.assign_sub(learning_rate * db)","Nuvoton Technology Corporation\u000d\u000a181\u000d\u000aInstall TensorFlow 2\u000d\u000aTo prevent conflicts with existing Python environments, it is advisable to install \u000d\u000aTensorFlow within a dedicated virtual environment.\u000d\u000a1. Open a terminal\u000d\u000a2. Make a directory and change directory to it\u000d\u000a$ mkdir -p .venv && cd .venv\u000d\u000a3. Create a new virtual environment\u000d\u000a$ python3 -m venv tf_env\u000d\u000a4. Activate the virtual environment\u000d\u000a$ source tf_env/bin/activate\u000d\u000a5. Upgrade pip to a recent version\u000d\u000a$ pip install --upgrade pip\u000d\u000a6. Install TensorFlow with pip\u000d\u000aFor CPU users\u000d\u000a$ pip install tensorflow\u000d\u000aFor GPU users\u000d\u000a$ pip install tensorflow[and-cuda]\u000d\u000a7. Verify the TensorFlow installation\u000d\u000aVerify the CPU setup\u000d\u000a$ python3 -c \u201cimport tensorflow as tf; \u000d\u000aprint(tf.__version__)\u201d\u000d\u000aVerify the GPU setup\u000d\u000a$ python3 -c \u201cimport tensorflow as tf; \u000d\u000aprint(tf.config.list_physical_devices(\u2018GPU\u000d\u000a\u2019))\u201d","Nuvoton Technology Corporation\u000d\u000a182\u000d\u000a5\u000d\u000aBuilding TensorFlow Lite Micro\u000d\u000aApplications with NuMicro\u00ae\u000d\u000aM55M1\u000d\u000aAs Edge AI gains traction across various industries, it is increasingly making \u000d\u000ainroads into the healthcare sector. By leveraging vast amounts of medical data, AI \u000d\u000acan automatically identify physiological anomalies, providing patients with early \u000d\u000adiagnostic insights and recommendations for disease prevention. Utilizing the \u000d\u000acomputational power of the Ethos-U55 microNPU on the NuMicro\u00ae M55M1, \u000d\u000aNuvoton has developed an Atrial Fibrillation (AFib) detection model by \u000d\u000aanalyzing massive labeled ECG datasets. In this chapter, the author will provide a \u000d\u000astep-by-step guide on developing AI applications for the NuMicro\u00ae M55M1. The \u000d\u000acontent covers PC hardware requirements for CUDA support, development \u000d\u000aenvironment setup, data transformation and preprocessing using the Pandas and \u000d\u000aNumPy libraries, creating a simple 1D convolution neural network in \u000d\u000aTensorFlow/Keras API, leveraging Post-training Quantization (PTQ) to \u000d\u000atransform TensorFlow model into an INT8-quantized TensorFlow Lite \u000d\u000arepresentation, and finally, the quantized model deployment with NuML toolkit.","Nuvoton Technology Corporation\u000d\u000a183\u000d\u000aAtrial fibrillation\u000d\u000aAtrial fibrillation (AFib or AF) is a common type of irregular heartbeat \u000d\u000a(arrhythmia) where the heart's upper chambers quiver instead of beating \u000d\u000aeffectively, causing a rapid, erratic pulse and making the heart less efficient at \u000d\u000apumping blood. Symptoms can include palpitations, fatigue, shortness of breath, \u000d\u000aand dizziness, but some people have no symptoms. It significantly raises the risk \u000d\u000afor stroke, heart failure, and other complications, making treatment crucial, often \u000d\u000ainvolving medications and lifestyle changes. Atrial fibrillation is diagnosed on an \u000d\u000aelectrocardiogram (ECG), an investigation performed routinely whenever an \u000d\u000airregular heartbeat is suspected.\u000d\u000aThe QRS complex is the combination of three of the graphical deflections seen \u000d\u000aon a typical electrocardiogram (ECG or EKG).","Nuvoton Technology Corporation\u000d\u000a184\u000d\u000aPC Hardware Requirements for CUDA Support\u000d\u000aTo achieve significant computational acceleration during data preprocessing and \u000d\u000atraining phases, the use of hardware supporting CUDA architecture is advisable \u000d\u000afor TensorFlow development workflows.\u000d\u000aCompute capability (CC) defines the hardware features and supported instructions \u000d\u000afor each NVIDIA GPU architecture. Find the compute capability for CUDAcapable GPU in the table below (https://developer.nvidia.com/cuda/gpus).\u000d\u000aCompute \u000d\u000aCapability Workstation/Consumer\u000d\u000a12.1 NVIDIA GB10 (DGX Spark)\u000d\u000a12.0 NVIDIA RTX PRO 6000 Blackwell Workstation \u000d\u000aEdition\u000d\u000aNVIDIA RTX PRO 6000 Blackwell Max-Q Workstation \u000d\u000aEdition\u000d\u000aNVIDIA RTX PRO 5000 Blackwell\u000d\u000aNVIDIA RTX PRO 4500 Blackwell\u000d\u000aNVIDIA RTX PRO 4000 Blackwell\u000d\u000aNVIDIA RTX PRO 4000 Blackwell SFF Edition\u000d\u000aNVIDIA RTX PRO 2000 Blackwell\u000d\u000aGeForce RTX 5090\u000d\u000aGeForce RTX 5080\u000d\u000aGeForce RTX 5070 Ti\u000d\u000aGeForce RTX 5070\u000d\u000aGeForce RTX 5060 Ti\u000d\u000aGeForce RTX 5060\u000d\u000aGeForce RTX 5050\u000d\u000a11.0 (Jetson T5000)\u000d\u000a(Jetson T4000)","Nuvoton Technology Corporation\u000d\u000a185\u000d\u000aSet up development environment\u000d\u000aIn this section, the development environment was established on Ubuntu 24.04 \u000d\u000aLTS. The following procedure outlines the installation of TensorFlow 2,\u000d\u000aJupyter Notebook within a Python virtual environment (venv) to ensure \u000d\u000adependency isolation.\u000d\u000aTo start, run the command below to update Ubuntu package index.\u000d\u000asudo apt update\u000d\u000aNow install venv package.\u000d\u000asudo apt install python3-venv\u000d\u000aCreate a new directory (.venv) and move into it.\u000d\u000amkdir -p .venv && cd .venv\u000d\u000aCreate a new Python venv virtual environment (tf_env).\u000d\u000apython3 -m venv tf_env\u000d\u000aActivate the venv virtual environment.\u000d\u000asource tf_env/bin/activate\u000d\u000aInstall the TensorFlow 2\u000d\u000apip install tensorflow[and-cuda]\u000d\u000aInstall Jupyter\u000d\u000apip install jupyter\u000d\u000aConfigure Jupyter server","Nuvoton Technology Corporation\u000d\u000a186\u000d\u000ajupyter server --generate-config\u000d\u000ajupyter server password\u000d\u000ajupyter server --show-config\u000d\u000aConfigure Jupyter lab\u000d\u000ajupyter lab --generate-config\u000d\u000ajupyter lab --show-config\u000d\u000aStart Jupyter lab from the command line\u000d\u000ajupyter lab --ip 0.0.0.0\u000d\u000aVisit http://127.0.0.1:8888/lab to access jupyterlab installation.\u000d\u000aThe Jupyter dashboard is shown below.","Nuvoton Technology Corporation\u000d\u000a187\u000d\u000aOverview of the Deep Learning workflow\u000d\u000aThe deep learning workflow typically starts with data preparation, followed by \u000d\u000amodel development, and concluding with model deployment. The key stages in \u000d\u000athe pipeline are shown in below table.\u000d\u000aStage Process Concepts\u000d\u000aData \u000d\u000aPreparation\u000d\u000aAcquisition Initial data collection\u000d\u000aLabeling/Annotation Applying labels and annotations to \u000d\u000adata\u000d\u000aPreprocessing Data cleaning and formatting\u000d\u000aNormalization Scaling data (e.g., min-max(0, 1))\u000d\u000aData \u000d\u000aPartitioning\u000d\u000aSplitting Dividing data into Training, \u000d\u000aValidation, and Test sets\u000d\u000aModel \u000d\u000aDevelopment\u000d\u000aCreating/Compiling Utilizing TensorFlow/Keras\u000d\u000aSequential API to create artificial \u000d\u000aneural networks\u000d\u000aTraining Applying techniques to prevent \u000d\u000aoverfitting using the validation data\u000d\u000aModel \u000d\u000aOptimization\u000d\u000aQuantization Optimizing model via quantization \u000d\u000amethods like PTQ/QAT to enhance \u000d\u000aperformance and efficiency\u000d\u000aModel \u000d\u000aDeployment\u000d\u000aDeployment Deploying model on the edge device","Nuvoton Technology Corporation\u000d\u000a188\u000d\u000aData preparation\u000d\u000aThe model imports patient ECG recording in EDF format. It parses EDF files \u000d\u000ausing MNE-Python library.\u000d\u000aThe following code snippet demonstrates the procedure for paring an EDF file.\u000d\u000aimport mne\u000d\u000aedf_file = \u20182026011300001.edf\u2019\u000d\u000araw = mne.io.read_raw_edf(edf_file, preload=True)\u000d\u000adata, times = raw.get_data(return_times=True)\u000d\u000aSubsequently, the data is visualized using matplotlib to facilitate further analysis.\u000d\u000aimport matplotlib.pyplot as plot\u000d\u000afigure = plot.figure(figsize(17.92, 10.13), dpi=300)\u000d\u000aplot.plot(x, y)\u000d\u000aplot.title(\u201cRecord: 00001_lr\u201d)\u000d\u000aplot.ylabel(\u201cI/mV\u201d)\u000d\u000aplot.savefig(\u201c00001_lr.png\u201d)\u000d\u000aplot.close(figure)","Nuvoton Technology Corporation\u000d\u000a189\u000d\u000aBuild the neural network model\u000d\u000aTensorFlow/Keras makes it easy to design neural networks via the Sequential API. \u000d\u000aIt can stack multiple layers in network using this API. In this case, define a 5-layer \u000d\u000asequential model with Keras.\u000d\u000amodel = tf.keras.Sequential([\u000d\u000atf.keras.layers.InputLayer(shape=(1000,1)),\u000d\u000atf.keras.layers.Conv1D(32, 3, activation=\u201drelu\u201d),\u000d\u000atf.keras.layers.MaxPool1D(),\u000d\u000atf.keras.layers.Flatten(),\u000d\u000atf.keras.layers.Dense(1, activation=\u201dsigmoid\u201d)\u000d\u000a])\u000d\u000aCompile the neural network model\u000d\u000aThe next step is to compile the neural network. This is where gradient descent is \u000d\u000aapplied. This is the optimization strategy that reduces the errors as the network is \u000d\u000alearning. There are various optimization strategies but adam is a common \u000d\u000aapproach. It applies the Adam algorithm.\u000d\u000amodel = compile(\u000d\u000aloss=tf.keras.losses.binary_crossentropy,\u000d\u000aoptimizer=tf.keras.optimizers.SGD(learning_rate=0.0282),\u000d\u000ametrics=\u201daccuracy\u201d\u000d\u000a) \u000d\u000aTrain the neural network model\u000d\u000aTraining is done using the fit method. It expects the following parameters:","Nuvoton Technology Corporation\u000d\u000a190\u000d\u000a\u2022 The training data\u000d\u000a\u2022 The validation data\u000d\u000a\u2022 The number of samples to be passed to the network at one time. This is \u000d\u000adeclared using batch_size\u000d\u000a\u2022 The number of epochs to train the network\u000d\u000ahistory = model.fit(\u000d\u000ax_train,\u000d\u000ay_train,\u000d\u000avalidation_data=(x_test, y_test),\u000d\u000abatch_size=32,\u000d\u000aepochs=100\u000d\u000a) \u000d\u000aVisualize model performance\u000d\u000aNotice that the training history is automatically captured by the fit() function. This \u000d\u000avariable now contains the training and validation metrics. It can use these variables \u000d\u000ato visualize the neural network\u2019s performance using Matplotlib.\u000d\u000aimport pandas as pd\u000d\u000aimport matplotlib.pyplot as plot\u000d\u000ametrics_df=pd.DataFrame(history.history)\u000d\u000ametrics_df[[\"loss\", \"val_loss\"]].plot();\u000d\u000ametrics_df[[\"accuracy\", \"val_accuracy\"]].plot();\u000d\u000aIf the training and validation loss decreases gradually, that means the network is \u000d\u000alearning. If the network is performing significantly worse on the test data \u000d\u000acompared to the training data, then it means it\u2019s overfitting on the training data. \u000d\u000aOverfitting means that the network cannot determine patterns in the training data ","Nuvoton Technology Corporation\u000d\u000a191\u000d\u000abut memorizes it. As a result, it performs worse on data it hasn\u2019t seen during \u000d\u000atraining. Overfitting can be avoided by adding a dropout layer.\u000d\u000aOptimize model with INT8 quantization for \u000d\u000aTensorFlow Lite\u000d\u000aTo deploy a TensorFlow model to an edge device with the Arm Ethos-U55 \u000d\u000amicroNPU, it must apply Full Integer Post-Training Quantization (PTQ) to \u000d\u000aconvert all weights, bias, and activations to INT8 format before compiling the \u000d\u000amodel with the Vela compiler.\u000d\u000aimport tensorflow as tf\u000d\u000aconverter = tf.lite.TFLiteConverter.from_keras_model(model)\u000d\u000aconverter.inference_input_type = tf.int8\u000d\u000aconverter.inference_output_type = tf.int8\u000d\u000atflite_quant_int8_model = coverter.convert()","Nuvoton Technology Corporation\u000d\u000a192\u000d\u000aDeploy model to NuMicro\u00ae M55M1 with the NuML \u000d\u000aToolkit\u000d\u000aThe NuML Toolkit is a software solution developed by Nuvoton designed for \u000d\u000athe deployment of TensorFlow Lite models onto NuMicro M55M1 edge \u000d\u000adevices. It operates within a Conda environment. Prior to use, the following \u000d\u000aprerequisites must be installed: Keil MDK v5.39, Miniforge3 for Windows\u000d\u000a(https://conda-forge.org/download), Windows Arm GNU hosted cross \u000d\u000atoolchains (https://developer.arm.com/downloads/-/arm-gnu-toolchaindownloads), and the Nu-Link Keil Driver v3.20 (https://www.nuvoton.com/tooland-software/ide-and-compiler).\u000d\u000aThe NuML Toolkit automatically invokes the Arm Vela compiler to process the \u000d\u000aTensorFlow Lite model. Subsequently, it generates a Keil project, facilitates the \u000d\u000afirmware compilation, and executes the deployment of the binary to the target \u000d\u000ahardware.\u000d\u000aThe operational workflow of the NuML Toolkit is outlined below:\u000d\u000a$ cd NuML\u000d\u000a$ conda env create -f conda/environment.yml\u000d\u000a$ conda activate numl_toolkit\u000d\u000a$ pip install -r requirements.txt\u000d\u000a$ python NuML_TFLM\\setup_progendef.py\u000d\u000a$ python numl_tool.py deploy \\\u000d\u000a --output_path .\\Projects\\AFib \\\u000d\u000a --board NuMaker-M55M1 \\\u000d\u000a --model_file tflite_quant_int8_model \\\u000d\u000a --project_type uvision5_armc6 \\\u000d\u000a --ide_tool C:\\Keil_v5\\UV4\\UV4.exe"]